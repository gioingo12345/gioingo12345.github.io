/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[8],[,function(e,t,n){"use strict";n.d(t,"d",function(){return l}),n.d(t,"e",function(){return f}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return y}),n.d(t,"f",function(){return _}),n.d(t,"h",function(){return S}),n.d(t,"g",function(){return C}),n.d(t,"b",function(){return x}),n.d(t,"i",function(){return T}),n.d(t,"j",function(){return E}),n.d(t,"l",function(){return D}),n.d(t,"k",function(){return A}),n.d(t,"m",function(){return R});n(63),n(215),n(26),n(23),n(45),n(91),n(41),n(21),n(14),n(48),n(216),n(34);var r=n(7),o=(n(27),n(22),n(0)),c=("function"==typeof Symbol&&Object(r.a)(Symbol.iterator),Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e});function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=arguments[2];return o.a.extend({name:n||e.replace(/__/g,"-"),functional:!0,render:function(n,r){var data=r.data,o=r.children;return data.staticClass=(e+" "+(data.staticClass||"")).trim(),n(t,data,o)}})}function h(e,t){return Array.isArray(e)?e.concat(t):(e&&t.push(e),t)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top center 0",n=arguments[2];return{name:e,functional:!0,props:{group:{type:Boolean,default:!1},hideOnLeave:{type:Boolean,default:!1},leaveAbsolute:{type:Boolean,default:!1},mode:{type:String,default:n},origin:{type:String,default:t}},render:function(t,n){var r="transition"+(n.props.group?"-group":"");n.data=n.data||{},n.data.props={name:e,mode:n.props.mode},n.data.on=n.data.on||{},Object.isExtensible(n.data.on)||(n.data.on=c({},n.data.on));var o=[],l=[];o.push(function(e){e.style.transformOrigin=n.props.origin,e.style.webkitTransformOrigin=n.props.origin}),n.props.leaveAbsolute&&l.push(function(e){return e.style.position="absolute"}),n.props.hideOnLeave&&l.push(function(e){return e.style.display="none"});var f=n.data.on,d=f.beforeEnter,m=f.leave;return n.data.on.beforeEnter=function(){return h(d,o)},n.data.on.leave=h(m,l),t(r,n.data,n.children)}}}function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"in-out";return{name:e,functional:!0,props:{mode:{type:String,default:n}},render:function(n,r){return n("transition",{props:c({},r.props,{name:e}),on:t},r.children)}}}var m=!1;try{if("undefined"!=typeof window){var v=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("testListener",v,v),window.removeEventListener("testListener",v,v)}}catch(e){console.warn(e)}function y(e,t,n,r){e.addEventListener(t,n,!!m&&r)}function w(e,path,t){var n=path.length-1;if(n<0)return void 0===e?t:e;for(var i=0;i<n;i++){if(null==e)return t;e=e[path[i]]}return null==e?t:void 0===e[path[n]]?t:e[path[n]]}function _(a,b){if(a===b)return!0;if(a instanceof Date&&b instanceof Date&&a.getTime()!==b.getTime())return!1;if(a!==Object(a)||b!==Object(b))return!1;var e=Object.keys(a);return e.length===Object.keys(b).length&&e.every(function(p){return _(a[p],b[p])})}function S(e,path,t){return path&&path.constructor===String?w(e,(path=(path=path.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),t):t}function C(e,t){for(var n={},i=0;i<t.length;i++){var r=t[i];void 0!==e[r]&&(n[r]=e[r])}return n}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return null==e||""===e?void 0:isNaN(+e)?String(e):""+Number(e)+t}function T(e){return(e||"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var E=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34}),I="$vuetify.icons.";function D(e,t){return t.startsWith(I)?S(e,t,t):t}function A(e){return Object.keys(e)}function R(e){return e.charAt(0).toUpperCase()+e.slice(1)}},,function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.a.extend({mixins:t})}},,,,function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";function r(e,t,n,r,o,c,l){try{var h=e[c](l),f=h.value}catch(e){return void n(e)}h.done?t(f):Promise.resolve(f).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,c){var l=e.apply(t,n);function h(e){r(l,o,c,h,f,"next",e)}function f(e){r(l,o,c,h,f,"throw",e)}h(void 0)})}}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var content=function(e,t){var content=e[1]||"",n=e[3];if(!n)return content;if(t&&"function"==typeof btoa){var r=(c=n,l=btoa(unescape(encodeURIComponent(JSON.stringify(c)))),data="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(data," */")),o=n.sources.map(function(source){return"/*# sourceURL=".concat(n.sourceRoot).concat(source," */")});return[content].concat(o).concat([r]).join("\n")}var c,l,data;return[content].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(content,"}"):content}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(var c=0;c<e.length;c++){var l=e[c];null!=l[0]&&r[l[0]]||(n&&!l[2]?l[2]=n:n&&(l[2]="(".concat(l[2],") and (").concat(n,")")),t.push(l))}},t}},function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],c=o[0],l={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[c]?r[c].parts.push(l):n.push(r[c]={id:c,parts:[l]})}return n}n.r(t),n.d(t,"default",function(){return w});var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c={},head=o&&(document.head||document.getElementsByTagName("head")[0]),l=null,h=0,f=!1,d=function(){},m=null,v="data-vue-ssr-id",y="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function w(e,t,n,o){f=n,m=o||{};var l=r(e,t);return _(l),function(t){for(var n=[],i=0;i<l.length;i++){var o=l[i];(h=c[o.id]).refs--,n.push(h)}t?_(l=r(e,t)):l=[];for(i=0;i<n.length;i++){var h;if(0===(h=n[i]).refs){for(var f=0;f<h.parts.length;f++)h.parts[f]();delete c[h.id]}}}}function _(e){for(var i=0;i<e.length;i++){var t=e[i],n=c[t.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](t.parts[r]);for(;r<t.parts.length;r++)n.parts.push(C(t.parts[r]));n.parts.length>t.parts.length&&(n.parts.length=t.parts.length)}else{var o=[];for(r=0;r<t.parts.length;r++)o.push(C(t.parts[r]));c[t.id]={id:t.id,refs:1,parts:o}}}}function S(){var e=document.createElement("style");return e.type="text/css",head.appendChild(e),e}function C(e){var t,n,r=document.querySelector("style["+v+'~="'+e.id+'"]');if(r){if(f)return d;r.parentNode.removeChild(r)}if(y){var o=h++;r=l||(l=S()),t=E.bind(null,r,o,!1),n=E.bind(null,r,o,!0)}else r=S(),t=function(e,t){var n=t.css,r=t.media,o=t.sourceMap;r&&e.setAttribute("media",r);m.ssrId&&e.setAttribute(v,t.id);o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var x,T=(x=[],function(e,t){return x[e]=t,x.filter(Boolean).join("\n")});function E(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=T(t,o);else{var c=document.createTextNode(o),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(c,l[t]):e.appendChild(c)}}},,function(e,t,n){"use strict";n.d(t,"b",function(){return c});var r=n(0),o=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};function c(e){var t=o({},e.props,e.injections),n=l.options.computed.isDark.call(t);return l.options.computed.themeClasses.call({isDark:n})}var l=r.a.extend().extend({name:"themeable",provide:function(){return{theme:this.themeableProvide}},inject:{theme:{default:{isDark:!1}}},props:{dark:{type:Boolean,default:null},light:{type:Boolean,default:null}},data:function(){return{themeableProvide:{isDark:!1}}},computed:{isDark:function(){return!0===this.dark||!0!==this.light&&this.theme.isDark},themeClasses:function(){return{"theme--dark":this.isDark,"theme--light":!this.isDark}},rootIsDark:function(){return!0===this.dark||!0!==this.light&&this.$vuetify.dark},rootThemeClasses:function(){return{"theme--dark":this.rootIsDark,"theme--light":!this.rootIsDark}}},watch:{isDark:{handler:function(e,t){e!==t&&(this.themeableProvide.isDark=this.isDark)},immediate:!0}}});t.a=l},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return l});n(102),n(74),n(23),n(34),n(46),n(47);function r(e,t,n){if(n&&(t={_isVue:!0,$parent:n,$options:t}),t){if(t.$_alreadyWarned=t.$_alreadyWarned||[],t.$_alreadyWarned.includes(e))return;t.$_alreadyWarned.push(e)}return"[Vuetify] "+e+(t?function(e){if(e._isVue&&e.$parent){for(var t=[],n=0;e;){if(t.length>0){var r=t[t.length-1];if(r.constructor===e.constructor){n++,e=e.$parent;continue}n>0&&(t[t.length-1]=[r,n],n=0)}t.push(e),e=e.$parent}return"\n\nfound in\n\n"+t.map(function(e,i){return""+(0===i?"---\x3e ":" ".repeat(5+2*i))+(Array.isArray(e)?d(e[0])+"... ("+e[1]+" recursive calls)":d(e))}).join("\n")}return"\n\n(found in "+d(e)+")"}(t):"")}function o(e,t,n){var o=r(e,t,n);null!=o&&console.warn(o)}function c(e,t,n){var o=r(e,t,n);null!=o&&console.error(o)}function l(e,t,n,r){o("'"+e+"' is deprecated, use '"+t+"' instead",n,r)}var h=/(?:^|[-_])(\w)/g,f=function(e){return e.replace(h,function(e){return e.toUpperCase()}).replace(/[-_]/g,"")};function d(e,t){if(e.$root===e)return"<Root>";var n="function"==typeof e&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e||{},r=n.name||n._componentTag,o=n.__file;if(!r&&o){var c=o.match(/([^\/\\]+)\.vue$/);r=c&&c[1]}return(r?"<"+f(r)+">":"<Anonymous>")+(o&&!1!==t?" at "+o:"")}},,function(e,t,n){"use strict";n(66),n(67),n(14),n(41),n(74),n(27),n(22),n(21);var r=n(0),o=function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,i){var t=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(t.push(c.value),!i||t.length!==i);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return t}(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return!!e&&!!e.match(/^(#|(rgb|hsl)a?\()/)}t.a=r.a.extend({name:"colorable",props:{color:String},methods:{setBackgroundColor:function(e){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h(e)?data.style=c({},data.style,{"background-color":""+e,"border-color":""+e}):e&&(data.class=c({},data.class,l({},e,!0))),data},setTextColor:function(e){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(h(e))data.style=c({},data.style,{color:""+e,"caret-color":""+e});else if(e){var t=e.toString().trim().split(" ",2),n=o(t,2),r=n[0],f=n[1];data.class=c({},data.class,l({},r+"--text",!0)),f&&(data.class["text--"+f]=!0)}return data}}})},,,,,,,,,,function(e,t,n){var r;r=function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=166)}([function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";function r(e,t){return this._row=[],this.config=e||{},this.supplements=t,this}var o=n(3);r.prototype._nextUnset=function(e,t){var n;for(void 0===t&&(t=0),n=t;n<e.length;n++)if(!e[n])return n;return e.length},r.prototype._matchPattern=function(e,t,n){var r,o,i,a,u=0,c=0,s=0,l=0;for(n=n||this.SINGLE_CODE_ERROR||1,r=0;r<e.length;r++)s+=e[r],l+=t[r];if(s<l)return Number.MAX_VALUE;for(n*=o=s/l,r=0;r<e.length;r++){if(i=e[r],a=t[r]*o,(c=Math.abs(i-a)/a)>n)return Number.MAX_VALUE;u+=c}return u/l},r.prototype._nextSet=function(e,t){var n;for(n=t=t||0;n<e.length;n++)if(e[n])return n;return e.length},r.prototype._correctBars=function(e,t,n){for(var r=n.length,o=0;r--;)(o=e[n[r]]*(1-(1-t)/2))>1&&(e[n[r]]=o)},r.prototype._matchTrace=function(e,t){var n,r=[],i=this,a=i._nextSet(i._row),u=!i._row[a],o=0,s={error:Number.MAX_VALUE,code:-1,start:0};if(e){for(n=0;n<e.length;n++)r.push(0);for(n=a;n<i._row.length;n++)if(i._row[n]^u)r[o]++;else{if(o===r.length-1)return i._matchPattern(r,e)<t?(s.start=n-a,s.end=n,s.counter=r,s):null;r[++o]=1,u=!u}}else for(r.push(0),n=a;n<i._row.length;n++)i._row[n]^u?r[o]++:(o++,r.push(0),r[o]=1,u=!u);return s.start=a,s.end=i._row.length-1,s.counter=r,s},r.prototype.decodePattern=function(e){var t,n=this;return n._row=e,null===(t=n._decode())?(n._row.reverse(),(t=n._decode())&&(t.direction=r.DIRECTION.REVERSE,t.start=n._row.length-t.start,t.end=n._row.length-t.end)):t.direction=r.DIRECTION.FORWARD,t&&(t.format=n.FORMAT),t},r.prototype._matchRange=function(e,t,n){var r;for(r=e=e<0?0:e;r<t;r++)if(this._row[r]!==n)return!1;return!0},r.prototype._fillCounters=function(e,t,n){var r,o=this,i=0,a=[];for(n=void 0===n||n,e=void 0!==e?e:o._nextUnset(o._row),t=t||o._row.length,a[i]=0,r=e;r<t;r++)o._row[r]^n?a[i]++:(a[++i]=1,n=!n);return a},r.prototype._toCounters=function(e,t){var n,r=this,i=t.length,a=r._row.length,u=!r._row[e],c=0;for(o.a.init(t,0),n=e;n<a;n++)if(r._row[n]^u)t[c]++;else{if(++c===i)break;t[c]=1,u=!u}return t},Object.defineProperty(r.prototype,"FORMAT",{value:"unknown",writeable:!1}),r.DIRECTION={FORWARD:1,REVERSE:-1},r.Exception={StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"},r.CONFIG_KEYS={},t.a=r},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";t.a={init:function(e,t){for(var n=e.length;n--;)e[n]=t},shuffle:function(e){for(var t,n,r=e.length-1;r>=0;r--)t=Math.floor(Math.random()*r),n=e[r],e[r]=e[t],e[t]=n;return e},toPointList:function(e){var t,n,r=[],o=[];for(t=0;t<e.length;t++){for(r=[],n=0;n<e[t].length;n++)r[n]=e[t][n];o[t]="["+r.join(",")+"]"}return"["+o.join(",\r\n")+"]"},threshold:function(e,t,n){var r,o=[];for(r=0;r<e.length;r++)n.apply(e,[e[r]])>=t&&o.push(e[r]);return o},maxIndex:function(e){var t,n=0;for(t=0;t<e.length;t++)e[t]>e[n]&&(n=t);return n},max:function(e){var t,n=0;for(t=0;t<e.length;t++)e[t]>n&&(n=e[t]);return n},sum:function(e){for(var t=e.length,n=0;t--;)n+=e[t];return n}}},function(e,t,n){"use strict";function r(e,t){e=a()(function(){var e={};return Object.keys(r.CONFIG_KEYS).forEach(function(t){e[t]=r.CONFIG_KEYS[t].default}),e}(),e),u.a.call(this,e,t)}var i=n(28),a=n.n(i),u=n(1),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};r.prototype=Object.create(u.a.prototype,{CODE_L_START:{value:0},CODE_G_START:{value:10},START_PATTERN:{value:[1,1,1]},STOP_PATTERN:{value:[1,1,1]},MIDDLE_PATTERN:{value:[1,1,1,1,1]},EXTENSION_START_PATTERN:{value:[1,1,2]},CODE_PATTERN:{value:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]]},CODE_FREQUENCY:{value:[0,11,13,14,19,25,28,21,22,26]},SINGLE_CODE_ERROR:{value:.7},AVG_CODE_ERROR:{value:.48},FORMAT:{value:"ean_13",writeable:!1}}),r.prototype.constructor=r,r.prototype._decodeCode=function(e,t){var n,r,o,i=[0,0,0,0],a=this,u=e,c=!a._row[u],s=0,l={error:Number.MAX_VALUE,code:-1,start:e,end:e};for(t||(t=a.CODE_PATTERN.length),n=u;n<a._row.length;n++)if(a._row[n]^c)i[s]++;else{if(s===i.length-1){for(r=0;r<t;r++)(o=a._matchPattern(i,a.CODE_PATTERN[r]))<l.error&&(l.code=r,l.error=o);return l.end=n,l.error>a.AVG_CODE_ERROR?null:l}i[++s]=1,c=!c}return null},r.prototype._findPattern=function(e,t,n,r,o){var i,a,u,c,s=[],l=this,h=0,f={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(t||(t=l._nextSet(l._row)),void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===o&&(o=l.AVG_CODE_ERROR),i=0;i<e.length;i++)s[i]=0;for(i=t;i<l._row.length;i++)if(l._row[i]^n)s[h]++;else{if(h===s.length-1){for(c=0,u=0;u<s.length;u++)c+=s[u];if((a=l._matchPattern(s,e))<o)return f.error=a,f.start=i-c,f.end=i,f;if(!r)return null;for(u=0;u<s.length-2;u++)s[u]=s[u+2];s[s.length-2]=0,s[s.length-1]=0,h--}else h++;s[h]=1,n=!n}return null},r.prototype._findStart=function(){for(var e,t,n=this,r=n._nextSet(n._row);!t;){if(!(t=n._findPattern(n.START_PATTERN,r)))return null;if((e=t.start-(t.end-t.start))>=0&&n._matchRange(e,t.start,0))return t;r=t.end,t=null}},r.prototype._verifyTrailingWhitespace=function(e){var t;return(t=e.end+(e.end-e.start))<this._row.length&&this._matchRange(e.end,t,0)?e:null},r.prototype._findEnd=function(e,t){var n=this,r=n._findPattern(n.STOP_PATTERN,e,t,!1);return null!==r?n._verifyTrailingWhitespace(r):null},r.prototype._calculateFirstDigit=function(e){var t;for(t=0;t<this.CODE_FREQUENCY.length;t++)if(e===this.CODE_FREQUENCY[t])return t;return null},r.prototype._decodePayload=function(e,t,n){var r,o,i=this,a=0;for(r=0;r<6;r++){if(!(e=i._decodeCode(e.end)))return null;e.code>=i.CODE_G_START?(e.code=e.code-i.CODE_G_START,a|=1<<5-r):a|=0<<5-r,t.push(e.code),n.push(e)}if(null===(o=i._calculateFirstDigit(a)))return null;if(t.unshift(o),null===(e=i._findPattern(i.MIDDLE_PATTERN,e.end,!0,!1)))return null;for(n.push(e),r=0;r<6;r++){if(!(e=i._decodeCode(e.end,i.CODE_G_START)))return null;n.push(e),t.push(e.code)}return e},r.prototype._decode=function(){var e,t,n=this,r=[],c=[],i={};if(!(e=n._findStart()))return null;if(t={code:e.code,start:e.start,end:e.end},c.push(t),!(t=n._decodePayload(t,r,c)))return null;if(!(t=n._findEnd(t.end,!1)))return null;if(c.push(t),!n._checksum(r))return null;if(this.supplements.length>0){var a=this._decodeExtensions(t.end);if(!a)return null;var u=a.decodedCodes[a.decodedCodes.length-1],s={start:u.start+((u.end-u.start)/2|0),end:u.end};if(!n._verifyTrailingWhitespace(s))return null;i={supplement:a,code:r.join("")+a.code}}return o({code:r.join(""),start:e.start,end:t.end,codeset:"",startInfo:e,decodedCodes:c},i)},r.prototype._decodeExtensions=function(e){var t,n,r=this._nextSet(this._row,e),o=this._findPattern(this.EXTENSION_START_PATTERN,r,!1,!1);if(null===o)return null;for(t=0;t<this.supplements.length;t++)if(null!==(n=this.supplements[t].decode(this._row,o.end)))return{code:n.code,start:r,startInfo:o,end:n.end,codeset:"",decodedCodes:n.decodedCodes};return null},r.prototype._checksum=function(e){var t,n=0;for(t=e.length-2;t>=0;t-=2)n+=e[t];for(n*=3,t=e.length-1;t>=0;t-=2)n+=e[t];return n%10==0},r.CONFIG_KEYS={supplements:{type:"arrayOf(string)",default:[],description:"Allowed extensions to be decoded (2 and/or 5)"}},t.a=r},function(e,t,n){var r=n(38),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t){e.exports=function(e){var t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}},function(e,t,n){var r=n(11),i=n(119),a=n(146),u="[object Null]",o="[object Undefined]",s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?o:u:s&&s in Object(e)?i(e):a(e)}},function(e,t,n){"use strict";t.a={drawRect:function(e,t,n,r){n.strokeStyle=r.color,n.fillStyle=r.color,n.lineWidth=1,n.beginPath(),n.strokeRect(e.x,e.y,t.x,t.y)},drawPath:function(e,t,n,r){n.strokeStyle=r.color,n.fillStyle=r.color,n.lineWidth=r.lineWidth,n.beginPath(),n.moveTo(e[0][t.x],e[0][t.y]);for(var o=1;o<e.length;o++)n.lineTo(e[o][t.x],e[o][t.y]);n.closePath(),n.stroke()},drawImage:function(e,t,n){var r,o=n.getImageData(0,0,t.x,t.y),i=o.data,a=e.length,u=i.length;if(u/a!=4)return!1;for(;a--;)r=e[a],i[--u]=255,i[--u]=r,i[--u]=r,i[--u]=r;return n.putImageData(o,0,0),!0}}},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(133),i=n(134),a=n(135),u=n(136),c=n(137);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=u,r.prototype.set=c,e.exports=r},function(e,t,n){var r=n(5).Symbol;e.exports=r},function(e,t,n){var r=n(17);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(2),i=n(130),a=n(154),u=n(165);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:a(u(e))}},function(e,t,n){var r=n(131);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(22)(Object,"create");e.exports=r},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(96),o=n(6),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!u.call(e,"callee")};e.exports=c},function(e,t,n){"use strict";function a(e,t){function n(e,t){var n,r=0;for(n=e;n<=t;n++)r+=a[n];return r}function r(e,t){var n,r=0;for(n=e;n<=t;n++)r+=n*a[n];return r}t||(t=8);var a,u=8-t;return function(){var c,u,l,s,h,f=[0],p=(1<<t)-1;for(a=function(e,t){t||(t=8);for(var n=e.data,r=n.length,o=8-t,a=new Int32Array(1<<t);r--;)a[n[r]>>o]++;return a}(e,t),s=1;s<p;s++)0==(l=(c=n(0,s))*(u=n(s+1,p)))&&(l=1),h=r(0,s)*u-r(s+1,p)*c,f[s]=h*h/l;return o.a.maxIndex(f)}()<<u}function p(e){var t,n=[],r=[];for(t=1;t<Math.sqrt(e)+1;t++)e%t==0&&(r.push(t),t!==e/t&&n.unshift(Math.floor(e/t)));return r.concat(n)}var r=n(50),o=n(3);t.b=function(e,t){return{x:e,y:t,toVec2:function(){return b.clone([this.x,this.y])},toVec3:function(){return c.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}},t.f=function(e,t){var n=a(e);return function(e,t,n){n||(n=e);for(var r=e.data,o=r.length,i=n.data;o--;)i[o]=r[o]<t?1:0}(e,n,t),n},t.g=function(e,t,n){function o(e){var t=!1;for(i=0;i<l.length;i++)(a=l[i]).fits(e)&&(a.add(e),t=!0);return t}var c,i,a,u,l=[];for(n||(n="rad"),c=0;c<e.length;c++)o(u=r.a.createPoint(e[c],c,n))||l.push(r.a.create(u,t));return l},t.h=function(e,t,n){var r,o,i,a,u=0,c=0,s=[];for(r=0;r<t;r++)s[r]={score:0,item:null};for(r=0;r<e.length;r++)if((o=n.apply(this,[e[r]]))>c)for((i=s[u]).score=o,i.item=e[r],c=Number.MAX_VALUE,a=0;a<t;a++)s[a].score<c&&(c=s[a].score,u=a);return s},t.c=function(e,t,n){for(var r,o=0,i=t.x,a=Math.floor(e.length/4),u=t.x/2,c=0,s=t.x;i<a;){for(r=0;r<u;r++)n[c]=(.299*e[4*o+0]+.587*e[4*o+1]+.114*e[4*o+2]+(.299*e[4*(o+1)+0]+.587*e[4*(o+1)+1]+.114*e[4*(o+1)+2])+(.299*e[4*i+0]+.587*e[4*i+1]+.114*e[4*i+2])+(.299*e[4*(i+1)+0]+.587*e[4*(i+1)+1]+.114*e[4*(i+1)+2]))/4,c++,o+=2,i+=2;o+=s,i+=s}},t.d=function(e,t,n){var r,o=e.length/4|0;if(n&&!0===n.singleChannel)for(r=0;r<o;r++)t[r]=e[4*r+0];else for(r=0;r<o;r++)t[r]=.299*e[4*r+0]+.587*e[4*r+1]+.114*e[4*r+2]},t.i=function(e,t){for(var n=e.data,r=e.size.x,o=t.data,i=0,a=r,u=n.length,c=r/2,s=0;a<u;){for(var l=0;l<c;l++)o[s]=Math.floor((n[i]+n[i+1]+n[a]+n[a+1])/4),s++,i+=2,a+=2;i+=r,a+=r}},t.a=function(e,t){var n=e[0],r=e[1],o=e[2],i=o*r,a=i*(1-Math.abs(n/60%2-1)),u=o-i,c=0,s=0,l=0;return n<60?(c=i,s=a):n<120?(c=a,s=i):n<180?(s=i,l=a):n<240?(s=a,l=i):n<300?(c=a,l=i):n<360&&(c=i,l=a),(t=t||[0,0,0])[0]=255*(c+u)|0,t[1]=255*(s+u)|0,t[2]=255*(l+u)|0,t},t.e=function(e,t){function n(e){for(var t=0,n=e[Math.floor(e.length/2)];t<e.length-1&&e[t]<f;)t++;return t>0&&(n=Math.abs(e[t]-f)>Math.abs(e[t-1]-f)?e[t-1]:e[t]),f/n<c[l+1]/c[l]&&f/n>c[l-1]/c[l]?{x:n,y:n}:null}var r,o=p(t.x),i=p(t.y),a=Math.max(t.x,t.y),u=function(e,t){for(var n=0,r=0,o=[];n<e.length&&r<t.length;)e[n]===t[r]?(o.push(e[n]),n++,r++):e[n]>t[r]?r++:n++;return o}(o,i),c=[8,10,15,20,32,60,80],s={"x-small":5,small:4,medium:3,large:2,"x-large":1},l=s[e]||s.medium,h=c[l],f=Math.floor(a/h);return(r=n(u))||(r=n(p(a)))||(r=n(p(f*h))),r},t.j=function(e,t,n){var r={width:e,height:t},o=Object.keys(n).reduce(function(e,t){var i=function(e){return{value:parseFloat(e),unit:(e.indexOf("%"),e.length,"%")}}(n[t]),a=l[t](i,r);return e[t]=a,e},{});return{sx:o.left,sy:o.top,sw:o.right-o.left,sh:o.bottom-o.top}};var b={clone:n(7)},c={clone:n(83)},l={top:function(e,t){if("%"===e.unit)return Math.floor(t.height*(e.value/100))},right:function(e,t){if("%"===e.unit)return Math.floor(t.width-t.width*(e.value/100))},bottom:function(e,t){if("%"===e.unit)return Math.floor(t.height-t.height*(e.value/100))},left:function(e,t){if("%"===e.unit)return Math.floor(t.width*(e.value/100))}}},function(e,t,n){"use strict";function r(e,t,n,r){t?this.data=t:n?(this.data=new n(e.x*e.y),n===Array&&r&&a.a.init(this.data,0)):(this.data=new Uint8Array(e.x*e.y),Uint8Array===Array&&r&&a.a.init(this.data,0)),this.size=e}var o=n(53),i=n(19),a=n(3),u={clone:n(7)};r.prototype.inImageWithBorder=function(e,t){return e.x>=t&&e.y>=t&&e.x<this.size.x-t&&e.y<this.size.y-t},r.sample=function(e,t,n){var r=Math.floor(t),o=Math.floor(n),i=e.size.x,a=o*e.size.x+r,u=e.data[a+0],c=e.data[a+1],s=e.data[a+i],l=e.data[a+i+1],h=u-c;return t-=r,n-=o,Math.floor(t*(n*(h-s+l)-h)+n*(s-u)+u)},r.clearArray=function(e){for(var t=e.length;t--;)e[t]=0},r.prototype.subImage=function(e,t){return new o.a(e,t,this)},r.prototype.subImageAsCopy=function(e,t){var n,r,o=e.size.y,i=e.size.x;for(n=0;n<i;n++)for(r=0;r<o;r++)e.data[r*i+n]=this.data[(t.y+r)*this.size.x+t.x+n]},r.prototype.copyTo=function(e){for(var t=this.data.length,n=this.data,r=e.data;t--;)r[t]=n[t]},r.prototype.get=function(e,t){return this.data[t*this.size.x+e]},r.prototype.getSafe=function(e,t){var n;if(!this.indexMapping){for(this.indexMapping={x:[],y:[]},n=0;n<this.size.x;n++)this.indexMapping.x[n]=n,this.indexMapping.x[n+this.size.x]=n;for(n=0;n<this.size.y;n++)this.indexMapping.y[n]=n,this.indexMapping.y[n+this.size.y]=n}return this.data[this.indexMapping.y[t+this.size.y]*this.size.x+this.indexMapping.x[e+this.size.x]]},r.prototype.set=function(e,t,n){return this.data[t*this.size.x+e]=n,this},r.prototype.zeroBorder=function(){var e,t=this.size.x,n=this.size.y,r=this.data;for(e=0;e<t;e++)r[e]=r[(n-1)*t+e]=0;for(e=1;e<n-1;e++)r[e*t]=r[e*t+(t-1)]=0},r.prototype.invert=function(){for(var e=this.data,t=e.length;t--;)e[t]=e[t]?0:1},r.prototype.convolve=function(e){var t,n,r,o,i=e.length/2|0,a=0;for(n=0;n<this.size.y;n++)for(t=0;t<this.size.x;t++){for(a=0,o=-i;o<=i;o++)for(r=-i;r<=i;r++)a+=e[o+i][r+i]*this.getSafe(t+r,n+o);this.data[n*this.size.x+t]=a}},r.prototype.moments=function(e){var t,n,r,o,i,a,c,l,h,f,p=this.data,d=this.size.y,m=this.size.x,g=[],v=[],y=Math.PI,w=y/4;if(e<=0)return v;for(i=0;i<e;i++)g[i]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(n=0;n<d;n++)for(o=n*n,t=0;t<m;t++)(r=p[n*m+t])>0&&((a=g[r-1]).m00+=1,a.m01+=n,a.m10+=t,a.m11+=t*n,a.m02+=o,a.m20+=t*t);for(i=0;i<e;i++)a=g[i],isNaN(a.m00)||0===a.m00||(l=a.m10/a.m00,h=a.m01/a.m00,c=a.m11/a.m00-l*h,f=(a.m02/a.m00-h*h-(a.m20/a.m00-l*l))/(2*c),f=.5*Math.atan(f)+(c>=0?w:-w)+y,a.theta=(180*f/y+90)%180-90,a.theta<0&&(a.theta+=180),a.rad=f>y?f-y:f,a.vec=u.clone([Math.cos(f),Math.sin(f)]),v.push(a));return v},r.prototype.show=function(e,t){var n,r,o,i,a,u,c;for(t||(t=1),n=e.getContext("2d"),e.width=this.size.x,e.height=this.size.y,o=(r=n.getImageData(0,0,e.width,e.height)).data,i=0,c=0;c<this.size.y;c++)for(u=0;u<this.size.x;u++)a=c*this.size.x+u,i=this.get(u,c)*t,o[4*a+0]=i,o[4*a+1]=i,o[4*a+2]=i,o[4*a+3]=255;n.putImageData(r,0,0)},r.prototype.overlay=function(e,t,r){(!t||t<0||t>360)&&(t=360);for(var o=[0,1,1],a=[0,0,0],u=[255,255,255],c=[0,0,0],s=[],l=e.getContext("2d"),h=l.getImageData(r.x,r.y,this.size.x,this.size.y),f=h.data,d=this.data.length;d--;)o[0]=this.data[d]*t,s=o[0]<=0?u:o[0]>=360?c:n.i(i.a)(o,a),f[4*d+0]=s[0],f[4*d+1]=s[1],f[4*d+2]=s[2],f[4*d+3]=255;l.putImageData(h,r.x,r.y)},t.a=r},function(e,t,n){var r=n(37);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(97),i=n(120);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(27),i=1/0;e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},function(e,t,n){var r=n(25),i=n(26);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t,n){var r=n(8),i=n(0),a="[object AsyncFunction]",u="[object Function]",o="[object GeneratorFunction]",s="[object Proxy]";e.exports=function(e){if(!i(e))return!1;var t=r(e);return t==u||t==o||t==a||t==s}},function(e,t){var n=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},function(e,t,n){var r=n(8),i=n(6),a="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&r(e)==a}},function(e,t,n){var r=n(100),i=n(116)(function(e,t,n){r(e,t,n)});e.exports=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";t.a={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(e,t){function n(e,t,n,r){var o,l,h;for(o=0;o<7;o++){if(l=e.cy+c[e.dir][0],h=e.cx+c[e.dir][1],a[i=l*s+h]===t&&(0===u[i]||u[i]===n))return u[i]=n,e.cy=l,e.cx=h,!0;0===u[i]&&(u[i]=r),e.dir=(e.dir+1)%8}return!1}function r(e,t,n){return{dir:n,x:e,y:t,next:null,prev:null}}function o(e,t,o,i,a){var u,c,s,l=null,h={cx:t,cy:e,dir:0};if(n(h,i,o,a)){u=l=r(t,e,h.dir),s=h.dir,(c=r(h.cx,h.cy,0)).prev=u,u.next=c,c.next=null,u=c;do{h.dir=(h.dir+6)%8,n(h,i,o,a),s!==h.dir?(u.dir=h.dir,(c=r(h.cx,h.cy,0)).prev=u,u.next=c,c.next=null,u=c):(u.dir=s,u.x=h.cx,u.y=h.cy),s=h.dir}while(h.cx!==t||h.cy!==e);l.prev=u.prev,u.prev.next=l}return l}var i,a=e.data,u=t.data,c=this.searchDirections,s=e.size.x;return{trace:function(e,t,r,o){return n(e,t,r,o)},contourTracing:function(e,t,n,r,i){return o(e,t,n,r,i)}}}}},function(e,t,n){"use strict";function r(){o.a.call(this)}var o=n(1),i=n(3);r.prototype=Object.create(o.a.prototype,{ALPHABETH_STRING:{value:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,45,46,32,42,36,47,43,37]},CHARACTER_ENCODINGS:{value:[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]},ASTERISK:{value:148},FORMAT:{value:"code_39",writeable:!1}}),r.prototype.constructor=r,r.prototype._decode=function(){var e,t,n,r,o=this,a=[0,0,0,0,0,0,0,0,0],u=[],c=o._findStart();if(!c)return null;r=o._nextSet(o._row,c.end);do{if(a=o._toCounters(r,a),(n=o._toPattern(a))<0)return null;if((e=o._patternToChar(n))<0)return null;u.push(e),t=r,r+=i.a.sum(a),r=o._nextSet(o._row,r)}while("*"!==e);return u.pop(),u.length&&o._verifyTrailingWhitespace(t,r,a)?{code:u.join(""),start:c.start,end:r,startInfo:c,decodedCodes:u}:null},r.prototype._verifyTrailingWhitespace=function(e,t,n){var r=i.a.sum(n);return 3*(t-e-r)>=r},r.prototype._patternToChar=function(e){var t,n=this;for(t=0;t<n.CHARACTER_ENCODINGS.length;t++)if(n.CHARACTER_ENCODINGS[t]===e)return String.fromCharCode(n.ALPHABET[t]);return-1},r.prototype._findNextWidth=function(e,t){var n,r=Number.MAX_VALUE;for(n=0;n<e.length;n++)e[n]<r&&e[n]>t&&(r=e[n]);return r},r.prototype._toPattern=function(e){for(var t,n,r=e.length,o=0,i=r,a=0;i>3;){for(o=this._findNextWidth(e,o),i=0,t=0,n=0;n<r;n++)e[n]>o&&(t|=1<<r-1-n,i++,a+=e[n]);if(3===i){for(n=0;n<r&&i>0;n++)if(e[n]>o&&(i--,2*e[n]>=a))return-1;return t}}return-1},r.prototype._findStart=function(){var e,t,n,r=this,o=r._nextSet(r._row),i=o,a=[0,0,0,0,0,0,0,0,0],u=0,c=!1;for(e=o;e<r._row.length;e++)if(r._row[e]^c)a[u]++;else{if(u===a.length-1){if(r._toPattern(a)===r.ASTERISK&&(n=Math.floor(Math.max(0,i-(e-i)/4)),r._matchRange(n,i,0)))return{start:i,end:e};for(i+=a[0]+a[1],t=0;t<7;t++)a[t]=a[t+2];a[7]=0,a[8]=0,u--}else u++;a[u]=1,c=!c}return null},t.a=r},function(e,t){e.exports=function(e,t){return e[0]*t[0]+e[1]*t[1]}},function(e,t,n){var i=n(22)(n(5),"Map");e.exports=i},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(138),i=n(139),a=n(140),u=n(141),c=n(142);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=u,r.prototype.set=c,e.exports=r},function(e,t,n){var r=n(21),i=n(17);e.exports=function(e,t,n){(void 0===n||i(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(21),i=n(17),u=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var o=e[t];u.call(e,t)&&i(o,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(22),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(47))},function(e,t,n){var r=n(147)(Object.getPrototypeOf,Object);e.exports=r},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(87),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,u=i(o.length-t,0),c=Array(u);++a<u;)c[a]=o[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=o[a];return s[t]=n(c),r(e,this,s)}}},function(e,t,n){var r=n(106),i=n(148)(r);e.exports=i},function(e,t){e.exports=function(e){return e}},function(e,t,n){(function(e){var r=n(5),o=n(163),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,c=a&&a.exports===i?r.Buffer:void 0,l=(c?c.isBuffer:void 0)||o;e.exports=l}).call(t,n(29)(e))},function(e,t,n){var r=n(98),o=n(109),i=n(145),a=i&&i.isTypedArray,u=a?o(a):r;e.exports=u},function(e,t,n){var r=n(88),i=n(99),a=n(24);e.exports=function(e){return a(e)?r(e,!0):i(e)}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(t,n,r){"use strict";function o(e){(function(e){S=e||new A.a({x:y.getWidth(),y:y.getHeight()}),C=[q.clone([0,0]),q.clone([0,S.size.y]),q.clone([S.size.x,S.size.y]),q.clone([S.size.x,0])],R.a.init(S,W.locator)})(e),x=k.a.create(W.decoder,S)}function i(e){var t;if("VideoStream"===W.inputStream.type)t=document.createElement("video"),y=j.a.createVideoStream(t);else if("ImageStream"===W.inputStream.type)y=j.a.createImageStream();else if("LiveStream"===W.inputStream.type){var n=a();n&&((t=n.querySelector("video"))||(t=document.createElement("video"),n.appendChild(t))),y=j.a.createLiveStream(t),N.a.request(t,W.inputStream.constraints).then(function(){y.trigger("canrecord")}).catch(function(t){return e(t)})}y.setAttribute("preload","auto"),y.setInputStream(W.inputStream),y.addEventListener("canrecord",function(e){R.a.checkImageConstraints(y,W.locator),function(){if("undefined"!=typeof document){var e=a();if(U.dom.image=document.querySelector("canvas.imgBuffer"),U.dom.image||(U.dom.image=document.createElement("canvas"),U.dom.image.className="imgBuffer",e&&"ImageStream"===W.inputStream.type&&e.appendChild(U.dom.image)),U.ctx.image=U.dom.image.getContext("2d"),U.dom.image.width=y.getCanvasSize().x,U.dom.image.height=y.getCanvasSize().y,U.dom.overlay=document.querySelector("canvas.drawingBuffer"),!U.dom.overlay){U.dom.overlay=document.createElement("canvas"),U.dom.overlay.className="drawingBuffer",e&&e.appendChild(U.dom.overlay);var t=document.createElement("br");t.setAttribute("clear","all"),e&&e.appendChild(t)}U.ctx.overlay=U.dom.overlay.getContext("2d"),U.dom.overlay.width=y.getCanvasSize().x,U.dom.overlay.height=y.getCanvasSize().y}}(),w=F.a.create(y,U.dom.image),v(W.numOfWorkers,function(){0===W.numOfWorkers&&o(),function(e){y.play(),e()}(e)})}.bind(void 0,e))}function a(){var e=W.inputStream.target;if(e&&e.nodeName&&1===e.nodeType)return e;var t="string"==typeof e?e:"#interactive.viewport";return document.querySelector(t)}function c(e,t){var n=e;e&&z&&(function e(t){function n(e){for(var t=e.length;t--;)e[t][0]+=i,e[t][1]+=a}var r,o=y.getTopRight(),i=o.x,a=o.y;if(0!==i||0!==a){if(t.barcodes)for(r=0;r<t.barcodes.length;r++)e(t.barcodes[r]);if(t.line&&2===t.line.length&&function(e){e[0].x+=i,e[0].y+=a,e[1].x+=i,e[1].y+=a}(t.line),t.box&&n(t.box),t.boxes&&t.boxes.length>0)for(r=0;r<t.boxes.length;r++)n(t.boxes[r])}}(e),function e(t,n){n&&T&&(t.barcodes?t.barcodes.filter(function(e){return e.codeResult}).forEach(function(t){return e(t,n)}):t.codeResult&&T.addResult(n,y.getCanvasSize(),t.codeResult))}(e,t),n=e.barcodes||e),O.a.publish("processed",n),function(e){return e&&(e.barcodes?e.barcodes.some(function(e){return e.codeResult}):e.codeResult)}(e)&&O.a.publish("detected",n)}function l(){var e,t;(t=W.locate?R.a.locate():[[q.clone(C[0]),q.clone(C[1]),q.clone(C[2]),q.clone(C[3])]])?((e=(e=x.decodeFromBoundingBoxes(t))||{}).boxes=t,c(e,S.data)):c()}function g(){var e;if(z){if(V.length>0){if(!(e=V.filter(function(e){return!e.busy})[0]))return;w.attachData(e.imageData)}else w.attachData(S.data);w.grab()&&(e?(e.busy=!0,e.worker.postMessage({cmd:"process",imageData:e.imageData},[e.imageData.buffer])):l())}else l()}function h(){z&&"LiveStream"===W.inputStream.type?function(){var e=null,t=1e3/(W.frequency||60);_=!1,function n(r){e=e||r,_||(r>=e&&(e+=t,g()),window.requestAnimFrame(n))}(performance.now())}():g()}function f(e){var t,n={worker:void 0,imageData:new Uint8Array(y.getWidth()*y.getHeight()),busy:!0};t=m(),n.worker=new Worker(t),n.worker.onmessage=function(r){if("initialized"===r.data.event)return URL.revokeObjectURL(t),n.busy=!1,n.imageData=new Uint8Array(r.data.imageData),e(n);"processed"===r.data.event?(n.imageData=new Uint8Array(r.data.imageData),n.busy=!1,c(r.data.result,n.imageData)):r.data.event},n.worker.postMessage({cmd:"init",size:{x:y.getWidth(),y:y.getHeight()},imageData:n.imageData,config:b(W)},[n.imageData.buffer])}function b(e){return B({},e,{inputStream:B({},e.inputStream,{target:null})})}function d(e){function t(e){self.postMessage({event:"processed",imageData:o.data,result:e},[o.data.buffer])}function n(){self.postMessage({event:"initialized",imageData:o.data},[o.data.buffer])}if(e){var r=e().default;if(!r)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var o;self.onmessage=function(e){if("init"===e.data.cmd){var i=e.data.config;i.numOfWorkers=0,o=new r.ImageWrapper({x:e.data.size.x,y:e.data.size.y},new Uint8Array(e.data.imageData)),r.init(i,n,o),r.onProcessed(t)}else"process"===e.data.cmd?(o.data=new Uint8Array(e.data.imageData),r.start()):"setReaders"===e.data.cmd&&r.setReaders(e.data.readers)}}function m(){var t,n;return void 0!==e&&(n=e),t=new Blob(["("+d.toString()+")("+n+");"],{type:"text/javascript"}),window.URL.createObjectURL(t)}function v(e,t){var n=e-V.length;if(0===n)return t&&t();if(n<0)return V.slice(n).forEach(function(e){e.worker.terminate()}),V=V.slice(0,n),t&&t();for(var r=function(n){V.push(n),V.length>=e&&t&&t()},o=0;o<n;o++)f(r)}Object.defineProperty(n,"__esModule",{value:!0});var y,w,_,S,C,x,T,E=r(28),I=r.n(E),D=r(54),A=(r.n(D),r(20)),R=r(64),k=r(57),O=r(51),N=r(59),P=r(9),M=r(49),L=r(55),j=r(63),F=r(61),B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q={clone:r(7)},U={ctx:{image:null,overlay:null},dom:{image:null,overlay:null}},V=[],z=!0,W={};n.default={init:function(e,t,n){if(W=I()({},L.a,e),n)return z=!1,o(n),t();i(t)},start:function(){h()},stop:function(){_=!0,v(0),"LiveStream"===W.inputStream.type&&(N.a.release(),y.clearEventHandlers())},pause:function(){_=!0},onDetected:function(e){O.a.subscribe("detected",e)},offDetected:function(e){O.a.unsubscribe("detected",e)},onProcessed:function(e){O.a.subscribe("processed",e)},offProcessed:function(e){O.a.unsubscribe("processed",e)},setReaders:function(e){!function(e){x?x.setReaders(e):z&&V.length>0&&V.forEach(function(t){t.worker.postMessage({cmd:"setReaders",readers:e})})}(e)},registerResultCollector:function(e){e&&"function"==typeof e.addResult&&(T=e)},canvas:U,decodeSingle:function(e,t){var n=this;e=I()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:e.src},numOfWorkers:1,locator:{halfSample:!1}},e),this.init(e,function(){O.a.once("processed",function(e){n.stop(),t.call(null,e)},!0),h()})},ImageWrapper:A.a,ImageDebug:P.a,ResultCollector:M.a,CameraAccess:N.a}},function(e,t,n){"use strict";var i=n(9);t.a={create:function(e){function t(t){return r&&t&&!function(e,t){return!!t&&t.some(function(t){return Object.keys(t).every(function(n){return t[n]===e[n]})})}(t,e.blacklist)&&function(e,t){return"function"!=typeof t||t(e)}(t,e.filter)}var n=document.createElement("canvas"),a=n.getContext("2d"),u=[],r=e.capacity||20,s=!0===e.capture;return{addResult:function(e,o,c){var l={};t(c)&&(r--,l.codeResult=c,s&&(n.width=o.x,n.height=o.y,i.a.drawImage(e,o,a),l.frame=n.toDataURL()),u.push(l))},getResults:function(){return u}}}}},function(e,t,n){"use strict";var r={clone:n(7),dot:n(32)};t.a={create:function(e,t){function n(e){o[e.id]=e,a.push(e)}function i(){var e,t=0;for(e=0;e<a.length;e++)t+=a[e].rad;u.rad=t/a.length,u.vec=r.clone([Math.cos(u.rad),Math.sin(u.rad)])}var a=[],u={rad:0,vec:r.clone([0,0])},o={};return n(e),i(),{add:function(e){o[e.id]||(n(e),i())},fits:function(e){return Math.abs(r.dot(e.point.vec,u.vec))>t},getPoints:function(){return a},getCenter:function(){return u}}},createPoint:function(e,t,n){return{rad:e[n],point:e,id:t}}}},function(e,t,n){"use strict";t.a=function(){function e(e){return o[e]||(o[e]={subscribers:[]}),o[e]}function t(){o={}}function n(e,t){e.async?setTimeout(function(){e.callback(t)},4):e.callback(t)}function r(t,n,r){var o;if("function"==typeof n)o={callback:n,async:r};else if(!(o=n).callback)throw"Callback was not specified on options";e(t).subscribers.push(o)}var o={};return{subscribe:function(e,t,n){return r(e,t,n)},publish:function(t,r){var o=e(t),i=o.subscribers;i.filter(function(e){return!!e.once}).forEach(function(e){n(e,r)}),o.subscribers=i.filter(function(e){return!e.once}),o.subscribers.forEach(function(e){n(e,r)})},once:function(e,t,n){r(e,{callback:t,async:n,once:!0})},unsubscribe:function(n,r){var o;n?(o=e(n)).subscribers=o&&r?o.subscribers.filter(function(e){return e.callback!==r}):[]:t()}}}()},function(e,t,n){"use strict";t.b=function(){return navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices():Promise.reject(new Error("enumerateDevices is not defined"))},t.a=function(e){return navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(e):Promise.reject(new Error("getUserMedia is not defined"))}},function(e,t,n){"use strict";function r(e,t,n){n||(n={data:null,size:t}),this.data=n.data,this.originalSize=n.size,this.I=n,this.from=e,this.size=t}r.prototype.show=function(e,t){var n,r,o,i,a,u,c;for(t||(t=1),n=e.getContext("2d"),e.width=this.size.x,e.height=this.size.y,o=(r=n.getImageData(0,0,e.width,e.height)).data,i=0,a=0;a<this.size.y;a++)for(u=0;u<this.size.x;u++)c=a*this.size.x+u,i=this.get(u,a)*t,o[4*c+0]=i,o[4*c+1]=i,o[4*c+2]=i,o[4*c+3]=255;r.data=o,n.putImageData(r,0,0)},r.prototype.get=function(e,t){return this.data[(this.from.y+t)*this.originalSize.x+this.from.x+e]},r.prototype.updateData=function(e){this.originalSize=e.size,this.data=e.data},r.prototype.updateFrom=function(e){return this.from=e,this},t.a=r},function(e,t){"undefined"!=typeof window&&(window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}),Math.imul=Math.imul||function(e,t){var n=65535&e,i=65535&t;return n*i+((e>>>16&65535)*i+n*(t>>>16&65535)<<16>>>0)|0},"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!==r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t})},function(e,t,n){"use strict";var r;r=n(56),t.a=r},function(e,t){e.exports={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}}},function(e,t,n){"use strict";var r=n(58),o=(n(9),n(69)),i=n(4),a=n(31),u=n(70),c=n(68),s=n(77),l=n(74),h=n(72),f=n(73),d=n(76),p=n(75),m=n(67),v=n(71),g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y={code_128_reader:o.a,ean_reader:i.a,ean_5_reader:f.a,ean_2_reader:h.a,ean_8_reader:l.a,code_39_reader:a.a,code_39_vin_reader:u.a,codabar_reader:c.a,upc_reader:s.a,upc_e_reader:d.a,i2of5_reader:p.a,"2of5_reader":m.a,code_93_reader:v.a};t.a={create:function(e,t){function n(){e.readers.forEach(function(e){var t,n={},r=[];"object"===(void 0===e?"undefined":g(e))?(t=e.format,n=e.config):"string"==typeof e&&(t=e),n.supplements&&(r=n.supplements.map(function(e){return new y[e]})),h.push(new y[t](n,r))})}function a(e,n,r){function o(t){var r=t*Math.sin(n),o=t*Math.cos(n);e[0].y-=r,e[0].x-=o,e[1].y+=r,e[1].x+=o}for(o(r);r>1&&(!t.inImageWithBorder(e[0],0)||!t.inImageWithBorder(e[1],0));)o(-(r-=Math.ceil(r/2)));return e}function o(e){var n,o=null,i=r.a.getBarcodeLine(t,e[0],e[1]);for(r.a.toBinaryLine(i),n=0;n<h.length&&null===o;n++)o=h[n].decodePattern(i.line);return null===o?null:{codeResult:o,barcodeLine:i}}function c(e){var t,n,r,c;return l.ctx.overlay,c=function(e){return Math.sqrt(Math.pow(Math.abs(e[1].y-e[0].y),2)+Math.pow(Math.abs(e[1].x-e[0].x),2))}(t=function(e){return[{x:(e[1][0]-e[0][0])/2+e[0][0],y:(e[1][1]-e[0][1])/2+e[0][1]},{x:(e[3][0]-e[2][0])/2+e[2][0],y:(e[3][1]-e[2][1])/2+e[2][1]}]}(e)),null===(t=a(t,n=Math.atan2(t[1].y-t[0].y,t[1].x-t[0].x),Math.floor(.1*c)))?null:(null===(r=o(t))&&(r=function(e,t,n){var r,c,i,a=Math.sqrt(Math.pow(e[1][0]-e[0][0],2)+Math.pow(e[1][1]-e[0][1],2)),s=null,l=Math.sin(n),h=Math.cos(n);for(r=1;r<16&&null===s;r++)i={y:(c=a/16*r*(r%2==0?-1:1))*l,x:c*h},t[0].y+=i.x,t[0].x-=i.y,t[1].y+=i.x,t[1].x-=i.y,s=o(t);return s}(e,t,n)),null===r?null:{codeResult:r.codeResult,line:t,angle:n,pattern:r.barcodeLine.line,threshold:r.barcodeLine.threshold})}var l={ctx:{frequency:null,pattern:null,overlay:null},dom:{frequency:null,pattern:null,overlay:null}},h=[];return n(),{decodeFromBoundingBox:function(e){return c(e)},decodeFromBoundingBoxes:function(t){var n,r,o=[],i=e.multiple;for(n=0;n<t.length;n++){var a=t[n];if((r=c(a)||{}).box=a,i)o.push(r);else if(r.codeResult)return r}if(i)return{barcodes:o}},setReaders:function(t){e.readers=t,h.length=0,n()}}}}},function(e,t,n){"use strict";var r=(n(20),{}),o={UP:1,DOWN:-1};r.getBarcodeLine=function(e,t,n){function r(e,t){h=y[t*w+e],b=h<b?h:b,_=h>_?h:_,g.push(h)}var o,i,a,u,c,s,l,h,f=0|t.x,d=0|t.y,p=0|n.x,m=0|n.y,v=Math.abs(m-d)>Math.abs(p-f),g=[],y=e.data,w=e.size.x,b=255,_=0;for(v&&(s=f,f=d,d=s,s=p,p=m,m=s),f>p&&(s=f,f=p,p=s,s=d,d=m,m=s),o=p-f,i=Math.abs(m-d),a=o/2|0,c=d,u=d<m?1:-1,l=f;l<p;l++)v?r(c,l):r(l,c),(a-=i)<0&&(c+=u,a+=o);return{line:g,min:b,max:_}},r.toBinaryLine=function(e){var t,n,r,i,a,u,c=e.min,s=e.max,l=e.line,h=c+(s-c)/2,f=[],d=(s-c)/12,p=-d;for(r=l[0]>h?o.UP:o.DOWN,f.push({pos:0,val:l[0]}),a=0;a<l.length-2;a++)r!==(i=(t=l[a+1]-l[a])+(n=l[a+2]-l[a+1])<p&&l[a+1]<1.5*h?o.DOWN:t+n>d&&l[a+1]>.5*h?o.UP:r)&&(f.push({pos:a,val:l[a]}),r=i);for(f.push({pos:l.length,val:l[l.length-1]}),u=f[0].pos;u<f[1].pos;u++)l[u]=l[u]>h?0:1;for(a=1;a<f.length-1;a++)for(d=f[a+1].val>f[a].val?f[a].val+(f[a+1].val-f[a].val)/3*2|0:f[a+1].val+(f[a].val-f[a+1].val)/3|0,u=f[a].pos;u<f[a+1].pos;u++)l[u]=l[u]>d?0:1;return{line:l,threshold:d}},r.debug={printFrequency:function(e,t){var n,r=t.getContext("2d");for(t.width=e.length,t.height=256,r.beginPath(),r.strokeStyle="blue",n=0;n<e.length;n++)r.moveTo(n,255),r.lineTo(n,255-e[n]);r.stroke(),r.closePath()},printPattern:function(e,t){var n,r=t.getContext("2d");for(t.width=e.length,r.fillColor="black",n=0;n<e.length;n++)1===e[n]&&r.fillRect(n,0,1,100)}},t.a=r},function(e,t,n){"use strict";function r(e,t){return n.i(h.a)(t).then(function(t){return new Promise(function(n){s=t,e.setAttribute("autoplay",!0),e.setAttribute("muted",!0),e.setAttribute("playsinline",!0),e.srcObject=t,e.addEventListener("loadedmetadata",function(){e.play(),n()})})}).then(function(e){return new Promise(function(t,n){var r=10;!function o(){r>0?e.videoWidth>10&&e.videoHeight>10?t():window.setTimeout(o,500):n("Unable to play video stream. Is webcam working?"),r--}()})}.bind(null,e))}function i(e){var t=l()(e,["width","height","facingMode","aspectRatio","deviceId"]);return void 0!==e.minAspectRatio&&e.minAspectRatio>0&&(t.aspectRatio=e.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),void 0!==e.facing&&(t.facingMode=e.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),t}function o(){if(s){var e=s.getVideoTracks();if(e&&e.length)return e[0]}}var s,c=n(162),l=n.n(c),h=n(52);t.a={request:function(e,t){return function(e){var t={audio:!1,video:i(e)};return t.video.deviceId&&t.video.facingMode&&delete t.video.facingMode,Promise.resolve(t)}(t).then(r.bind(null,e))},release:function(){var e=s&&s.getVideoTracks();e&&e.length&&e[0].stop(),s=null},enumerateVideoDevices:function(){return n.i(h.b)().then(function(e){return e.filter(function(e){return"videoinput"===e.kind})})},getActiveStreamLabel:function(){var e=o();return e?e.label:""},getActiveTrack:o}},function(e,t,n){"use strict";function r(e){return new Promise(function(t){var n=new FileReader;n.onload=function(e){return t(e.target.result)},n.readAsArrayBuffer(e)})}function u(e,t,n){if("Exif"!==function(e,t,n){for(var r="",o=t;o<t+n;o++)r+=String.fromCharCode(e.getUint8(o));return r}(e,t,4))return!1;var r=t+6,o=void 0;if(18761===e.getUint16(r))o=!1;else{if(19789!==e.getUint16(r))return!1;o=!0}if(42!==e.getUint16(r+2,!o))return!1;var i=e.getUint32(r+4,!o);return!(i<8)&&function(e,t,n,r,o){for(var i=e.getUint16(n,!o),a={},u=0;u<i;u++){var c=n+12*u+2,l=r[e.getUint16(c,!o)];l&&(a[l]=s(e,c,0,0,o))}return a}(e,0,r+i,n,o)}function s(e,t,n,r,o){var i=e.getUint16(t+2,!o),a=e.getUint32(t+4,!o);switch(i){case 3:if(1===a)return e.getUint16(t+8,!o)}}t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;return/^blob\:/i.test(e)?function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="blob",r.onreadystatechange=function(){r.readyState!==XMLHttpRequest.DONE||200!==r.status&&0!==r.status||t(this.response)},r.onerror=n,r.send()})}(e).then(r).then(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,n=new DataView(e),r=e.byteLength,l=t.reduce(function(e,t){var n=Object.keys(o).filter(function(e){return o[e]===t})[0];return n&&(e[n]=t),e},{}),i=2;if(255!==n.getUint8(0)||216!==n.getUint8(1))return!1;for(;i<r;){if(255!==n.getUint8(i))return!1;if(225===n.getUint8(i+1))return u(n,i+4,l);i+=2+n.getUint16(i+2)}}(e,t)}):Promise.resolve(null)};var o={274:"orientation"},c=Object.keys(o).map(function(e){return o[e]})},function(e,t,n){"use strict";var r=n(19),i=Math.PI/180,a={create:function(e,t){var a,u={},o=e.getConfig(),s=(n.i(r.b)(e.getRealWidth(),e.getRealHeight()),e.getCanvasSize()),c=n.i(r.b)(e.getWidth(),e.getHeight()),l=e.getTopRight(),h=l.x,f=l.y,p=null,d=null;return(a=t||document.createElement("canvas")).width=s.x,a.height=s.y,p=a.getContext("2d"),d=new Uint8Array(c.x*c.y),u.attachData=function(e){d=e},u.getData=function(){return d},u.grab=function(){var t,u=o.halfSample,l=e.getFrame(),m=l,g=0;if(m){if(function(e,t){e.width!==t.x&&(e.width=t.x),e.height!==t.y&&(e.height=t.y)}(a,s),"ImageStream"===o.type&&(m=l.img,l.tags&&l.tags.orientation))switch(l.tags.orientation){case 6:g=90*i;break;case 8:g=-90*i}return 0!==g?(p.translate(s.x/2,s.y/2),p.rotate(g),p.drawImage(m,-s.y/2,-s.x/2,s.y,s.x),p.rotate(-g),p.translate(-s.x/2,-s.y/2)):p.drawImage(m,0,0,s.x,s.y),t=p.getImageData(h,f,c.x,c.y).data,u?n.i(r.c)(t,c,d):n.i(r.d)(t,d,o),!0}return!1},u.getSize=function(){return c},u}};t.a=a},function(e,t,n){"use strict";function r(e,t){e.onload=function(){t.loaded(this)}}var o=n(60),i={load:function(e,t,i,a,u){var c,s,l,h=new Array(a),f=new Array(h.length);if(!1===u)h[0]=e;else for(c=0;c<h.length;c++)l=i+c,h[c]=e+"image-"+("00"+l).slice(-3)+".jpg";for(f.notLoaded=[],f.addImage=function(e){f.notLoaded.push(e)},f.loaded=function(r){for(var i=f.notLoaded,a=0;a<i.length;a++)if(i[a]===r){i.splice(a,1);for(var c=0;c<h.length;c++){var s=h[c].substr(h[c].lastIndexOf("/"));if(-1!==r.src.lastIndexOf(s)){f[c]={img:r};break}}break}0===i.length&&(!1===u?n.i(o.a)(e,["orientation"]).then(function(e){f[0].tags=e,t(f)}).catch(function(e){console.log(e),t(f)}):t(f))},c=0;c<h.length;c++)s=new Image,f.addImage(s),r(s,f),s.src=h[c]}};t.a=i},function(e,t,n){"use strict";var r=n(62),o={createVideoStream:function(e){function t(){var t=e.videoWidth,o=e.videoHeight;n=i.size?t/o>1?i.size:Math.floor(t/o*i.size):t,r=i.size?t/o>1?Math.floor(o/t*i.size):i.size:o,s.x=n,s.y=r}var n,r,o={},i=null,a=["canrecord","ended"],u={},c={x:0,y:0},s={x:0,y:0};return o.getRealWidth=function(){return e.videoWidth},o.getRealHeight=function(){return e.videoHeight},o.getWidth=function(){return n},o.getHeight=function(){return r},o.setWidth=function(e){n=e},o.setHeight=function(e){r=e},o.setInputStream=function(t){i=t,e.src=void 0!==t.src?t.src:""},o.ended=function(){return e.ended},o.getConfig=function(){return i},o.setAttribute=function(t,n){e.setAttribute(t,n)},o.pause=function(){e.pause()},o.play=function(){e.play()},o.setCurrentTime=function(t){"LiveStream"!==i.type&&(e.currentTime=t)},o.addEventListener=function(t,n,r){-1!==a.indexOf(t)?(u[t]||(u[t]=[]),u[t].push(n)):e.addEventListener(t,n,r)},o.clearEventHandlers=function(){a.forEach(function(t){var n=u[t];n&&n.length>0&&n.forEach(function(n){e.removeEventListener(t,n)})})},o.trigger=function(e,n){var r,i=u[e];if("canrecord"===e&&t(),i&&i.length>0)for(r=0;r<i.length;r++)i[r].apply(o,n)},o.setTopRight=function(e){c.x=e.x,c.y=e.y},o.getTopRight=function(){return c},o.setCanvasSize=function(e){s.x=e.x,s.y=e.y},o.getCanvasSize=function(){return s},o.getFrame=function(){return e},o},createLiveStream:function(e){e.setAttribute("autoplay",!0);var t=o.createVideoStream(e);return t.ended=function(){return!1},t},createImageStream:function(){function e(){h=!1,r.a.load(m,function(e){if(f=e,e[0].tags&&e[0].tags.orientation)switch(e[0].tags.orientation){case 6:case 8:u=e[0].img.height,c=e[0].img.width;break;default:u=e[0].img.width,c=e[0].img.height}else u=e[0].img.width,c=e[0].img.height;n=a.size?u/c>1?a.size:Math.floor(u/c*a.size):u,o=a.size?u/c>1?Math.floor(c/u*a.size):a.size:c,_.x=n,_.y=o,h=!0,s=0,setTimeout(function(){t("canrecord",[])},0)},p,d,a.sequence)}function t(e,t){var n,r=y[e];if(r&&r.length>0)for(n=0;n<r.length;n++)r[n].apply(i,t)}var n,o,i={},a=null,u=0,c=0,s=0,l=!0,h=!1,f=null,d=0,p=1,m=null,v=!1,g=["canrecord","ended"],y={},w={x:0,y:0},_={x:0,y:0};return i.trigger=t,i.getWidth=function(){return n},i.getHeight=function(){return o},i.setWidth=function(e){n=e},i.setHeight=function(e){o=e},i.getRealWidth=function(){return u},i.getRealHeight=function(){return c},i.setInputStream=function(t){a=t,!1===t.sequence?(m=t.src,d=1):(m=t.src,d=t.length),e()},i.ended=function(){return v},i.setAttribute=function(){},i.getConfig=function(){return a},i.pause=function(){l=!0},i.play=function(){l=!1},i.setCurrentTime=function(e){s=e},i.addEventListener=function(e,t){-1!==g.indexOf(e)&&(y[e]||(y[e]=[]),y[e].push(t))},i.setTopRight=function(e){w.x=e.x,w.y=e.y},i.getTopRight=function(){return w},i.setCanvasSize=function(e){_.x=e.x,_.y=e.y},i.getCanvasSize=function(){return _},i.getFrame=function(){var e;return h?(l||(e=f[s],s<d-1?s++:setTimeout(function(){v=!0,t("ended",[])},0)),e):null},i}};t.a=o},function(e,t,n){"use strict";(function(e){function r(){var t;h=p.halfSample?new C.a({x:_.size.x/2|0,y:_.size.y/2|0}):_,w=n.i(x.e)(p.patchSize,h.size),O.x=h.size.x/w.x|0,O.y=h.size.y/w.y|0,y=new C.a(h.size,void 0,Uint8Array,!1),d=new C.a(w,void 0,Array,!0),t=new ArrayBuffer(65536),g=new C.a(w,new Uint8Array(t,0,w.x*w.y)),f=new C.a(w,new Uint8Array(t,w.x*w.y*3,w.x*w.y),void 0,!0),S=n.i(D.a)("undefined"!=typeof window?window:"undefined"!=typeof self?self:e,{size:w.x},t),b=new C.a({x:h.size.x/g.size.x|0,y:h.size.y/g.size.y|0},void 0,Array,!0),m=new C.a(b.size,void 0,void 0,!0),v=new C.a(b.size,void 0,Int32Array,!0)}function i(e){var t,n,r,o,i,a,u,c=y.size.x,s=y.size.y,l=-y.size.x,h=-y.size.y;for(t=0,n=0;n<e.length;n++)t+=(o=e[n]).rad;for((t=(180*(t/=e.length)/Math.PI+90)%180-90)<0&&(t+=180),t=(180-t)*Math.PI/180,i=R.copy(R.create(),[Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t)]),n=0;n<e.length;n++)for(o=e[n],r=0;r<4;r++)A.transformMat2(o.box[r],o.box[r],i);for(n=0;n<e.length;n++)for(o=e[n],r=0;r<4;r++)o.box[r][0]<c&&(c=o.box[r][0]),o.box[r][0]>l&&(l=o.box[r][0]),o.box[r][1]<s&&(s=o.box[r][1]),o.box[r][1]>h&&(h=o.box[r][1]);for(a=[[c,s],[l,s],[l,h],[c,h]],u=p.halfSample?2:1,i=R.invert(i,i),r=0;r<4;r++)A.transformMat2(a[r],a[r],i);for(r=0;r<4;r++)A.scale(a[r],a[r],u);return a}function o(e){var t=n.i(x.g)(e,.9),r=n.i(x.h)(t,1,function(e){return e.getPoints().length}),o=[],i=[];if(1===r.length){o=r[0].item.getPoints();for(var a=0;a<o.length;a++)i.push(o[a].point)}return i}function c(e,t){y.subImageAsCopy(g,n.i(x.b)(e,t)),S.skeletonize()}function l(e,t,n,r){var c,i,a,u,l=[],s=[],h=Math.ceil(w.x/3);if(e.length>=2){for(c=0;c<e.length;c++)e[c].m00>h&&l.push(e[c]);if(l.length>=2){for(a=o(l),i=0,c=0;c<a.length;c++)i+=a[c].rad;a.length>1&&a.length>=l.length/4*3&&a.length>e.length/4&&(i/=a.length,u={index:t[1]*O.x+t[0],pos:{x:n,y:r},box:[A.clone([n,r]),A.clone([n+g.size.x,r]),A.clone([n+g.size.x,r+g.size.y]),A.clone([n,r+g.size.y])],moments:a,rad:i,vec:A.clone([Math.cos(i),Math.sin(i)])},s.push(u))}}return s}var p,h,f,g,d,m,v,b,y,w,_,S,C=n(20),x=n(19),T=n(3),E=(n(9),n(65)),I=n(30),D=n(66),A={clone:n(7),dot:n(32),scale:n(81),transformMat2:n(82)},R={copy:n(78),create:n(79),invert:n(80)},k={ctx:{binary:null},dom:{binary:null}},O={x:0,y:0};t.a={init:function(e,t){p=t,_=e,r(),p.useWorker||"undefined"==typeof document||(k.dom.binary=document.createElement("canvas"),k.dom.binary.className="binaryBuffer",k.ctx.binary=k.dom.binary.getContext("2d"),k.dom.binary.width=y.size.x,k.dom.binary.height=y.size.y)},locate:function(){var e,t;if(p.halfSample&&n.i(x.i)(_,h),n.i(x.f)(h,y),y.zeroBorder(),(e=function(){var e,t,n,r,o,a,u=[];for(e=0;e<O.x;e++)for(t=0;t<O.y;t++)c(n=g.size.x*e,r=g.size.y*t),f.zeroBorder(),T.a.init(d.data,0),a=E.a.create(f,d).rasterize(0),o=d.moments(a.count),u=u.concat(l(o,[e,t],n,r));return u}()).length<O.x*O.y*.05)return null;var r=function(e){function t(){var e;for(e=0;e<v.data.length;e++)if(0===v.data[e]&&1===m.data[e])return e;return v.length}function n(e){var t,r,o,u,c,l=e%v.size.x,h=e/v.size.x|0;if(e<v.data.length)for(o=b.data[e],v.data[e]=i,c=0;c<I.a.searchDirections.length;c++)r=h+I.a.searchDirections[c][0],t=l+I.a.searchDirections[c][1],u=r*v.size.x+t,0!==m.data[u]?0===v.data[u]&&Math.abs(A.dot(b.data[u].vec,o.vec))>a&&n(u):v.data[u]=Number.MAX_VALUE}var r,o,i=0,a=.95,u=0;for(T.a.init(m.data,0),T.a.init(v.data,0),T.a.init(b.data,null),r=0;r<e.length;r++)o=e[r],b.data[o.index]=o,m.data[o.index]=1;for(m.zeroBorder();(u=t())<v.data.length;)i++,n(u);return i}(e);return r<1?null:0===(t=function(e){var t,n,r=[];for(t=0;t<e;t++)r.push(0);for(n=v.data.length;n--;)v.data[n]>0&&r[v.data[n]-1]++;return(r=r.map(function(e,t){return{val:e,label:t+1}})).sort(function(e,t){return t.val-e.val}),r.filter(function(e){return e.val>=5})}(r)).length?null:function(e,t){var n,r,o,a,u=[],c=[];for(n=0;n<e.length;n++){for(r=v.data.length,u.length=0;r--;)v.data[r]===e[n].label&&(o=b.data[r],u.push(o));(a=i(u))&&c.push(a)}return c}(t)},checkImageConstraints:function(e,t){var r,o,i,a=e.getWidth(),u=e.getHeight(),c=t.halfSample?.5:1;if(e.getConfig().area&&(i=n.i(x.j)(a,u,e.getConfig().area),e.setTopRight({x:i.sx,y:i.sy}),e.setCanvasSize({x:a,y:u}),a=i.sw,u=i.sh),o={x:Math.floor(a*c),y:Math.floor(u*c)},r=n.i(x.e)(t.patchSize,o),e.setWidth(Math.floor(Math.floor(o.x/r.x)*(1/c)*r.x)),e.setHeight(Math.floor(Math.floor(o.y/r.y)*(1/c)*r.y)),e.getWidth()%r.x==0&&e.getHeight()%r.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width ("+a+" )and height ("+u+") must a multiple of "+r.x)}}}).call(t,n(47))},function(e,t,n){"use strict";var r=n(30),o={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(e,t){var n=e.data,i=t.data,a=e.size.x,u=e.size.y,c=r.a.create(e,t);return{rasterize:function(e){var t,r,s,l,h,f,d,p,m,v,g,y,w=[],_=0;for(y=0;y<400;y++)w[y]=0;for(w[0]=n[0],m=null,f=1;f<u-1;f++)for(l=0,r=w[0],h=1;h<a-1;h++)if(0===i[g=f*a+h])if((t=n[g])!==r){if(0===l)w[s=_+1]=t,r=t,null!==(d=c.contourTracing(f,h,s,t,o.DIR.OUTSIDE_EDGE))&&(_++,l=s,(p=o.createContour2D()).dir=o.CONTOUR_DIR.CW_DIR,p.index=l,p.firstVertex=d,p.nextpeer=m,p.insideContours=null,null!==m&&(m.prevpeer=p),m=p);else if(null!==(d=c.contourTracing(f,h,o.DIR.INSIDE_EDGE,t,l))){for((p=o.createContour2D()).firstVertex=d,p.insideContours=null,p.dir=0===e?o.CONTOUR_DIR.CCW_DIR:o.CONTOUR_DIR.CW_DIR,p.index=e,v=m;null!==v&&v.index!==l;)v=v.nextpeer;null!==v&&(p.nextpeer=v.insideContours,null!==v.insideContours&&(v.insideContours.prevpeer=p),v.insideContours=p)}}else i[g]=l;else i[g]===o.DIR.OUTSIDE_EDGE||i[g]===o.DIR.INSIDE_EDGE?(l=0,r=i[g]===o.DIR.INSIDE_EDGE?n[g]:w[0]):r=w[l=i[g]];for(v=m;null!==v;)v.index=e,v=v.nextpeer;return{cc:m,count:_}},debug:{drawContour:function(e,t){var n,r,i,a=e.getContext("2d"),u=t;for(a.strokeStyle="red",a.fillStyle="red",a.lineWidth=1,n=null!==u?u.insideContours:null;null!==u;){switch(null!==n?(r=n,n=n.nextpeer):(r=u,n=null!==(u=u.nextpeer)?u.insideContours:null),r.dir){case o.CONTOUR_DIR.CW_DIR:a.strokeStyle="red";break;case o.CONTOUR_DIR.CCW_DIR:a.strokeStyle="blue";break;case o.CONTOUR_DIR.UNKNOWN_DIR:a.strokeStyle="green"}i=r.firstVertex,a.beginPath(),a.moveTo(i.x,i.y);do{i=i.next,a.lineTo(i.x,i.y)}while(i!==r.firstVertex);a.stroke()}}}}}};t.a=o},function(e,t,n){"use strict";t.a=function(e,t,n){"use asm";var r=new e.Uint8Array(n),o=t.size|0,c=e.Math.imul;function l(e,t){e=e|0;t=t|0;var n=0,u=0,c=0,l=0,h=0,f=0,d=0,m=0;for(n=1;(n|0)<(o-1|0);n=n+1|0){m=m+o|0;for(u=1;(u|0)<(o-1|0);u=u+1|0){l=m-o|0;h=m+o|0;f=u-1|0;d=u+1|0;c=(r[e+l+f|0]|0)+(r[e+l+d|0]|0)+(r[e+m+u|0]|0)+(r[e+h+f|0]|0)+(r[e+h+d|0]|0)|0;if((c|0)==(5|0)){r[t+m+u|0]=1}else{r[t+m+u|0]=0}}}return}function h(e,t,n){e=e|0;t=t|0;n=n|0;var l=0;l=c(o,o)|0;while((l|0)>0){l=l-1|0;r[n+l|0]=(r[e+l|0]|0)-(r[t+l|0]|0)|0}}function f(e,t,n){e=e|0;t=t|0;n=n|0;var l=0;l=c(o,o)|0;while((l|0)>0){l=l-1|0;r[n+l|0]=r[e+l|0]|0|(r[t+l|0]|0)|0}}function d(e){e=e|0;var t=0,n=0;n=c(o,o)|0;while((n|0)>0){n=n-1|0;t=(t|0)+(r[e+n|0]|0)|0}return t|0}function m(e,t){e=e|0;t=t|0;var n=0;n=c(o,o)|0;while((n|0)>0){n=n-1|0;r[e+n|0]=t}}function v(e,t){e=e|0;t=t|0;var n=0,u=0,c=0,l=0,h=0,f=0,d=0,m=0;for(n=1;(n|0)<(o-1|0);n=n+1|0){m=m+o|0;for(u=1;(u|0)<(o-1|0);u=u+1|0){l=m-o|0;h=m+o|0;f=u-1|0;d=u+1|0;c=(r[e+l+f|0]|0)+(r[e+l+d|0]|0)+(r[e+m+u|0]|0)+(r[e+h+f|0]|0)+(r[e+h+d|0]|0)|0;if((c|0)>(0|0)){r[t+m+u|0]=1}else{r[t+m+u|0]=0}}}return}function y(e,t){e=e|0;t=t|0;var n=0;n=c(o,o)|0;while((n|0)>0){n=n-1|0;r[t+n|0]=r[e+n|0]|0}}function w(e){e=e|0;var t=0,n=0;for(t=0;(t|0)<(o-1|0);t=t+1|0){r[e+t|0]=0;r[e+n|0]=0;n=n+o-1|0;r[e+n|0]=0;n=n+1|0}for(t=0;(t|0)<(o|0);t=t+1|0){r[e+n|0]=0;n=n+1|0}}function _(){var e=0,t=0,n=0,r=0,_=0,S=0;t=c(o,o)|0;n=t+t|0;r=n+t|0;m(r,0);w(e);do{l(e,t);v(t,n);h(e,n,n);f(r,n,r);y(t,e);_=d(e)|0;S=(_|0)==0|0}while(!S)}return{skeletonize:_}}},function(e,t,n){"use strict";function r(e){o.a.call(this,e),this.barSpaceRatio=[1,1]}var o=n(1),u={START_PATTERN:{value:[3,1,3,1,1,1]},STOP_PATTERN:{value:[3,1,1,1,3]},CODE_PATTERN:{value:[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]},SINGLE_CODE_ERROR:{value:.78,writable:!0},AVG_CODE_ERROR:{value:.3,writable:!0},FORMAT:{value:"2of5"}},c=u.START_PATTERN.value.reduce(function(e,t){return e+t},0);r.prototype=Object.create(o.a.prototype,u),r.prototype.constructor=r,r.prototype._findPattern=function(e,t,n,r){var o,i,a,u,c=[],s=this,l=0,h={error:Number.MAX_VALUE,code:-1,start:0,end:0},f=s.AVG_CODE_ERROR;for(n=n||!1,r=r||!1,t||(t=s._nextSet(s._row)),o=0;o<e.length;o++)c[o]=0;for(o=t;o<s._row.length;o++)if(s._row[o]^n)c[l]++;else{if(l===c.length-1){for(u=0,a=0;a<c.length;a++)u+=c[a];if((i=s._matchPattern(c,e))<f)return h.error=i,h.start=o-u,h.end=o,h;if(!r)return null;for(a=0;a<c.length-2;a++)c[a]=c[a+2];c[c.length-2]=0,c[c.length-1]=0,l--}else l++;c[l]=1,n=!n}return null},r.prototype._findStart=function(){for(var e,t,n=this,r=n._nextSet(n._row),o=1;!t;){if(!(t=n._findPattern(n.START_PATTERN,r,!1,!0)))return null;if(o=Math.floor((t.end-t.start)/c),(e=t.start-5*o)>=0&&n._matchRange(e,t.start,0))return t;r=t.end,t=null}},r.prototype._verifyTrailingWhitespace=function(e){var t;return(t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0)?e:null},r.prototype._findEnd=function(){var e,t,n,r=this;return r._row.reverse(),n=r._nextSet(r._row),e=r._findPattern(r.STOP_PATTERN,n,!1,!0),r._row.reverse(),null===e?null:(t=e.start,e.start=r._row.length-e.end,e.end=r._row.length-t,null!==e?r._verifyTrailingWhitespace(e):null)},r.prototype._decodeCode=function(e){var t,n,r,o=this,a=o.AVG_CODE_ERROR,u={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(t=0;t<e.length;t++)e[t];for(r=0;r<o.CODE_PATTERN.length;r++)(n=o._matchPattern(e,o.CODE_PATTERN[r]))<u.error&&(u.code=r,u.error=n);if(u.error<a)return u},r.prototype._decodePayload=function(e,t,n){for(var r,o,a=0,u=e.length,c=[0,0,0,0,0];a<u;){for(r=0;r<5;r++)c[r]=e[a]*this.barSpaceRatio[0],a+=2;if(!(o=this._decodeCode(c)))return null;t.push(o.code+""),n.push(o)}return o},r.prototype._verifyCounterLength=function(e){return e.length%10==0},r.prototype._decode=function(){var e,t,n,r=this,o=[],i=[];return(e=r._findStart())?(i.push(e),(t=r._findEnd())?(n=r._fillCounters(e.end,t.start,!1),r._verifyCounterLength(n)&&r._decodePayload(n,o,i)?o.length<5?null:(i.push(t),{code:o.join(""),start:e.start,end:t.end,startInfo:e,decodedCodes:i}):null):null):null},t.a=r},function(e,t,n){"use strict";function r(){o.a.call(this),this._counters=[]}var o=n(1);r.prototype=Object.create(o.a.prototype,{ALPHABETH_STRING:{value:"0123456789-$:/.+ABCD"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68]},CHARACTER_ENCODINGS:{value:[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14]},START_END:{value:[26,41,11,14]},MIN_ENCODED_CHARS:{value:4},MAX_ACCEPTABLE:{value:2},PADDING:{value:1.5},FORMAT:{value:"codabar",writeable:!1}}),r.prototype.constructor=r,r.prototype._decode=function(){var e,t,n,r,o,i=this,a=[];if(this._counters=i._fillCounters(),!(e=i._findStart()))return null;r=e.startCounter;do{if((n=i._toPattern(r))<0)return null;if((t=i._patternToChar(n))<0)return null;if(a.push(t),r+=8,a.length>1&&i._isStartEnd(n))break}while(r<i._counters.length);return a.length-2<i.MIN_ENCODED_CHARS||!i._isStartEnd(n)?null:i._verifyWhitespace(e.startCounter,r-8)&&i._validateResult(a,e.startCounter)?(r=r>i._counters.length?i._counters.length:r,o=e.start+i._sumCounters(e.startCounter,r-8),{code:a.join(""),start:e.start,end:o,startInfo:e,decodedCodes:a}):null},r.prototype._verifyWhitespace=function(e,t){return(e-1<=0||this._counters[e-1]>=this._calculatePatternLength(e)/2)&&(t+8>=this._counters.length||this._counters[t+7]>=this._calculatePatternLength(t)/2)},r.prototype._calculatePatternLength=function(e){var t,n=0;for(t=e;t<e+7;t++)n+=this._counters[t];return n},r.prototype._thresholdResultPattern=function(e,t){var n,r,o,i,a,u=this,c={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},s=t;for(o=0;o<e.length;o++){for(a=u._charToPattern(e[o]),i=6;i>=0;i--)n=2==(1&i)?c.bar:c.space,(r=1==(1&a)?n.wide:n.narrow).size+=u._counters[s+i],r.counts++,a>>=1;s+=8}return["space","bar"].forEach(function(e){var t=c[e];t.wide.min=Math.floor((t.narrow.size/t.narrow.counts+t.wide.size/t.wide.counts)/2),t.narrow.max=Math.ceil(t.wide.min),t.wide.max=Math.ceil((t.wide.size*u.MAX_ACCEPTABLE+u.PADDING)/t.wide.counts)}),c},r.prototype._charToPattern=function(e){var t,n=this,r=e.charCodeAt(0);for(t=0;t<n.ALPHABET.length;t++)if(n.ALPHABET[t]===r)return n.CHARACTER_ENCODINGS[t];return 0},r.prototype._validateResult=function(e,t){var n,r,o,i,a,u,c=this,s=c._thresholdResultPattern(e,t),l=t;for(n=0;n<e.length;n++){for(u=c._charToPattern(e[n]),r=6;r>=0;r--){if(o=0==(1&r)?s.bar:s.space,i=1==(1&u)?o.wide:o.narrow,(a=c._counters[l+r])<i.min||a>i.max)return!1;u>>=1}l+=8}return!0},r.prototype._patternToChar=function(e){var t,n=this;for(t=0;t<n.CHARACTER_ENCODINGS.length;t++)if(n.CHARACTER_ENCODINGS[t]===e)return String.fromCharCode(n.ALPHABET[t]);return-1},r.prototype._computeAlternatingThreshold=function(e,t){var n,r,o=Number.MAX_VALUE,i=0;for(n=e;n<t;n+=2)(r=this._counters[n])>i&&(i=r),r<o&&(o=r);return(o+i)/2|0},r.prototype._toPattern=function(e){var t,n,r,o,a=e+7,u=64,c=0;if(a>this._counters.length)return-1;for(t=this._computeAlternatingThreshold(e,a),n=this._computeAlternatingThreshold(e+1,a),r=0;r<7;r++)o=0==(1&r)?t:n,this._counters[e+r]>o&&(c|=u),u>>=1;return c},r.prototype._isStartEnd=function(e){var t;for(t=0;t<this.START_END.length;t++)if(this.START_END[t]===e)return!0;return!1},r.prototype._sumCounters=function(e,t){var n,r=0;for(n=e;n<t;n++)r+=this._counters[n];return r},r.prototype._findStart=function(){var e,t,n=this,r=n._nextUnset(n._row);for(e=1;e<this._counters.length;e++)if(-1!==(t=n._toPattern(e))&&n._isStartEnd(t))return{start:r+=n._sumCounters(0,e),end:r+n._sumCounters(e,e+8),startCounter:e,endCounter:e+8}},t.a=r},function(e,t,n){"use strict";function r(){i.a.call(this)}function o(e,t,n){for(var r=n.length,o=0,i=0;r--;)i+=e[n[r]],o+=t[n[r]];return i/o}var i=n(1);r.prototype=Object.create(i.a.prototype,{CODE_SHIFT:{value:98},CODE_C:{value:99},CODE_B:{value:100},CODE_A:{value:101},START_CODE_A:{value:103},START_CODE_B:{value:104},START_CODE_C:{value:105},STOP_CODE:{value:106},CODE_PATTERN:{value:[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]},SINGLE_CODE_ERROR:{value:.64},AVG_CODE_ERROR:{value:.3},FORMAT:{value:"code_128",writeable:!1},MODULE_INDICES:{value:{bar:[0,2,4],space:[1,3,5]}}}),r.prototype.constructor=r,r.prototype._decodeCode=function(e,t){var n,r,i,a=[0,0,0,0,0,0],u=this,c=e,s=!u._row[c],l=0,h={error:Number.MAX_VALUE,code:-1,start:e,end:e,correction:{bar:1,space:1}};for(n=c;n<u._row.length;n++)if(u._row[n]^s)a[l]++;else{if(l===a.length-1){for(t&&u._correct(a,t),r=0;r<u.CODE_PATTERN.length;r++)(i=u._matchPattern(a,u.CODE_PATTERN[r]))<h.error&&(h.code=r,h.error=i);return h.end=n,-1===h.code||h.error>u.AVG_CODE_ERROR?null:(u.CODE_PATTERN[h.code]&&(h.correction.bar=o(u.CODE_PATTERN[h.code],a,this.MODULE_INDICES.bar),h.correction.space=o(u.CODE_PATTERN[h.code],a,this.MODULE_INDICES.space)),h)}a[++l]=1,s=!s}return null},r.prototype._correct=function(e,t){this._correctBars(e,t.bar,this.MODULE_INDICES.bar),this._correctBars(e,t.space,this.MODULE_INDICES.space)},r.prototype._findStart=function(){var e,t,n,r,i,a=[0,0,0,0,0,0],u=this,c=u._nextSet(u._row),s=!1,l=0,h={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}};for(e=c;e<u._row.length;e++)if(u._row[e]^s)a[l]++;else{if(l===a.length-1){for(i=0,r=0;r<a.length;r++)i+=a[r];for(t=u.START_CODE_A;t<=u.START_CODE_C;t++)(n=u._matchPattern(a,u.CODE_PATTERN[t]))<h.error&&(h.code=t,h.error=n);if(h.error<u.AVG_CODE_ERROR)return h.start=e-i,h.end=e,h.correction.bar=o(u.CODE_PATTERN[h.code],a,this.MODULE_INDICES.bar),h.correction.space=o(u.CODE_PATTERN[h.code],a,this.MODULE_INDICES.space),h;for(r=0;r<4;r++)a[r]=a[r+2];a[4]=0,a[5]=0,l--}else l++;a[l]=1,s=!s}return null},r.prototype._decode=function(){var e,t,n=this,r=n._findStart(),o=null,i=!1,a=[],u=0,c=0,s=[],l=[],h=!1,f=!0;if(null===r)return null;switch(o={code:r.code,start:r.start,end:r.end,correction:{bar:r.correction.bar,space:r.correction.space}},l.push(o),c=o.code,o.code){case n.START_CODE_A:e=n.CODE_A;break;case n.START_CODE_B:e=n.CODE_B;break;case n.START_CODE_C:e=n.CODE_C;break;default:return null}for(;!i;){if(t=h,h=!1,null!==(o=n._decodeCode(o.end,o.correction)))switch(o.code!==n.STOP_CODE&&(f=!0),o.code!==n.STOP_CODE&&(s.push(o.code),u++,c+=u*o.code),l.push(o),e){case n.CODE_A:if(o.code<64)a.push(String.fromCharCode(32+o.code));else if(o.code<96)a.push(String.fromCharCode(o.code-64));else switch(o.code!==n.STOP_CODE&&(f=!1),o.code){case n.CODE_SHIFT:h=!0,e=n.CODE_B;break;case n.CODE_B:e=n.CODE_B;break;case n.CODE_C:e=n.CODE_C;break;case n.STOP_CODE:i=!0}break;case n.CODE_B:if(o.code<96)a.push(String.fromCharCode(32+o.code));else switch(o.code!==n.STOP_CODE&&(f=!1),o.code){case n.CODE_SHIFT:h=!0,e=n.CODE_A;break;case n.CODE_A:e=n.CODE_A;break;case n.CODE_C:e=n.CODE_C;break;case n.STOP_CODE:i=!0}break;case n.CODE_C:if(o.code<100)a.push(o.code<10?"0"+o.code:o.code);else switch(o.code!==n.STOP_CODE&&(f=!1),o.code){case n.CODE_A:e=n.CODE_A;break;case n.CODE_B:e=n.CODE_B;break;case n.STOP_CODE:i=!0}}else i=!0;t&&(e=e===n.CODE_A?n.CODE_B:n.CODE_A)}return null===o?null:(o.end=n._nextUnset(n._row,o.end),n._verifyTrailingWhitespace(o)?(c-=u*s[s.length-1])%103!==s[s.length-1]?null:a.length?(f&&a.splice(a.length-1,1),{code:a.join(""),start:r.start,end:o.end,codeset:e,startInfo:r,decodedCodes:l,endInfo:o}):null:null)},i.a.prototype._verifyTrailingWhitespace=function(e){var t;return(t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0)?e:null},t.a=r},function(e,t,n){"use strict";function r(){o.a.call(this)}var o=n(31),c=/[IOQ]/g,l=/[A-Z0-9]{17}/;r.prototype=Object.create(o.a.prototype),r.prototype.constructor=r,r.prototype._decode=function(){var e=o.a.prototype._decode.apply(this);if(!e)return null;var t=e.code;return t&&(t=t.replace(c,"")).match(l)&&this._checkChecksum(t)?(e.code=t,e):null},r.prototype._checkChecksum=function(e){return!!e},t.a=r},function(e,t,n){"use strict";function r(){o.a.call(this)}var o=n(1),i=n(3),a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",u={ALPHABETH_STRING:{value:a},ALPHABET:{value:a.split("").map(function(e){return e.charCodeAt(0)})},CHARACTER_ENCODINGS:{value:[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]},ASTERISK:{value:350},FORMAT:{value:"code_93",writeable:!1}};r.prototype=Object.create(o.a.prototype,u),r.prototype.constructor=r,r.prototype._decode=function(){var e,t,n,r,o=this,a=[0,0,0,0,0,0],u=[],c=o._findStart();if(!c)return null;r=o._nextSet(o._row,c.end);do{if(a=o._toCounters(r,a),(n=o._toPattern(a))<0)return null;if((e=o._patternToChar(n))<0)return null;u.push(e),t=r,r+=i.a.sum(a),r=o._nextSet(o._row,r)}while("*"!==e);return u.pop(),u.length&&o._verifyEnd(t,r,a)&&o._verifyChecksums(u)?(u=u.slice(0,u.length-2),null===(u=o._decodeExtended(u))?null:{code:u.join(""),start:c.start,end:r,startInfo:c,decodedCodes:u}):null},r.prototype._verifyEnd=function(e,t){return!(e===t||!this._row[t])},r.prototype._patternToChar=function(e){var t,n=this;for(t=0;t<n.CHARACTER_ENCODINGS.length;t++)if(n.CHARACTER_ENCODINGS[t]===e)return String.fromCharCode(n.ALPHABET[t]);return-1},r.prototype._toPattern=function(e){for(var t=e.length,n=0,r=0,o=0;o<t;o++)r+=e[o];for(var i=0;i<t;i++){var a=Math.round(9*e[i]/r);if(a<1||a>4)return-1;if(0==(1&i))for(var u=0;u<a;u++)n=n<<1|1;else n<<=a}return n},r.prototype._findStart=function(){var e,t,n,r=this,o=r._nextSet(r._row),i=o,a=[0,0,0,0,0,0],u=0,c=!1;for(e=o;e<r._row.length;e++)if(r._row[e]^c)a[u]++;else{if(u===a.length-1){if(r._toPattern(a)===r.ASTERISK&&(n=Math.floor(Math.max(0,i-(e-i)/4)),r._matchRange(n,i,0)))return{start:i,end:e};for(i+=a[0]+a[1],t=0;t<4;t++)a[t]=a[t+2];a[4]=0,a[5]=0,u--}else u++;a[u]=1,c=!c}return null},r.prototype._decodeExtended=function(e){for(var t=e.length,n=[],r=0;r<t;r++){var o=e[r];if(o>="a"&&o<="d"){if(r>t-2)return null;var i=e[++r],a=i.charCodeAt(0),u=void 0;switch(o){case"a":if(!(i>="A"&&i<="Z"))return null;u=String.fromCharCode(a-64);break;case"b":if(i>="A"&&i<="E")u=String.fromCharCode(a-38);else if(i>="F"&&i<="J")u=String.fromCharCode(a-11);else if(i>="K"&&i<="O")u=String.fromCharCode(a+16);else if(i>="P"&&i<="S")u=String.fromCharCode(a+43);else{if(!(i>="T"&&i<="Z"))return null;u=String.fromCharCode(127)}break;case"c":if(i>="A"&&i<="O")u=String.fromCharCode(a-32);else{if("Z"!==i)return null;u=":"}break;case"d":if(!(i>="A"&&i<="Z"))return null;u=String.fromCharCode(a+32)}n.push(u)}else n.push(o)}return n},r.prototype._verifyChecksums=function(e){return this._matchCheckChar(e,e.length-2,20)&&this._matchCheckChar(e,e.length-1,15)},r.prototype._matchCheckChar=function(e,t,n){var r=this,o=e.slice(0,t),i=o.length,a=o.reduce(function(e,t,o){return e+((-1*o+(i-1))%n+1)*r.ALPHABET.indexOf(t.charCodeAt(0))},0);return this.ALPHABET[a%47]===e[t].charCodeAt(0)},t.a=r},function(e,t,n){"use strict";function r(){o.a.call(this)}var o=n(4);r.prototype=Object.create(o.a.prototype,{FORMAT:{value:"ean_2",writeable:!1}}),r.prototype.constructor=r,r.prototype.decode=function(e,t){this._row=e;var n,r=0,o=0,i=t,a=this._row.length,u=[],c=[];for(o=0;o<2&&i<a;o++){if(!(n=this._decodeCode(i)))return null;c.push(n),u.push(n.code%10),n.code>=this.CODE_G_START&&(r|=1<<1-o),1!=o&&(i=this._nextSet(this._row,n.end),i=this._nextUnset(this._row,i))}return 2!=u.length||parseInt(u.join(""))%4!==r?null:{code:u.join(""),decodedCodes:c,end:n.end}},t.a=r},function(e,t,n){"use strict";function r(){a.a.call(this)}function o(e){var t;for(t=0;t<10;t++)if(e===c[t])return t;return null}var a=n(4),c=[24,20,18,17,12,6,3,10,9,5];r.prototype=Object.create(a.a.prototype,{FORMAT:{value:"ean_5",writeable:!1}}),r.prototype.constructor=r,r.prototype.decode=function(e,t){this._row=e;var n,r=0,a=0,u=t,c=this._row.length,s=[],l=[];for(a=0;a<5&&u<c;a++){if(!(n=this._decodeCode(u)))return null;l.push(n),s.push(n.code%10),n.code>=this.CODE_G_START&&(r|=1<<4-a),4!=a&&(u=this._nextSet(this._row,n.end),u=this._nextUnset(this._row,u))}return 5!=s.length?null:function(e){var t,n=e.length,r=0;for(t=n-2;t>=0;t-=2)r+=e[t];for(r*=3,t=n-1;t>=0;t-=2)r+=e[t];return(r*=3)%10}(s)!==o(r)?null:{code:s.join(""),decodedCodes:l,end:n.end}},t.a=r},function(e,t,n){"use strict";function r(e,t){o.a.call(this,e,t)}var o=n(4);r.prototype=Object.create(o.a.prototype,{FORMAT:{value:"ean_8",writeable:!1}}),r.prototype.constructor=r,r.prototype._decodePayload=function(e,t,n){var r,o=this;for(r=0;r<4;r++){if(!(e=o._decodeCode(e.end,o.CODE_G_START)))return null;t.push(e.code),n.push(e)}if(null===(e=o._findPattern(o.MIDDLE_PATTERN,e.end,!0,!1)))return null;for(n.push(e),r=0;r<4;r++){if(!(e=o._decodeCode(e.end,o.CODE_G_START)))return null;n.push(e),t.push(e.code)}return e},t.a=r},function(e,t,n){"use strict";function r(e){e=a()(function(){var e={};return Object.keys(r.CONFIG_KEYS).forEach(function(t){e[t]=r.CONFIG_KEYS[t].default}),e}(),e),u.a.call(this,e),this.barSpaceRatio=[1,1],e.normalizeBarSpaceWidth&&(this.SINGLE_CODE_ERROR=.38,this.AVG_CODE_ERROR=.09)}var i=n(28),a=n.n(i),u=n(1),o={START_PATTERN:{value:[1,1,1,1]},STOP_PATTERN:{value:[1,1,3]},CODE_PATTERN:{value:[[1,1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]},SINGLE_CODE_ERROR:{value:.78,writable:!0},AVG_CODE_ERROR:{value:.38,writable:!0},MAX_CORRECTION_FACTOR:{value:5},FORMAT:{value:"i2of5"}};r.prototype=Object.create(u.a.prototype,o),r.prototype.constructor=r,r.prototype._matchPattern=function(e,t){if(this.config.normalizeBarSpaceWidth){var n,r=[0,0],o=[0,0],i=[0,0],a=this.MAX_CORRECTION_FACTOR,c=1/a;for(n=0;n<e.length;n++)r[n%2]+=e[n],o[n%2]+=t[n];for(i[0]=o[0]/r[0],i[1]=o[1]/r[1],i[0]=Math.max(Math.min(i[0],a),c),i[1]=Math.max(Math.min(i[1],a),c),this.barSpaceRatio=i,n=0;n<e.length;n++)e[n]*=this.barSpaceRatio[n%2]}return u.a.prototype._matchPattern.call(this,e,t)},r.prototype._findPattern=function(e,t,n,r){var o,i,a,u,c=[],s=this,l=0,h={error:Number.MAX_VALUE,code:-1,start:0,end:0},f=s.AVG_CODE_ERROR;for(n=n||!1,r=r||!1,t||(t=s._nextSet(s._row)),o=0;o<e.length;o++)c[o]=0;for(o=t;o<s._row.length;o++)if(s._row[o]^n)c[l]++;else{if(l===c.length-1){for(u=0,a=0;a<c.length;a++)u+=c[a];if((i=s._matchPattern(c,e))<f)return h.error=i,h.start=o-u,h.end=o,h;if(!r)return null;for(a=0;a<c.length-2;a++)c[a]=c[a+2];c[c.length-2]=0,c[c.length-1]=0,l--}else l++;c[l]=1,n=!n}return null},r.prototype._findStart=function(){for(var e,t,n=this,r=n._nextSet(n._row),o=1;!t;){if(!(t=n._findPattern(n.START_PATTERN,r,!1,!0)))return null;if(o=Math.floor((t.end-t.start)/4),(e=t.start-10*o)>=0&&n._matchRange(e,t.start,0))return t;r=t.end,t=null}},r.prototype._verifyTrailingWhitespace=function(e){var t;return(t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0)?e:null},r.prototype._findEnd=function(){var e,t,n=this;return n._row.reverse(),e=n._findPattern(n.STOP_PATTERN),n._row.reverse(),null===e?null:(t=e.start,e.start=n._row.length-e.end,e.end=n._row.length-t,null!==e?n._verifyTrailingWhitespace(e):null)},r.prototype._decodePair=function(e){var t,n,r=[];for(t=0;t<e.length;t++){if(!(n=this._decodeCode(e[t])))return null;r.push(n)}return r},r.prototype._decodeCode=function(e){var t,n,r,o=this,a=o.AVG_CODE_ERROR,u={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(t=0;t<e.length;t++)e[t];for(r=0;r<o.CODE_PATTERN.length;r++)(n=o._matchPattern(e,o.CODE_PATTERN[r]))<u.error&&(u.code=r,u.error=n);if(u.error<a)return u},r.prototype._decodePayload=function(e,t,n){for(var r,o,a=0,u=e.length,c=[[0,0,0,0,0],[0,0,0,0,0]];a<u;){for(r=0;r<5;r++)c[0][r]=e[a]*this.barSpaceRatio[0],c[1][r]=e[a+1]*this.barSpaceRatio[1],a+=2;if(!(o=this._decodePair(c)))return null;for(r=0;r<o.length;r++)t.push(o[r].code+""),n.push(o[r])}return o},r.prototype._verifyCounterLength=function(e){return e.length%10==0},r.prototype._decode=function(){var e,t,n,r=this,o=[],i=[];return(e=r._findStart())?(i.push(e),(t=r._findEnd())?(n=r._fillCounters(e.end,t.start,!1),r._verifyCounterLength(n)&&r._decodePayload(n,o,i)?o.length%2!=0||o.length<6?null:(i.push(t),{code:o.join(""),start:e.start,end:t.end,startInfo:e,decodedCodes:i}):null):null):null},r.CONFIG_KEYS={normalizeBarSpaceWidth:{type:"boolean",default:!1,description:"If true, the reader tries to normalize thewidth-difference between bars and spaces"}},t.a=r},function(e,t,n){"use strict";function r(e,t){o.a.call(this,e,t)}var o=n(4);r.prototype=Object.create(o.a.prototype,{CODE_FREQUENCY:{value:[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]},STOP_PATTERN:{value:[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]},FORMAT:{value:"upc_e",writeable:!1}}),r.prototype.constructor=r,r.prototype._decodePayload=function(e,t,n){var r,o=this,i=0;for(r=0;r<6;r++){if(!(e=o._decodeCode(e.end)))return null;e.code>=o.CODE_G_START&&(e.code=e.code-o.CODE_G_START,i|=1<<5-r),t.push(e.code),n.push(e)}return o._determineParity(i,t)?e:null},r.prototype._determineParity=function(e,t){var n,r;for(r=0;r<this.CODE_FREQUENCY.length;r++)for(n=0;n<this.CODE_FREQUENCY[r].length;n++)if(e===this.CODE_FREQUENCY[r][n])return t.unshift(r),t.push(n),!0;return!1},r.prototype._convertToUPCA=function(e){var t=[e[0]],n=e[e.length-2];return(t=n<=2?t.concat(e.slice(1,3)).concat([n,0,0,0,0]).concat(e.slice(3,6)):3===n?t.concat(e.slice(1,4)).concat([0,0,0,0,0]).concat(e.slice(4,6)):4===n?t.concat(e.slice(1,5)).concat([0,0,0,0,0,e[5]]):t.concat(e.slice(1,6)).concat([0,0,0,0,n])).push(e[e.length-1]),t},r.prototype._checksum=function(e){return o.a.prototype._checksum.call(this,this._convertToUPCA(e))},r.prototype._findEnd=function(e,t){return o.a.prototype._findEnd.call(this,e,!0)},r.prototype._verifyTrailingWhitespace=function(e){var t;if((t=e.end+(e.end-e.start)/2)<this._row.length&&this._matchRange(e.end,t,0))return e},t.a=r},function(e,t,n){"use strict";function r(e,t){o.a.call(this,e,t)}var o=n(4);r.prototype=Object.create(o.a.prototype,{FORMAT:{value:"upc_a",writeable:!1}}),r.prototype.constructor=r,r.prototype._decode=function(){var e=o.a.prototype._decode.call(this);return e&&e.code&&13===e.code.length&&"0"===e.code.charAt(0)?(e.code=e.code.substring(1),e):null},t.a=r},function(e,t){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},function(e,t){e.exports=function(){var e=new Float32Array(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}},function(e,t){e.exports=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*i-o*r;return a?(a=1/a,e[0]=i*a,e[1]=-r*a,e[2]=-o*a,e[3]=n*a,e):null}},function(e,t){e.exports=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}},function(e,t){e.exports=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o,e[1]=n[1]*r+n[3]*o,e}},function(e,t){e.exports=function(e){var t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(122),i=n(123),a=n(124),u=n(125),c=n(126);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=u,r.prototype.set=c,e.exports=r},function(e,t,n){function r(e){var t=this.__data__=new o(e);this.size=t.size}var o=n(10),i=n(149),a=n(150),u=n(151),c=n(152),s=n(153);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=u,r.prototype.has=c,r.prototype.set=s,e.exports=r},function(e,t,n){var r=n(5).Uint8Array;e.exports=r},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(107),i=n(18),a=n(2),u=n(44),o=n(15),s=n(45),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),l=!n&&i(e),h=!n&&!l&&u(e),f=!n&&!l&&!h&&s(e),d=n||l||h||f,p=d?r(e.length,String):[],m=p.length;for(var v in e)!t&&!c.call(e,v)||d&&("length"==v||h&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||o(v,m))||p.push(v);return p}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(0),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},function(e,t,n){var r=n(90),i=n(128);e.exports=function e(t,n,o,a,u){var c=-1,s=t.length;for(o||(o=i),u||(u=[]);++c<s;){var l=t[c];n>0&&o(l)?n>1?e(l,n-1,o,a,u):r(u,l):a||(u[u.length]=l)}return u}},function(e,t,n){var r=n(117)();e.exports=r},function(e,t,n){var r=n(13),i=n(23);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(8),i=n(6),a="[object Arguments]";e.exports=function(e){return i(e)&&r(e)==a}},function(e,t,n){var r=n(25),i=n(132),a=n(0),u=n(155),s=/^\[object .+?Constructor\]$/,o=Function.prototype,c=Object.prototype,l=o.toString,h=c.hasOwnProperty,p=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?p:s).test(u(e))}},function(e,t,n){var r=n(8),i=n(26),a=n(6),u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u["[object Arguments]"]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u["[object Function]"]=u["[object Map]"]=u["[object Number]"]=u["[object Object]"]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!u[r(e)]}},function(e,t,n){var r=n(0),i=n(40),a=n(144),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=i(e),n=[];for(var c in e)("constructor"!=c||!t&&o.call(e,c))&&n.push(c);return n}},function(e,t,n){var r=n(85),i=n(35),a=n(93),u=n(101),o=n(0),s=n(46);e.exports=function e(t,n,c,l,h){t!==n&&a(n,function(a,s){if(o(a))h||(h=new r),u(t,n,s,c,e,l,h);else{var f=l?l(t[s],a,s+"",t,n,h):void 0;void 0===f&&(f=a),i(t,s,f)}},s)}},function(e,t,n){var r=n(35),i=n(111),a=n(112),u=n(113),o=n(127),s=n(18),c=n(2),l=n(159),h=n(44),f=n(25),p=n(0),d=n(160),m=n(45),g=n(164);e.exports=function(e,t,n,v,y,w,_){var b=e[n],S=t[n],C=_.get(S);if(C)r(e,n,C);else{var x=w?w(b,S,n+"",e,t,_):void 0,T=void 0===x;if(T){var E=c(S),I=!E&&h(S),D=!E&&!I&&m(S);x=S,E||I||D?c(b)?x=b:l(b)?x=u(b):I?(T=!1,x=i(S,!0)):D?(T=!1,x=a(S,!0)):x=[]:d(S)||s(S)?(x=b,s(b)?x=g(b):(!p(b)||v&&f(b))&&(x=o(S))):T=!1}T&&(_.set(S,x),y(x,S,v,w,_),_.delete(S)),r(e,n,x)}}},function(e,t,n){var r=n(103),i=n(158);e.exports=function(e,t){return r(e,t,function(t,n){return i(e,n)})}},function(e,t,n){var r=n(94),i=n(105),a=n(13);e.exports=function(e,t,n){for(var o=-1,u=t.length,c={};++o<u;){var s=t[o],l=r(e,s);n(l,s)&&i(c,a(s,e),l)}return c}},function(e,t,n){var r=n(43),i=n(41),a=n(42);e.exports=function(e,t){return a(i(e,t,r),e+"")}},function(e,t,n){var r=n(36),i=n(13),a=n(15),u=n(0),o=n(23);e.exports=function(e,t,n,c){if(!u(e))return e;for(var s=-1,l=(t=i(t,e)).length,h=l-1,f=e;null!=f&&++s<l;){var d=o(t[s]),p=n;if(s!=h){var m=f[d];void 0===(p=c?c(m,d,f):void 0)&&(p=u(m)?m:a(t[s+1])?[]:{})}r(f,d,p),f=f[d]}return e}},function(e,t,n){var r=n(156),o=n(37),i=n(43),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=a},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(11),i=n(89),a=n(2),u=n(27),o=1/0,s=r?r.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(u(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-o?"-0":n}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){var r=n(86);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){(function(e){var r=n(5),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===i?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(t,n(29)(e))},function(e,t,n){var r=n(110);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(36),i=n(21);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var u=-1,c=t.length;++u<c;){var s=t[u],l=o?o(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),a?i(n,s,l):r(n,s,l)}return n}},function(e,t,n){var r=n(5)["__core-js_shared__"];e.exports=r},function(e,t,n){var r=n(104),i=n(129);e.exports=function(e){return r(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,u=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,u&&i(n[0],n[1],u)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var c=n[r];c&&e(t,c,r,a)}return t})}},function(e,t){e.exports=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),u=a.length;u--;){var c=a[e?u:++o];if(!1===n(i[c],c,i))break}return t}}},function(e,t,n){var r=n(157),i=n(41),a=n(42);e.exports=function(e){return a(i(e,void 0,r),e+"")}},function(e,t,n){var r=n(11),i=Object.prototype,a=i.hasOwnProperty,u=i.toString,o=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch(e){}var c=u.call(e);return r&&(t?e[o]=n:delete e[o]),c}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(13),i=n(18),a=n(2),u=n(15),o=n(26),s=n(23);e.exports=function(e,t,n){for(var c=-1,l=(t=r(t,e)).length,h=!1;++c<l;){var f=s(t[c]);if(!(h=null!=e&&n(e,f)))break;e=e[f]}return h||++c!=l?h:!!(l=null==e?0:e.length)&&o(l)&&u(f,l)&&(a(e)||i(e))}},function(e,t,n){var r=n(16);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(16),i="__lodash_hash_undefined__",u=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===i?void 0:n}return u.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(16),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},function(e,t,n){var r=n(16),i="__lodash_hash_undefined__";e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?i:t,this}},function(e,t,n){var r=n(91),i=n(39),a=n(40);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(i(e))}},function(e,t,n){var r=n(11),i=n(18),a=n(2),u=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(u&&e&&e[u])}},function(e,t,n){var r=n(17),i=n(24),a=n(15),u=n(0);e.exports=function(e,t,n){if(!u(n))return!1;var o=typeof t;return!!("number"==o?i(n)&&a(t,n.length):"string"==o&&t in n)&&r(n[t],e)}},function(e,t,n){var r=n(2),i=n(27),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,u=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||u.test(e)||!a.test(e)||null!=t&&e in Object(t)}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(115),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(12),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():a.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(12);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(12);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(12);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},function(e,t,n){var r=n(84),i=n(10),a=n(33);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},function(e,t,n){var r=n(14);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t,n){var r=n(14);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(14);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(14);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},function(e,t,n){var r=n(161),i=500;e.exports=function(e){var t=r(e,function(e){return n.size===i&&n.clear(),e}),n=t.cache;return t}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){(function(e){var r=n(38),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,u=i&&i.exports===o&&r.process,c=function(){try{return u&&u.binding&&u.binding("util")}catch(e){}}();e.exports=c}).call(t,n(29)(e))},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t){var n=800,r=16,i=Date.now;e.exports=function(e){var t=0,o=0;return function(){var a=i(),u=r-(a-o);if(o=a,u>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(10);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(10),i=n(33),a=n(34),u=200;e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<u-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(143),o=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,u=r(function(e){var t=[];return o.test(e)&&t.push(""),e.replace(i,function(e,n,r,o){t.push(r?o.replace(a,"$1"):n||e)}),t});e.exports=u},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(92);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},function(e,t,n){var r=n(95),i=n(121);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t,n){var r=n(24),i=n(6);e.exports=function(e){return i(e)&&r(e)}},function(e,t,n){var r=n(8),i=n(39),a=n(6),u="[object Object]",o=Function.prototype,s=Object.prototype,c=o.toString,l=s.hasOwnProperty,h=c.call(Object);e.exports=function(e){if(!a(e)||r(e)!=u)return!1;var t=i(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==h}},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(r.Cache||o),n}var o=n(34),i="Expected a function";r.Cache=o,e.exports=r},function(e,t,n){var r=n(102),i=n(118)(function(e,t){return null==e?{}:r(e,t)});e.exports=i},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(114),i=n(46);e.exports=function(e){return r(e,i(e))}},function(e,t,n){var r=n(108);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){e.exports=n(48)}])},e.exports=r(r.toString()).default},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(1),o=n(106),c=(n(74),n(64)),l=n(0),h=l.a.extend().extend({name:"bootable",props:{lazy:Boolean},data:function(){return{isBooted:!1}},computed:{hasContent:function(){return this.isBooted||!this.lazy||this.isActive}},watch:{isActive:function(){this.isBooted=!0}},methods:{showLazyContent:function(content){return this.hasContent?content:void 0}}}),f=n(52),d=n(49);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?"width":"height";return{beforeEnter:function(e){e._parent=e.parentNode,e._initialStyle=m({transition:e.style.transition,visibility:e.style.visibility,overflow:e.style.overflow},n,e.style[n])},enter:function(t){var o=t._initialStyle;t.style.setProperty("transition","none","important"),t.style.visibility="hidden";var c=t["offset"+Object(r.m)(n)]+"px";t.style.visibility=o.visibility,t.style.overflow="hidden",t.style[n]=0,t.offsetHeight,t.style.transition=o.transition,e&&t._parent&&t._parent.classList.add(e),requestAnimationFrame(function(){t.style[n]=c})},afterEnter:c,enterCancelled:c,leave:function(e){e._initialStyle=m({overflow:e.style.overflow},n,e.style[n]),e.style.overflow="hidden",e.style[n]=e["offset"+Object(r.m)(n)]+"px",e.offsetHeight,requestAnimationFrame(function(){return e.style[n]=0})},afterLeave:o,leaveCancelled:o};function o(t){e&&t._parent&&t._parent.classList.remove(e),c(t)}function c(e){e.style.overflow=e._initialStyle.overflow,e.style[n]=e._initialStyle[n],delete e._initialStyle}},y=(Object(r.e)("bottom-sheet-transition"),Object(r.e)("carousel-transition"),Object(r.e)("carousel-reverse-transition"),Object(r.e)("tab-transition"),Object(r.e)("tab-reverse-transition"),Object(r.e)("menu-transition"),Object(r.e)("fab-transition","center center","out-in"),Object(r.e)("dialog-transition"),Object(r.e)("dialog-bottom-transition"),Object(r.e)("fade-transition"),Object(r.e)("scale-transition"),Object(r.e)("scroll-x-transition"),Object(r.e)("scroll-x-reverse-transition"),Object(r.e)("scroll-y-transition"),Object(r.e)("scroll-y-reverse-transition"),Object(r.e)("slide-x-transition"),Object(r.e)("slide-x-reverse-transition"),Object(r.e)("slide-y-transition"),Object(r.e)("slide-y-reverse-transition"),Object(r.c)("expand-transition",v())),w=(Object(r.c)("expand-x-transition",v("",!0)),Object(r.c)("row-expand-transition",v("datatable__expand-col--expanded")),n(3)),_=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};var S=Object(w.a)(h,Object(d.a)("list","v-list-group","v-list"),f.a).extend({name:"v-list-group",inject:["listClick"],props:{activeClass:{type:String,default:"primary--text"},appendIcon:{type:String,default:"$vuetify.icons.expand"},disabled:Boolean,group:String,noAction:Boolean,prependIcon:String,subGroup:Boolean},data:function(){return{groups:[]}},computed:{groupClasses:function(){return{"v-list__group--active":this.isActive,"v-list__group--disabled":this.disabled}},headerClasses:function(){return{"v-list__group__header--active":this.isActive,"v-list__group__header--sub-group":this.subGroup}},itemsClasses:function(){return{"v-list__group__items--no-action":this.noAction}}},watch:{isActive:function(e){!this.subGroup&&e&&this.listClick(this._uid)},$route:function(e){var t=this.matchRoute(e.path);this.group&&(t&&this.isActive!==t&&this.listClick(this._uid),this.isActive=t)}},mounted:function(){this.list.register(this),this.group&&this.$route&&null==this.value&&(this.isActive=this.matchRoute(this.$route.path))},beforeDestroy:function(){this.list.unregister(this._uid)},methods:{click:function(e){this.disabled||(this.$emit("click",e),this.isActive=!this.isActive)},genIcon:function(e){return this.$createElement(c.a,e)},genAppendIcon:function(){var e=!this.subGroup&&this.appendIcon;return e||this.$slots.appendIcon?this.$createElement("div",{staticClass:"v-list__group__header__append-icon"},[this.$slots.appendIcon||this.genIcon(e)]):null},genGroup:function(){return this.$createElement("div",{staticClass:"v-list__group__header",class:this.headerClasses,on:_({},this.$listeners,{click:this.click}),ref:"item"},[this.genPrependIcon(),this.$slots.activator,this.genAppendIcon()])},genItems:function(){return this.$createElement("div",{staticClass:"v-list__group__items",class:this.itemsClasses,directives:[{name:"show",value:this.isActive}],ref:"group"},this.showLazyContent(this.$slots.default))},genPrependIcon:function(){var e,t,n,r=this.prependIcon?this.prependIcon:!!this.subGroup&&"$vuetify.icons.subgroup";return r||this.$slots.prependIcon?this.$createElement("div",{staticClass:"v-list__group__header__prepend-icon",class:(e={},t=this.activeClass,n=this.isActive,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)},[this.$slots.prependIcon||this.genIcon(r)]):null},toggle:function(e){this.isActive=this._uid===e},matchRoute:function(e){return!!this.group&&null!==e.match(this.group)}},render:function(e){return e("div",{staticClass:"v-list__group",class:this.groupClasses},[this.genGroup(),e(y,[this.genItems()])])}}),C=n(107),x=n(108),T=(n(26),n(224),n(15)),E=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},I=Object(w.a)(T.a).extend({name:"v-avatar",functional:!0,props:{color:String,size:{type:[Number,String],default:48},tile:Boolean},render:function(e,t){var data=t.data,n=t.props,o=t.children;data.staticClass=("v-avatar "+(data.staticClass||"")).trim(),n.tile&&(data.staticClass+=" v-avatar--tile");var c=Object(r.b)(n.size);return data.style=E({height:c,width:c},data.style),e("div",T.a.options.methods.setBackgroundColor(n.color,data),o)}}),D=l.a.extend({name:"v-list-tile-avatar",functional:!0,props:{color:String,size:{type:[Number,String],default:40},tile:Boolean},render:function(e,t){var data=t.data,n=t.children,r=t.props;data.staticClass=("v-list__tile__avatar "+(data.staticClass||"")).trim();var o=e(I,{props:{color:r.color,size:r.size,tile:r.tile}},[n]);return e("div",data,[o])}});n.d(t,"a",function(){return R}),n.d(t,"b",function(){return k});var A=Object(r.d)("v-list__tile__action-text","span"),R=Object(r.d)("v-list__tile__content","div"),k=Object(r.d)("v-list__tile__title","div"),O=Object(r.d)("v-list__tile__sub-title","div");o.a,C.a,x.a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.freeze({base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"}),o=Object.freeze({base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"}),c=Object.freeze({base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"}),l=Object.freeze({base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"}),h=Object.freeze({base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"}),f=Object.freeze({base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"}),d=Object.freeze({base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"}),m=Object.freeze({base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"}),v=Object.freeze({base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"}),y=Object.freeze({base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"}),w=Object.freeze({base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"}),_=Object.freeze({base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"}),S=Object.freeze({base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"}),C=Object.freeze({base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"}),x=Object.freeze({base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"}),T=Object.freeze({base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"}),E=Object.freeze({base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"}),I=Object.freeze({base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"}),D=Object.freeze({base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"}),A=Object.freeze({black:"#000000",white:"#ffffff",transparent:"transparent"});t.default=Object.freeze({red:r,pink:o,purple:c,deepPurple:l,indigo:h,blue:f,lightBlue:d,cyan:m,teal:v,green:y,lightGreen:w,lime:_,yellow:S,amber:C,orange:x,deepOrange:T,brown:E,blueGrey:I,grey:D,shades:A})},,,,,,function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return f});var r=n(0),o=n(13);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(){return Object(o.b)("The "+e+" component must be used inside a "+t)}}function h(e,t,n){var o=t&&n?{register:l(t,n),unregister:l(t,n)}:null;return r.a.extend({name:"registrable-inject",inject:c({},e,{default:o})})}function f(e){return r.a.extend({name:"registrable-provide",methods:{register:null,unregister:null},provide:function(){return c({},e,{register:this.register,unregister:this.unregister})}})}},function(e,t,n){"use strict";var r=n(0);t.a=r.a.extend({name:"ssr-bootable",data:function(){return{isBooted:!1}},mounted:function(){var e=this;window.requestAnimationFrame(function(){e.$el.setAttribute("data-booted","true"),e.isBooted=!0})}})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(87),o=n(3);function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(o.a)(Object(r.b)(["absolute","fixed"])).extend({name:"applicationable",props:{app:Boolean},computed:{applicationProperty:function(){return e}},watch:{app:function(e,t){t?this.removeApplication(!0):this.callUpdate()},applicationProperty:function(e,t){this.$vuetify.application.unbind(this._uid,t)}},activated:function(){this.callUpdate()},created:function(){for(var i=0,e=t.length;i<e;i++)this.$watch(t[i],this.callUpdate);this.callUpdate()},mounted:function(){this.callUpdate()},deactivated:function(){this.removeApplication()},destroyed:function(){this.removeApplication()},methods:{callUpdate:function(){this.app&&this.$vuetify.application.bind(this._uid,this.applicationProperty,this.updateApplication())},removeApplication:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(e||this.app)&&this.$vuetify.application.unbind(this._uid,this.applicationProperty)},updateApplication:function(){return 0}}})}},function(e,t,n){"use strict";n.d(t,"b",function(){return c});var r=n(0);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"input";return r.a.extend({name:"toggleable",model:{prop:t,event:n},props:o({},t,{required:!1}),data:function(){return{isActive:!!this[t]}},watch:(e={},o(e,t,function(e){this.isActive=!!e}),o(e,"isActive",function(e){!!e!==this[t]&&this.$emit(n,e)}),e)})}var l=c();t.a=l},function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(line){return line.trim()})},r.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(line){return 0===line.indexOf(t)})},r.parseCandidate=function(line){for(var e,t={foundation:(e=0===line.indexOf("a=candidate:")?line.substring(12).split(" "):line.substring(10).split(" "))[0],component:parseInt(e[1],10),protocol:e[2].toLowerCase(),priority:parseInt(e[3],10),ip:e[4],address:e[4],port:parseInt(e[5],10),type:e[7]},i=8;i<e.length;i+=2)switch(e[i]){case"raddr":t.relatedAddress=e[i+1];break;case"rport":t.relatedPort=parseInt(e[i+1],10);break;case"tcptype":t.tcpType=e[i+1];break;case"ufrag":t.ufrag=e[i+1],t.usernameFragment=e[i+1];break;default:t[e[i]]=e[i+1]}return t},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(line){return line.substr(14).split(" ")},r.parseRtpMap=function(line){var e=line.substr(9).split(" "),t={payloadType:parseInt(e.shift(),10)};return e=e[0].split("/"),t.name=e[0],t.clockRate=parseInt(e[1],10),t.channels=3===e.length?parseInt(e[2],10):1,t.numChannels=t.channels,t},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(line){var e=line.substr(9).split(" ");return{id:parseInt(e[0],10),direction:e[0].indexOf("/")>0?e[0].split("/")[1]:"sendrecv",uri:e[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(line){for(var e,t={},n=line.substr(line.indexOf(" ")+1).split(";"),r=0;r<n.length;r++)t[(e=n[r].trim().split("="))[0].trim()]=e[1];return t},r.writeFmtp=function(e){var line="",t=e.payloadType;if(void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach(function(param){e.parameters[param]?n.push(param+"="+e.parameters[param]):n.push(param)}),line+="a=fmtp:"+t+" "+n.join(";")+"\r\n"}return line},r.parseRtcpFb=function(line){var e=line.substr(line.indexOf(" ")+1).split(" ");return{type:e.shift(),parameter:e.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(line){var e=line.indexOf(" "),t={ssrc:parseInt(line.substr(7,e-7),10)},n=line.indexOf(":",e);return n>-1?(t.attribute=line.substr(e+1,n-e-1),t.value=line.substr(n+1)):t.attribute=line.substr(e+1),t},r.parseSsrcGroup=function(line){var e=line.substr(13).split(" ");return{semantics:e.shift(),ssrcs:e.map(function(e){return parseInt(e,10)})}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(line){var e=line.substr(14).split(" ");return{algorithm:e[0].toLowerCase(),value:e[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},r.getIceParameters=function(e,t){var n=r.splitLines(e);return{usernameFragment:(n=n.concat(r.splitLines(t))).filter(function(line){return 0===line.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(line){return 0===line.indexOf("a=ice-pwd:")})[0].substr(10)}},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],c=r.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(c){var l=r.parseRtpMap(c),h=r.matchPrefix(e,"a=fmtp:"+o+" ");switch(l.parameters=h.length?r.parseFmtp(h[0]):{},l.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),t.codecs.push(l),l.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(l.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(line){t.headerExtensions.push(r.parseExtmap(line))}),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)});var o=0;return t.codecs.forEach(function(e){e.maxptime>o&&(o=e.maxptime)}),o>0&&(n+="a=maxptime:"+o+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=r.writeExtmap(e)}),n},r.parseRtpEncodingParameters=function(e){var t,n=[],o=r.parseRtpParameters(e),c=-1!==o.fecMechanisms.indexOf("RED"),l=-1!==o.fecMechanisms.indexOf("ULPFEC"),h=r.matchPrefix(e,"a=ssrc:").map(function(line){return r.parseSsrcMedia(line)}).filter(function(e){return"cname"===e.attribute}),f=h.length>0&&h[0].ssrc,d=r.matchPrefix(e,"a=ssrc-group:FID").map(function(line){return line.substr(17).split(" ").map(function(e){return parseInt(e,10)})});d.length>0&&d[0].length>1&&d[0][0]===f&&(t=d[0][1]),o.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:f,codecPayloadType:parseInt(e.parameters.apt,10)};f&&t&&(r.rtx={ssrc:t}),n.push(r),c&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:f,mechanism:l?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&f&&n.push({ssrc:f});var m=r.matchPrefix(e,"b=");return m.length&&(m=0===m[0].indexOf("b=TIAS:")?parseInt(m[0].substr(7),10):0===m[0].indexOf("b=AS:")?1e3*parseInt(m[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(e){e.maxBitrate=m})),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map(function(line){return r.parseSsrcMedia(line)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var o=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=o.length>0,t.compound=0===o.length;var c=r.matchPrefix(e,"a=rtcp-mux");return t.mux=c.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var o=r.matchPrefix(e,"a=ssrc:").map(function(line){return r.parseSsrcMedia(line)}).filter(function(e){return"msid"===e.attribute});return o.length>0?{stream:(t=o[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t,n=r.parseMLine(e),o=r.matchPrefix(e,"a=max-message-size:");o.length>0&&(t=parseInt(o[0].substr(19),10)),isNaN(t)&&(t=65536);var c=r.matchPrefix(e,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substr(12),10),protocol:n.fmt,maxMessageSize:t};if(r.matchPrefix(e,"a=sctpmap:").length>0){var l=r.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:t}}},r.writeSctpDescription=function(e,t){var output=[];return output="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&output.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),output.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var o=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,o){var c=r.writeRtpDescription(e.kind,t);if(c+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),c+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),c+="a=mid:"+e.mid+"\r\n",e.direction?c+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?c+="a=sendrecv\r\n":e.rtpSender?c+="a=sendonly\r\n":e.rtpReceiver?c+="a=recvonly\r\n":c+="a=inactive\r\n",e.rtpSender){var l="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";c+="a="+l,c+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+l,e.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+l,c+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return c+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),c},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),i=0;i<t.length;i++)if(t[i].length<2||"="!==t[i].charAt(1))return!1;return!0},e.exports=r},function(e,t,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var n=t.parent,r=t.slots,o=t.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",function(){n.$forceUpdate()}),o.placeholderTag&&(o.placeholder||h)?e(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||h):l.length>0?l.map(function(){return e(!1)}):e(!1))}};e.exports=r},,,,,,,,,,function(e,t,n){"use strict";var r=n(109);t.a=r.a},function(e,t,n){"use strict";function r(e,i){return function(e){if(Array.isArray(e))return e}(e)||function(e,i){var t=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(t.push(c.value),!i||t.length!==i);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",function(){return r})},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(26),n(23),n(66),n(67),n(14);var r=n(13);function o(e,t){e.style.transform=t,e.style.webkitTransform=t}function c(e,t){e.style.opacity=t.toString()}function l(e){return"TouchEvent"===e.constructor.name}var h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.getBoundingClientRect(),o=l(e)?e.touches[e.touches.length-1]:e,c=o.clientX-r.left,h=o.clientY-r.top,f=0,d=.3;t._ripple&&t._ripple.circle?(d=.15,f=t.clientWidth/2,f=n.center?f:f+Math.sqrt(Math.pow(c-f,2)+Math.pow(h-f,2))/4):f=Math.sqrt(Math.pow(t.clientWidth,2)+Math.pow(t.clientHeight,2))/2;var m=(t.clientWidth-2*f)/2+"px",v=(t.clientHeight-2*f)/2+"px",y=n.center?m:c-f+"px",w=n.center?v:h-f+"px";return{radius:f,scale:d,x:y,y:w,centerX:m,centerY:v}},f={show:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t._ripple&&t._ripple.enabled){var r=document.createElement("span"),l=document.createElement("span");r.appendChild(l),r.className="v-ripple__container",n.class&&(r.className+=" "+n.class);var f=h(e,t,n),d=f.radius,m=f.scale,v=f.x,y=f.y,w=f.centerX,_=f.centerY,S=2*d+"px";l.className="v-ripple__animation",l.style.width=S,l.style.height=S,t.appendChild(r);var C=window.getComputedStyle(t);C&&"static"===C.position&&(t.style.position="relative",t.dataset.previousPosition="static"),l.classList.add("v-ripple__animation--enter"),l.classList.add("v-ripple__animation--visible"),o(l,"translate("+v+", "+y+") scale3d("+m+","+m+","+m+")"),c(l,0),l.dataset.activated=String(performance.now()),setTimeout(function(){l.classList.remove("v-ripple__animation--enter"),l.classList.add("v-ripple__animation--in"),o(l,"translate("+w+", "+_+") scale3d(1,1,1)"),c(l,.25)},0)}},hide:function(e){if(e&&e._ripple&&e._ripple.enabled){var t=e.getElementsByClassName("v-ripple__animation");if(0!==t.length){var n=t[t.length-1];if(!n.dataset.isHiding){n.dataset.isHiding="true";var r=performance.now()-Number(n.dataset.activated),o=Math.max(250-r,0);setTimeout(function(){n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),c(n,0),setTimeout(function(){1===e.getElementsByClassName("v-ripple__animation").length&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),n.parentNode&&e.removeChild(n.parentNode)},300)},o)}}}}};function d(e){return void 0===e||!!e}function m(e){var t={},element=e.currentTarget;element&&element._ripple&&!element._ripple.touched&&(l(e)&&(element._ripple.touched=!0),t.center=element._ripple.centered,element._ripple.class&&(t.class=element._ripple.class),f.show(e,element,t))}function v(e){var element=e.currentTarget;element&&(window.setTimeout(function(){element._ripple&&(element._ripple.touched=!1)}),f.hide(element))}function y(e,t,n){var r=d(t.value);r||f.hide(e),e._ripple=e._ripple||{},e._ripple.enabled=r;var o=t.value||{};o.center&&(e._ripple.centered=!0),o.class&&(e._ripple.class=t.value.class),o.circle&&(e._ripple.circle=o.circle),r&&!n?(e.addEventListener("touchstart",m,{passive:!0}),e.addEventListener("touchend",v,{passive:!0}),e.addEventListener("touchcancel",v),e.addEventListener("mousedown",m),e.addEventListener("mouseup",v),e.addEventListener("mouseleave",v),e.addEventListener("dragstart",v,{passive:!0})):!r&&n&&w(e)}function w(e){e.removeEventListener("mousedown",m),e.removeEventListener("touchstart",v),e.removeEventListener("touchend",v),e.removeEventListener("touchcancel",v),e.removeEventListener("mouseup",v),e.removeEventListener("mouseleave",v),e.removeEventListener("dragstart",v)}t.a={bind:function(e,t,n){y(e,t,!1),n.context&&n.context.$nextTick(function(){var t=window.getComputedStyle(e);if(t&&"inline"===t.display){var o=n.fnOptions?[n.fnOptions,n.context]:[n.componentInstance];r.b.apply(void 0,["v-ripple can only be used on block-level elements"].concat(o))}})},unbind:function(e){delete e._ripple,w(e)},update:function(e,t){t.value!==t.oldValue&&y(e,t,d(t.oldValue))}}},function(e,t,n){var content=n(259);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("1bfbaa0f",content,!0,{sourceMap:!1})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";t.a={inserted:function(e,t){var n=t.value,r=t.options||{passive:!0};window.addEventListener("resize",n,r),e._onResize={callback:n,options:r},t.modifiers&&t.modifiers.quiet||n()},unbind:function(e){if(e._onResize){var t=e._onResize,n=t.callback,r=t.options;window.removeEventListener("resize",n,r),delete e._onResize}}}},function(e,t,n){"use strict";n.d(t,"b",function(){return l});var r=n(0),o=n(1),c={absolute:Boolean,bottom:Boolean,fixed:Boolean,left:Boolean,right:Boolean,top:Boolean};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.a.extend({name:"positionable",props:e.length?Object(o.g)(c,e):c})}t.a=l()},function(e,t,n){"use strict";n(34);var r=n(0),o=n(83),c=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a=r.a.extend({name:"routable",directives:{Ripple:o.a},props:{activeClass:String,append:Boolean,disabled:Boolean,exact:{type:Boolean,default:void 0},exactActiveClass:String,href:[String,Object],to:[String,Object],nuxt:Boolean,replace:Boolean,ripple:[Boolean,Object],tag:String,target:String},computed:{computedRipple:function(){return!(!this.ripple||this.disabled)&&this.ripple}},methods:{click:function(e){this.$emit("click",e)},generateRouteLink:function(e){var t,n,r,o=this.exact,l=void 0,data=(t={attrs:{disabled:this.disabled},class:e,props:{},directives:[{name:"ripple",value:this.computedRipple}]},n=this.to?"nativeOn":"on",r=c({},this.$listeners,{click:this.click}),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t);if(void 0===this.exact&&(o="/"===this.to||this.to===Object(this.to)&&"/"===this.to.path),this.to){var h=this.activeClass,f=this.exactActiveClass||h;this.proxyClass&&(h+=" "+this.proxyClass,f+=" "+this.proxyClass),l=this.nuxt?"nuxt-link":"router-link",Object.assign(data.props,{to:this.to,exact:o,activeClass:h,exactActiveClass:f,append:this.append,replace:this.replace})}else"a"===(l=(this.href?"a":this.tag)||"a")&&this.href&&(data.attrs.href=this.href);return this.target&&(data.attrs.target=this.target),{tag:l,data:data}}}})},function(e,t,n){"use strict";var r,o=(r=n(150))&&"object"==typeof r&&"default"in r?r.default:r;e.exports=o},,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return o}),n.d(t,"__assign",function(){return c}),n.d(t,"__rest",function(){return l}),n.d(t,"__decorate",function(){return h}),n.d(t,"__param",function(){return f}),n.d(t,"__metadata",function(){return d}),n.d(t,"__awaiter",function(){return m}),n.d(t,"__generator",function(){return v}),n.d(t,"__exportStar",function(){return y}),n.d(t,"__values",function(){return w}),n.d(t,"__read",function(){return _}),n.d(t,"__spread",function(){return S}),n.d(t,"__spreadArrays",function(){return C}),n.d(t,"__await",function(){return x}),n.d(t,"__asyncGenerator",function(){return T}),n.d(t,"__asyncDelegator",function(){return E}),n.d(t,"__asyncValues",function(){return I}),n.d(t,"__makeTemplateObject",function(){return D}),n.d(t,"__importStar",function(){return A}),n.d(t,"__importDefault",function(){return R});var r=function(e,b){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,b){e.__proto__=b}||function(e,b){for(var p in b)b.hasOwnProperty(p)&&(e[p]=b[p])})(e,b)};function o(e,b){function t(){this.constructor=e}r(e,b),e.prototype=null===b?Object.create(b):(t.prototype=b.prototype,new t)}var c=function(){return(c=Object.assign||function(e){for(var s,i=1,t=arguments.length;i<t;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(e[p]=s[p]);return e}).apply(this,arguments)};function l(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function h(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c}function f(e,t){return function(n,r){t(n,r,e)}}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function m(e,t,n,r){return new(n||(n=Promise))(function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function h(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(l,h)}f((r=r.apply(e,t||[])).next())})}function v(e,body){var t,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(e,o)}catch(e){c=[6,e],n=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}function y(e,t){for(var p in e)t.hasOwnProperty(p)||(t[p]=e[p])}function w(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function _(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function S(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(_(arguments[i]));return e}function C(){for(var s=0,i=0,e=arguments.length;i<e;i++)s+=arguments[i].length;var t=Array(s),n=0;for(i=0;i<e;i++)for(var a=arguments[i],r=0,o=a.length;r<o;r++,n++)t[n]=a[r];return t}function x(e){return this instanceof x?(this.v=e,this):new x(e)}function T(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=n.apply(e,t||[]),q=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(e){g[e]&&(i[e]=function(t){return new Promise(function(a,b){q.push([e,t,a,b])>1||o(e,t)})})}function o(e,t){try{(n=g[e](t)).value instanceof x?Promise.resolve(n.value.v).then(c,l):h(q[0][2],n)}catch(e){h(q[0][3],e)}var n}function c(e){o("next",e)}function l(e){o("throw",e)}function h(e,t){e(t),q.shift(),q.length&&o(q[0][0],q[0][1])}}function E(e){var i,p;return i={},t("next"),t("throw",function(e){throw e}),t("return"),i[Symbol.iterator]=function(){return this},i;function t(t,n){i[t]=e[t]?function(r){return(p=!p)?{value:x(e[t](r)),done:"return"===t}:n?n(r):r}:n}}function I(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,t=e[Symbol.asyncIterator];return t?t.call(e):(e=w(e),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(t){i[t]=e[t]&&function(n){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(n=e[t](n)).done,n.value)})}}}function D(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function R(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";n(27),n(22),n(21),n(162),n(222);var r=n(12),o=n(49),c=n(3),l=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a=Object(c.a)(Object(o.b)("list"),r.a).extend({name:"v-list",provide:function(){return{listClick:this.listClick}},props:{dense:Boolean,expand:Boolean,subheader:Boolean,threeLine:Boolean,twoLine:Boolean},data:function(){return{groups:[]}},computed:{classes:function(){return l({"v-list--dense":this.dense,"v-list--subheader":this.subheader,"v-list--two-line":this.twoLine,"v-list--three-line":this.threeLine},this.themeClasses)}},methods:{register:function(content){this.groups.push(content)},unregister:function(content){var e=this.groups.findIndex(function(g){return g._uid===content._uid});e>-1&&this.groups.splice(e,1)},listClick:function(e){if(!this.expand){var t=!0,n=!1,r=void 0;try{for(var o,c=this.groups[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){o.value.toggle(e)}}catch(e){n=!0,r=e}finally{try{!t&&c.return&&c.return()}finally{if(n)throw r}}}}},render:function(e){return e("div",{staticClass:"v-list",class:this.classes,attrs:{role:"list"}},[this.$slots.default])}})},function(e,t,n){"use strict";var r=n(15),o=n(88),c=n(52),l=n(12),h=n(83),f=n(3),d=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a=Object(f.a)(r.a,o.a,c.a,l.a).extend({name:"v-list-tile",directives:{Ripple:h.a},inheritAttrs:!1,props:{activeClass:{type:String,default:"primary--text"},avatar:Boolean,inactive:Boolean,tag:String},data:function(){return{proxyClass:"v-list__tile--active"}},computed:{listClasses:function(){return this.disabled?{"v-list--disabled":!0}:void 0},classes:function(){return d({"v-list__tile":!0,"v-list__tile--link":this.isLink&&!this.inactive,"v-list__tile--avatar":this.avatar,"v-list__tile--disabled":this.disabled,"v-list__tile--active":!this.to&&this.isActive},this.themeClasses,(e={},t=this.activeClass,n=this.isActive,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e));var e,t,n},isLink:function(){var e=this.$listeners&&(this.$listeners.click||this.$listeners["!click"]);return Boolean(this.href||this.to||e)}},render:function(e){var t=!this.inactive&&this.isLink?this.generateRouteLink(this.classes):{tag:this.tag||"div",data:{class:this.classes}},n=t.tag,data=t.data;return data.attrs=Object.assign({},data.attrs,this.$attrs),e("div",this.setTextColor(!this.disabled&&this.isActive&&this.color,{class:this.listClasses,attrs:{disabled:this.disabled,role:"listitem"}}),[e(n,data,this.$slots.default)])}})},function(e,t,n){"use strict";var r=n(0);t.a=r.a.extend({name:"v-list-tile-action",functional:!0,render:function(e,t){var data=t.data,n=t.children,r=void 0===n?[]:n;return data.staticClass=data.staticClass?"v-list__tile__action "+data.staticClass:"v-list__tile__action",r.filter(function(e){return!1===e.isComment&&" "!==e.text}).length>1&&(data.staticClass+=" v-list__tile__action--stack"),e("div",data,r)}})},function(e,t,n){"use strict";n(217),n(46),n(47),n(141),n(220);var r,o=n(15),c=(n(26),n(0)),l=c.a.extend({name:"sizeable",props:{large:Boolean,medium:Boolean,size:{type:[Number,String]},small:Boolean,xLarge:Boolean}}),h=n(12),f=n(1),d=n(3),m=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};!function(e){e.small="16px",e.default="24px",e.medium="28px",e.large="36px",e.xLarge="40px"}(r||(r={}));var v=Object(d.a)(o.a,l,h.a).extend({name:"v-icon",props:{disabled:Boolean,left:Boolean,right:Boolean},methods:{getIcon:function(){var e="";return this.$slots.default&&(e=this.$slots.default[0].text.trim()),Object(f.l)(this,e)},getSize:function(){var e={small:this.small,medium:this.medium,large:this.large,xLarge:this.xLarge},t=Object(f.k)(e).find(function(t){return e[t]});return t&&r[t]||Object(f.b)(this.size)},getDefaultData:function(){return{staticClass:"v-icon",class:{"v-icon--disabled":this.disabled,"v-icon--left":this.left,"v-icon--link":this.$listeners.click||this.$listeners["!click"],"v-icon--right":this.right},attrs:m({"aria-hidden":!0},this.$attrs),on:this.$listeners}},applyColors:function(data){data.class=m({},data.class,this.themeClasses),this.setTextColor(this.color,data)},renderFontIcon:function(e,t){var n=[],data=this.getDefaultData(),r="material-icons",o=e.indexOf("-"),c=o<=-1;c?n.push(e):function(e){return["fas","far","fal","fab"].some(function(t){return e.includes(t)})}(r=e.slice(0,o))&&(r=""),data.class[r]=!0,data.class[e]=!c;var l=this.getSize();return l&&(data.style={fontSize:l}),this.applyColors(data),t("i",data,n)},renderSvgIcon:function(e,t){var data=this.getDefaultData();data.class["v-icon--is-component"]=!0;var n=this.getSize();n&&(data.style={fontSize:n,height:n}),this.applyColors(data);var component=e.component;return data.props=e.props,data.nativeOn=data.on,t(component,data)}},render:function(e){var t=this.getIcon();return"string"==typeof t?this.renderFontIcon(t,e):this.renderSvgIcon(t,e)}});t.a=c.a.extend({name:"v-icon",$_wrapperFor:v,functional:!0,render:function(e,t){var data=t.data,n=t.children,r="";return data.domProps&&(r=data.domProps.textContent||data.domProps.innerHTML||r,delete data.domProps.textContent,delete data.domProps.innerHTML),e(v,data,r?[r]:n)}})},,function(e,t,n){"use strict";var r={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(e,t){var n=t.parent,r=t.slots,o=t.props,c=r(),l=c.default;void 0===l&&(l=[]);var h=c.placeholder;return n._isMounted?l:(n.$once("hook:mounted",function(){n.$forceUpdate()}),o.placeholderTag&&(o.placeholder||h)?e(o.placeholderTag,{class:["client-only-placeholder"]},o.placeholder||h):l.length>0?l.map(function(){return e(!1)}):e(!1))}};e.exports=r},,,function(e,t){e.exports=function(component,e){var t="function"==typeof component.exports?component.exports.extendOptions:component.options;for(var i in"function"==typeof component.exports&&(t.components=component.exports.options.components),t.components=t.components||{},e)t.components[i]=t.components[i]||e[i]}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(63),n(21),n(14),n(48);function r(e){return{name:"v-"+e,functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(t,n){var r=n.props,data=n.data,o=n.children;data.staticClass=(e+" "+(data.staticClass||"")).trim();var c=data.attrs;if(c){data.attrs={};var l=Object.keys(c).filter(function(e){if("slot"===e)return!1;var t=c[e];return e.startsWith("data-")?(data.attrs[e]=t,!1):t||"string"==typeof t});l.length&&(data.staticClass+=" "+l.join(" "))}return r.id&&(data.domProps=data.domProps||{},data.domProps.id=r.id),t(r.tag,data,o)}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(105),c=n(151),l=n(152),h=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["duplicate-service"]="Firebase service named '{$appName}' already registered",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),f=new c.ErrorFactory("app","Firebase",h),d="[DEFAULT]",m=[],v=function(){function e(e,t,n){this.firebase_=n,this.isDeleted_=!1,this.services_={},this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=c.deepCopy(e),this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){m.push(e),setTimeout(function(){return e(null)},0)},removeAuthTokenListener:function(e){m=m.filter(function(t){return t!==e})}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){e.firebase_.INTERNAL.removeApp(e.name_);for(var t=[],n=0,r=Object.keys(e.services_);n<r.length;n++)for(var o=r[n],c=0,l=Object.keys(e.services_[o]);c<l.length;c++){var h=l[c];t.push(e.services_[o][h])}return Promise.all(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))}).then(function(){e.isDeleted_=!0,e.services_={}})},e.prototype._getService=function(e,t){if(void 0===t&&(t=d),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==d?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=d),this.services_[e]&&this.services_[e][t]&&delete this.services_[e][t]},e.prototype.extendApp=function(e){var t=this;c.deepExtend(this,e),e.INTERNAL&&e.INTERNAL.addAuthTokenListener&&(m.forEach(function(e){t.INTERNAL.addAuthTokenListener(e)}),m=[])},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw f.create("app-deleted",{appName:this.name_})},e}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var y="6.3.5";var w=new l.Logger("@firebase/app");if(c.isBrowser()&&void 0!==self.firebase){w.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var _=self.firebase.SDK_VERSION;_&&_.indexOf("LITE")>=0&&w.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var S=function e(){var t=function(e){var t={},n={},r={},o={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var l=r;void 0===l.name&&(l.name=d);var h=l.name;if("string"!=typeof h||!h)throw f.create("bad-app-name",{appName:String(h)});if(c.contains(t,h))throw f.create("duplicate-app",{appName:h});var v=new e(n,l,o);return t[h]=v,m(v,"create"),v},app:l,apps:null,SDK_VERSION:y,INTERNAL:{registerService:function(t,d,m,v,y){if(void 0===y&&(y=!1),n[t])throw f.create("duplicate-service",{appName:t});function w(e){if(void 0===e&&(e=l()),"function"!=typeof e[t])throw f.create("invalid-app-argument",{appName:t});return e[t]()}return n[t]=d,v&&(r[t]=v,h().forEach(function(e){v("create",e)})),void 0!==m&&c.deepExtend(w,m),o[t]=w,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this._getService.bind(this,t);return r.apply(this,y?e:[])},w},removeApp:function(e){m(t[e],"delete"),delete t[e]},factories:n,useAsService:v}};function l(e){if(e=e||d,!c.contains(t,e))throw f.create("no-app",{appName:e});return t[e]}function h(){return Object.keys(t).map(function(e){return t[e]})}function m(e,t){for(var o=0,c=Object.keys(n);o<c.length;o++){var l=v(0,c[o]);if(null===l)return;r[l]&&r[l](t,e)}}function v(e,t){return"serverAuth"===t?null:t}return o.default=o,Object.defineProperty(o,"apps",{get:h}),l.App=e,o}(v);return t.INTERNAL=o.__assign({},t.INTERNAL,{createFirebaseNamespace:e,extendNamespace:function(e){c.deepExtend(t,e)},createSubscribe:c.createSubscribe,ErrorFactory:c.ErrorFactory,deepExtend:c.deepExtend}),t}(),C=S.initializeApp;S.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.isNode()&&w.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),C.apply(void 0,e)};var x=S;t.default=x,t.firebase=x},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(105),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},c=function(e,t){if(!e)throw l(t)},l=function(e){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},h=function(e){for(var t=[],p=0,i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t[p++]=n:n<2048?(t[p++]=n>>6|192,t[p++]=63&n|128):55296==(64512&n)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++i)),t[p++]=n>>18|240,t[p++]=n>>12&63|128,t[p++]=n>>6&63|128,t[p++]=63&n|128):(t[p++]=n>>12|224,t[p++]=n>>6&63|128,t[p++]=63&n|128)}return t},f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(input,e){if(!Array.isArray(input))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[],i=0;i<input.length;i+=3){var n=input[i],r=i+1<input.length,o=r?input[i+1]:0,c=i+2<input.length,l=c?input[i+2]:0,h=n>>2,f=(3&n)<<4|o>>4,d=(15&o)<<2|l>>6,m=63&l;c||(m=64,r||(d=64)),output.push(t[h],t[f],t[d],t[m])}return output.join("")},encodeString:function(input,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(input):this.encodeByteArray(h(input),e)},decodeString:function(input,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(input):function(e){for(var t=[],n=0,r=0;n<e.length;){var o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){var c=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&c)}else if(o>239&&o<365){var u=((7&o)<<18|(63&(c=e[n++]))<<12|(63&(l=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(1023&u))}else{c=e[n++];var l=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&c)<<6|63&l)}}return t.join("")}(this.decodeStringToByteArray(input,e))},decodeStringToByteArray:function(input,e){this.init_();for(var t=e?this.charToByteMapWebSafe_:this.charToByteMap_,output=[],i=0;i<input.length;){var n=t[input.charAt(i++)],r=i<input.length?t[input.charAt(i)]:0,o=++i<input.length?t[input.charAt(i)]:64,c=++i<input.length?t[input.charAt(i)]:64;if(++i,null==n||null==r||null==o||null==c)throw Error();var l=n<<2|r>>4;if(output.push(l),64!==o){var h=r<<4&240|o>>2;if(output.push(h),64!==c){var f=o<<6&192|c;output.push(f)}}}return output},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},d=function(e){try{return f.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function m(e,source){if(!(source instanceof Object))return source;switch(source.constructor){case Date:return new Date(source.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return source}for(var t in source)source.hasOwnProperty(t)&&(e[t]=m(e[t],source[t]));return e}var v=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}},e}();function y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var w="FirebaseError",_=function(e){function t(code,n){var r=e.call(this,n)||this;return r.code=code,r.name=w,Object.setPrototypeOf(r,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,S.prototype.create),r}return r.__extends(t,e),t}(Error),S=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(code){for(var data=[],e=1;e<arguments.length;e++)data[e-1]=arguments[e];for(var t=data[0]||{},n=this.service+"/"+code,template=this.errors[code],r=template?C(template,t):"Error",o=this.serviceName+": "+r+" ("+n+").",c=new _(n,o),l=0,h=Object.keys(t);l<h.length;l++){var f=h[l];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=t[f])}return c},e}();function C(template,data){return template.replace(x,function(e,t){var n=data[t];return null!=n?n.toString():"<"+t+"?>"})}var x=/\{\$([^}]+)}/g;function T(e){return JSON.parse(e)}var E=function(e){var header={},t={},data={},n="";try{var r=e.split(".");header=T(d(r[0])||""),t=T(d(r[1])||""),n=r[2],data=t.d||{},delete t.d}catch(e){}return{header:header,claims:t,data:data,signature:n}};var I=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var i=1;i<this.blockSize;++i)this.pad_[i]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var i=0;i<16;i++)n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,c,a=this.chain_[0],b=this.chain_[1],l=this.chain_[2],h=this.chain_[3],f=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=h^b&(l^h),c=1518500249):(o=b^l^h,c=1859775393):i<60?(o=b&l|h&(b|l),c=2400959708):(o=b^l^h,c=3395469782);r=(a<<5|a>>>27)+o+f+c+n[i]&4294967295;f=h,h=l,l=4294967295&(b<<30|b>>>2),b=a,a=r}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+b&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,o=this.buf_,c=this.inbuf_;r<t;){if(0===c)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(o[c]=e.charCodeAt(r),++r,++c===this.blockSize){this.compress_(o),c=0;break}}else for(;r<t;)if(o[c]=e[r],++r,++c===this.blockSize){this.compress_(o),c=0;break}}this.inbuf_=c,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var r=24;r>=0;r-=8)e[n]=this.chain_[i]>>r&255,++n;return e},e}();var D=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}return e.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},e.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,o=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o in e&&"function"==typeof e[o])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=A),void 0===r.error&&(r.error=A),void 0===r.complete&&(r.complete=A);var c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?r.error(o.finalError):r.complete()}catch(e){}}),this.observers.push(r),c},e.prototype.unsubscribeOne=function(i){void 0!==this.observers&&void 0!==this.observers[i]&&(delete this.observers[i],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var i=0;i<this.observers.length;i++)this.sendOne(i,e)},e.prototype.sendOne=function(i,e){var t=this;this.task.then(function(){if(void 0!==t.observers&&void 0!==t.observers[i])try{e(t.observers[i])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},e}();function A(){}function R(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var o=e+" failed: ";return o+=r+" argument "}t.CONSTANTS=o,t.Deferred=v,t.ErrorFactory=S,t.FirebaseError=_,t.Sha1=I,t.assert=c,t.assertionError=l,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then(function(){e.apply(void 0,n)}).catch(function(e){t&&t(e)})}},t.base64=f,t.base64Decode=d,t.base64Encode=function(e){var t=h(e);return f.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new D(e,t);return n.subscribe.bind(n)},t.decode=E,t.deepCopy=function(e){return m(void 0,e)},t.deepExtend=m,t.errorPrefix=R,t.getUA=y,t.isAdmin=function(e){var t=E(e).claims;return"object"==typeof t&&!0===t.admin},t.isBrowser=function(){return"object"==typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}},t.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},t.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(e){var t=E(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=E(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,o=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),o=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!o&&n>=r&&n<=o},t.issuedAtTime=function(e){var t=E(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=T,t.map=function(e,t,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=t.call(n,e[o],o,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach(function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,o=Object.entries(e);r<o.length;r++){var c=o[r];n(c[0],c[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}}),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var p=0,i=0;i<e.length;i++){var t=e.charCodeAt(i);t<128?p++:t<2048?p+=2:t>=55296&&t<=56319?(p+=4,i++):p+=3}return p},t.stringToByteArray=function(e){for(var t=[],p=0,i=0;i<e.length;i++){var n=e.charCodeAt(i);if(n>=55296&&n<=56319){var r=n-55296;c(++i<e.length,"Surrogate pair missing trail surrogate."),n=65536+(r<<10)+(e.charCodeAt(i)-56320)}n<128?t[p++]=n:n<2048?(t[p++]=n>>6|192,t[p++]=63&n|128):n<65536?(t[p++]=n>>12|224,t[p++]=n>>6&63|128,t[p++]=63&n|128):(t[p++]=n>>18|240,t[p++]=n>>12&63|128,t[p++]=n>>6&63|128,t[p++]=63&n|128)}return t},t.stringify=function(data){return JSON.stringify(data)},t.validateArgCount=function(e,t,n,r){var o;if(r<t?o="at least "+t:r>n&&(o=0===n?"none":"no more than "+n),o)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+o+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(R(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(R(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(R(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(36))},function(e,t,n){"use strict";n.r(t),n.d(t,"LogLevel",function(){return r}),n.d(t,"Logger",function(){return h}),n.d(t,"setLogLevel",function(){return f});var r,o=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(r||(r={}));var c=r.INFO,l=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<e.logLevel)){var c=(new Date).toISOString();switch(t){case r.DEBUG:case r.VERBOSE:console.log.apply(console,["["+c+"]  "+e.name+":"].concat(n));break;case r.INFO:console.info.apply(console,["["+c+"]  "+e.name+":"].concat(n));break;case r.WARN:console.warn.apply(console,["["+c+"]  "+e.name+":"].concat(n));break;case r.ERROR:console.error.apply(console,["["+c+"]  "+e.name+":"].concat(n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},h=function(){function e(e){this.name=e,this._logLevel=c,this._logHandler=l,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in r))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.DEBUG].concat(e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.VERBOSE].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.INFO].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.WARN].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,[this,r.ERROR].concat(e))},e}();function f(e){o.forEach(function(t){t.logLevel=e})}},function(e,t,n){"use strict";t.a=function(e,t){return t=t||{},new Promise(function(n,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(JSON.parse(s.responseText))},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var c in s.open(t.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,n){o.push(t=t.toLowerCase()),u.push([t,n]),i[t]=i[t]?i[t]+","+n:n}),n(a())},s.onerror=r,s.withCredentials="include"==t.credentials,t.headers)s.setRequestHeader(c,t.headers[c]);s.send(t.body||null)})}},,function(e,t,n){"use strict";var r=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===o}(e)}(e)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function c(e,t){return!1!==t.clone&&t.isMergeableObject(e)?d((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function l(e,source,t){return e.concat(source).map(function(element){return c(element,t)})}function h(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(symbol){return e.propertyIsEnumerable(symbol)}):[]}(e))}function f(e,source,t){var n={};return t.isMergeableObject(e)&&h(e).forEach(function(r){n[r]=c(e[r],t)}),h(source).forEach(function(r){t.isMergeableObject(source[r])&&e[r]?n[r]=function(e,t){if(!t.customMerge)return d;var n=t.customMerge(e);return"function"==typeof n?n:d}(r,t)(e[r],source[r],t):n[r]=c(source[r],t)}),n}function d(e,source,t){(t=t||{}).arrayMerge=t.arrayMerge||l,t.isMergeableObject=t.isMergeableObject||r;var n=Array.isArray(source);return n===Array.isArray(e)?n?t.arrayMerge(e,source,t):f(e,source,t):c(source,t)}d.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,n){return d(e,n,t)},{})};var m=d;e.exports=m},,function(e,t,n){"use strict";var r=n(53);function o(e,t,n,o,c){var l=r.writeRtpDescription(e.kind,t);if(l+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),l+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":c||"active"),l+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?l+="a=sendrecv\r\n":e.rtpSender?l+="a=sendonly\r\n":e.rtpReceiver?l+="a=recvonly\r\n":l+="a=inactive\r\n",e.rtpSender){var h=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=h;var f="msid:"+(o?o.id:"-")+" "+h+"\r\n";l+="a="+f,l+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+f,e.sendEncodingParameters[0].rtx&&(l+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+f,l+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return l+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(l+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),l}function c(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var i=0;i<t.length;i++)if(t[i].payloadType===e||t[i].preferredPayloadType===e)return t[i]},o=function(e,t,n,o){var c=r(e.parameters.apt,n),l=r(t.parameters.apt,o);return c&&l&&c.name.toLowerCase()===l.name.toLowerCase()};return e.codecs.forEach(function(r){for(var i=0;i<t.codecs.length;i++){var c=t.codecs[i];if(r.name.toLowerCase()===c.name.toLowerCase()&&r.clockRate===c.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&c.parameters.apt&&!o(r,c,e.codecs,t.codecs))continue;(c=JSON.parse(JSON.stringify(c))).numChannels=Math.min(r.numChannels,c.numChannels),n.codecs.push(c),c.rtcpFeedback=c.rtcpFeedback.filter(function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var i=0;i<t.headerExtensions.length;i++){var r=t.headerExtensions[i];if(e.uri===r.uri){n.headerExtensions.push(r);break}}}),n}function l(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function h(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function f(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(track,t){t.addTrack(track),t.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:track}))}function d(t,track,n,r){var o=new Event("track");o.track=track,o.receiver=n,o.transceiver={receiver:n},o.streams=r,e.setTimeout(function(){t._dispatchEvent("track",o)})}var m=function(n){var o=this,c=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){o[e]=c[e].bind(c)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw f("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof r;return o&&(r=[r]),r=r.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!n?(n=!0,!0):0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp")}),delete e.url,e.urls=o?r[0]:r,!!r.length}})}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var i=n.iceCandidatePoolSize;i>0;i--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(m.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(m.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),m.prototype.onicecandidate=null,m.prototype.onaddstream=null,m.prototype.ontrack=null,m.prototype.onremovestream=null,m.prototype.onsignalingstatechange=null,m.prototype.oniceconnectionstatechange=null,m.prototype.onconnectionstatechange=null,m.prototype.onicegatheringstatechange=null,m.prototype.onnegotiationneeded=null,m.prototype.ondatachannel=null,m.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},m.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},m.prototype.getConfiguration=function(){return this._config},m.prototype.getLocalStreams=function(){return this.localStreams},m.prototype.getRemoteStreams=function(){return this.remoteStreams},m.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();r.iceTransport=o.iceTransport,r.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(r),r},m.prototype.addTrack=function(track,t){if(this._isClosed)throw f("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find(function(s){return s.track===track}))throw f("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==track.kind||(n=this.transceivers[i]);return n||(n=this._createTransceiver(track.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(t)&&this.localStreams.push(t),n.track=track,n.stream=t,n.rtpSender=new e.RTCRtpSender(track,n.dtlsTransport),n.rtpSender},m.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach(function(track){n.addTrack(track,e)});else{var r=e.clone();e.getTracks().forEach(function(track,e){var t=r.getTracks()[e];track.addEventListener("enabled",function(e){t.enabled=e.enabled})}),r.getTracks().forEach(function(track){n.addTrack(track,r)})}},m.prototype.removeTrack=function(t){if(this._isClosed)throw f("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find(function(e){return e.rtpSender===t});if(!n)throw f("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},m.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(track){var e=t.getSenders().find(function(s){return s.track===track});e&&t.removeTrack(e)})},m.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},m.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},m.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;o.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},m.prototype._gather=function(t,n){var o=this,c=this.transceivers[n].iceGatherer;if(!c.onlocalcandidate){var l=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,c.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),c.onlocalcandidate=function(e){if(!(o.usingBundle&&n>0)){var l=new Event("icecandidate");l.candidate={sdpMid:t,sdpMLineIndex:n};var h=e.candidate,f=!h||0===Object.keys(h).length;if(f)"new"!==c.state&&"gathering"!==c.state||(c.state="completed");else{"new"===c.state&&(c.state="gathering"),h.component=1,h.ufrag=c.getLocalParameters().usernameFragment;var d=r.writeCandidate(h);l.candidate=Object.assign(l.candidate,r.parseCandidate(d)),l.candidate.candidate=d,l.candidate.toJSON=function(){return{candidate:l.candidate.candidate,sdpMid:l.candidate.sdpMid,sdpMLineIndex:l.candidate.sdpMLineIndex,usernameFragment:l.candidate.usernameFragment}}}var m=r.getMediaSections(o._localDescription.sdp);m[l.candidate.sdpMLineIndex]+=f?"a=end-of-candidates\r\n":"a="+l.candidate.candidate+"\r\n",o._localDescription.sdp=r.getDescription(o._localDescription.sdp)+m.join("");var v=o.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),f||o._dispatchEvent("icecandidate",l),v&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout(function(){l.forEach(function(e){c.onlocalcandidate(e)})},0)}},m.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},m.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},m.prototype._transceive=function(e,n,o){var l=c(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(l.encodings=e.sendEncodingParameters,l.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(l.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(l)),o&&e.rtpReceiver&&l.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(p){delete p.rtx}),e.recvEncodingParameters.length?l.encodings=e.recvEncodingParameters:l.encodings=[{}],l.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(l.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(l.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(l))},m.prototype.setLocalDescription=function(e){var t,n,o=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(f("TypeError",'Unsupported type "'+e.type+'"'));if(!l("setLocalDescription",e.type,o.signalingState)||o._isClosed)return Promise.reject(f("InvalidStateError","Can not set local "+e.type+" in state "+o.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);o.transceivers[t].localCapabilities=n}),o.transceivers.forEach(function(e,t){o._gather(e.mid,t)});else if("answer"===e.type){t=r.splitSections(o._remoteDescription.sdp),n=t.shift();var h=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var l=o.transceivers[t],f=l.iceGatherer,d=l.iceTransport,m=l.dtlsTransport,v=l.localCapabilities,y=l.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length)&&!l.rejected){var w=r.getIceParameters(e,n),_=r.getDtlsParameters(e,n);h&&(_.role="server"),o.usingBundle&&0!==t||(o._gather(l.mid,t),"new"===d.state&&d.start(f,w,h?"controlling":"controlled"),"new"===m.state&&m.start(_));var S=c(v,y);o._transceive(l,S.codecs.length>0,!1)}})}return o._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?o._updateSignalingState("have-local-offer"):o._updateSignalingState("stable"),Promise.resolve()},m.prototype.setRemoteDescription=function(o){var m=this;if(-1===["offer","answer"].indexOf(o.type))return Promise.reject(f("TypeError",'Unsupported type "'+o.type+'"'));if(!l("setRemoteDescription",o.type,m.signalingState)||m._isClosed)return Promise.reject(f("InvalidStateError","Can not set remote "+o.type+" in state "+m.signalingState));var v={};m.remoteStreams.forEach(function(e){v[e.id]=e});var y=[],w=r.splitSections(o.sdp),_=w.shift(),S=r.matchPrefix(_,"a=ice-lite").length>0,C=r.matchPrefix(_,"a=group:BUNDLE ").length>0;m.usingBundle=C;var x=r.matchPrefix(_,"a=ice-options:")[0];return m.canTrickleIceCandidates=!!x&&x.substr(14).split(" ").indexOf("trickle")>=0,w.forEach(function(l,f){var d=r.splitLines(l),w=r.getKind(l),x=r.isRejected(l)&&0===r.matchPrefix(l,"a=bundle-only").length,T=d[0].substr(2).split(" ")[2],E=r.getDirection(l,_),I=r.parseMsid(l),D=r.getMid(l)||r.generateIdentifier();if(x||"application"===w&&("DTLS/SCTP"===T||"UDP/DTLS/SCTP"===T))m.transceivers[f]={mid:D,kind:w,protocol:T,rejected:!0};else{var A,R,k,O,N,P,M,L,track;!x&&m.transceivers[f]&&m.transceivers[f].rejected&&(m.transceivers[f]=m._createTransceiver(w,!0));var j,F,B=r.parseRtpParameters(l);x||(j=r.getIceParameters(l,_),(F=r.getDtlsParameters(l,_)).role="client"),M=r.parseRtpEncodingParameters(l);var U=r.parseRtcpParameters(l),V=r.matchPrefix(l,"a=end-of-candidates",_).length>0,z=r.matchPrefix(l,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===o.type||"answer"===o.type)&&!x&&C&&f>0&&m.transceivers[f]&&(m._disposeIceAndDtlsTransports(f),m.transceivers[f].iceGatherer=m.transceivers[0].iceGatherer,m.transceivers[f].iceTransport=m.transceivers[0].iceTransport,m.transceivers[f].dtlsTransport=m.transceivers[0].dtlsTransport,m.transceivers[f].rtpSender&&m.transceivers[f].rtpSender.setTransport(m.transceivers[0].dtlsTransport),m.transceivers[f].rtpReceiver&&m.transceivers[f].rtpReceiver.setTransport(m.transceivers[0].dtlsTransport)),"offer"!==o.type||x){if("answer"===o.type&&!x){R=(A=m.transceivers[f]).iceGatherer,k=A.iceTransport,O=A.dtlsTransport,N=A.rtpReceiver,P=A.sendEncodingParameters,L=A.localCapabilities,m.transceivers[f].recvEncodingParameters=M,m.transceivers[f].remoteCapabilities=B,m.transceivers[f].rtcpParameters=U,z.length&&"new"===k.state&&(!S&&!V||C&&0!==f?z.forEach(function(e){h(A.iceTransport,e)}):k.setRemoteCandidates(z)),C&&0!==f||("new"===k.state&&k.start(R,j,"controlling"),"new"===O.state&&O.start(F)),!c(A.localCapabilities,A.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&A.sendEncodingParameters[0].rtx&&delete A.sendEncodingParameters[0].rtx,m._transceive(A,"sendrecv"===E||"recvonly"===E,"sendrecv"===E||"sendonly"===E),!N||"sendrecv"!==E&&"sendonly"!==E?delete A.rtpReceiver:(track=N.track,I?(v[I.stream]||(v[I.stream]=new e.MediaStream),n(track,v[I.stream]),y.push([track,N,v[I.stream]])):(v.default||(v.default=new e.MediaStream),n(track,v.default),y.push([track,N,v.default])))}}else{(A=m.transceivers[f]||m._createTransceiver(w)).mid=D,A.iceGatherer||(A.iceGatherer=m._createIceGatherer(f,C)),z.length&&"new"===A.iceTransport.state&&(!V||C&&0!==f?z.forEach(function(e){h(A.iceTransport,e)}):A.iceTransport.setRemoteCandidates(z)),L=e.RTCRtpReceiver.getCapabilities(w),t<15019&&(L.codecs=L.codecs.filter(function(e){return"rtx"!==e.name})),P=A.sendEncodingParameters||[{ssrc:1001*(2*f+2)}];var W,G=!1;if("sendrecv"===E||"sendonly"===E){if(G=!A.rtpReceiver,N=A.rtpReceiver||new e.RTCRtpReceiver(A.dtlsTransport,w),G)track=N.track,I&&"-"===I.stream||(I?(v[I.stream]||(v[I.stream]=new e.MediaStream,Object.defineProperty(v[I.stream],"id",{get:function(){return I.stream}})),Object.defineProperty(track,"id",{get:function(){return I.track}}),W=v[I.stream]):(v.default||(v.default=new e.MediaStream),W=v.default)),W&&(n(track,W),A.associatedRemoteMediaStreams.push(W)),y.push([track,N,W])}else A.rtpReceiver&&A.rtpReceiver.track&&(A.associatedRemoteMediaStreams.forEach(function(s){var t=s.getTracks().find(function(e){return e.id===A.rtpReceiver.track.id});t&&function(track,t){t.removeTrack(track),t.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:track}))}(t,s)}),A.associatedRemoteMediaStreams=[]);A.localCapabilities=L,A.remoteCapabilities=B,A.rtpReceiver=N,A.rtcpParameters=U,A.sendEncodingParameters=P,A.recvEncodingParameters=M,m._transceive(m.transceivers[f],!1,G)}}}),void 0===m._dtlsRole&&(m._dtlsRole="offer"===o.type?"active":"passive"),m._remoteDescription={type:o.type,sdp:o.sdp},"offer"===o.type?m._updateSignalingState("have-remote-offer"):m._updateSignalingState("stable"),Object.keys(v).forEach(function(t){var n=v[t];if(n.getTracks().length){if(-1===m.remoteStreams.indexOf(n)){m.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout(function(){m._dispatchEvent("addstream",r)})}y.forEach(function(e){var track=e[0],t=e[1];n.id===e[2].id&&d(m,track,t,[n])})}}),y.forEach(function(e){e[2]||d(m,e[0],e[1],[])}),e.setTimeout(function(){m&&m.transceivers&&m.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},m.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},m.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},m.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},m.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},m.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},m.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(f("InvalidStateError","Can not call createOffer after close"));var c=n.transceivers.filter(function(e){return"audio"===e.kind}).length,l=n.transceivers.filter(function(e){return"video"===e.kind}).length,h=arguments[0];if(h){if(h.mandatory||h.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==h.offerToReceiveAudio&&(c=!0===h.offerToReceiveAudio?1:!1===h.offerToReceiveAudio?0:h.offerToReceiveAudio),void 0!==h.offerToReceiveVideo&&(l=!0===h.offerToReceiveVideo?1:!1===h.offerToReceiveVideo?0:h.offerToReceiveVideo)}for(n.transceivers.forEach(function(e){"audio"===e.kind?--c<0&&(e.wantReceive=!1):"video"===e.kind&&--l<0&&(e.wantReceive=!1)});c>0||l>0;)c>0&&(n._createTransceiver("audio"),c--),l>0&&(n._createTransceiver("video"),l--);var d=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach(function(o,c){var track=o.track,l=o.kind,h=o.mid||r.generateIdentifier();o.mid=h,o.iceGatherer||(o.iceGatherer=n._createIceGatherer(c,n.usingBundle));var f=e.RTCRtpSender.getCapabilities(l);t<15019&&(f.codecs=f.codecs.filter(function(e){return"rtx"!==e.name})),f.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),o.remoteCapabilities&&o.remoteCapabilities.codecs&&o.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),f.headerExtensions.forEach(function(e){(o.remoteCapabilities&&o.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var d=o.sendEncodingParameters||[{ssrc:1001*(2*c+1)}];track&&t>=15019&&"video"===l&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),o.wantReceive&&(o.rtpReceiver=new e.RTCRtpReceiver(o.dtlsTransport,l)),o.localCapabilities=f,o.sendEncodingParameters=d}),"max-compat"!==n._config.bundlePolicy&&(d+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),d+="a=ice-options:trickle\r\n",n.transceivers.forEach(function(e,t){d+=o(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),d+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,d+="a="+r.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(d+="a=end-of-candidates\r\n"))});var desc=new e.RTCSessionDescription({type:"offer",sdp:d});return Promise.resolve(desc)},m.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(f("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(f("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var l=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(l+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),l+="a=ice-options:trickle\r\n";var h=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach(function(e,r){if(!(r+1>h)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?l+="m=application 0 DTLS/SCTP 5000\r\n":l+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?l+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(l+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(l+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var f;if(e.stream)"audio"===e.kind?f=e.stream.getAudioTracks()[0]:"video"===e.kind&&(f=e.stream.getVideoTracks()[0]),f&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var d=c(e.localCapabilities,e.remoteCapabilities);!d.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,l+=o(e,d,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(l+="a=rtcp-rsize\r\n")}});var desc=new e.RTCSessionDescription({type:"answer",sdp:l});return Promise.resolve(desc)},m.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(o,c){if(!n._remoteDescription)return c(f("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var l=e.sdpMLineIndex;if(e.sdpMid)for(var i=0;i<n.transceivers.length;i++)if(n.transceivers[i].mid===e.sdpMid){l=i;break}var d=n.transceivers[l];if(!d)return c(f("OperationError","Can not add ICE candidate"));if(d.rejected)return o();var m=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===m.protocol&&(0===m.port||9===m.port))return o();if(m.component&&1!==m.component)return o();if((0===l||l>0&&d.iceTransport!==n.transceivers[0].iceTransport)&&!h(d.iceTransport,m))return c(f("OperationError","Can not add ICE candidate"));var v=e.candidate.trim();0===v.indexOf("a=")&&(v=v.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[l]+="a="+(m.type?v:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var y=0;y<n.transceivers.length&&(n.transceivers[y].rejected||(n.transceivers[y].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[y]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));y++);o()})},m.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),!n)throw f("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])}),t})}}});var v=["createOffer","createAnswer"];return v.forEach(function(e){var t=m.prototype[e];m.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(v=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=m.prototype[e];m.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=m.prototype[e];m.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),m}},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"shimGetUserMedia",function(){return D}),n.d(r,"shimGetDisplayMedia",function(){return A}),n.d(r,"shimMediaStream",function(){return R}),n.d(r,"shimOnTrack",function(){return k}),n.d(r,"shimGetSendersWithDtmf",function(){return O}),n.d(r,"shimGetStats",function(){return N}),n.d(r,"shimSenderReceiverGetStats",function(){return P}),n.d(r,"shimAddTrackRemoveTrackWithNative",function(){return M}),n.d(r,"shimAddTrackRemoveTrack",function(){return L}),n.d(r,"shimPeerConnection",function(){return j}),n.d(r,"fixNegotiationNeeded",function(){return F});var o={};n.r(o),n.d(o,"shimGetUserMedia",function(){return V}),n.d(o,"shimGetDisplayMedia",function(){return z}),n.d(o,"shimPeerConnection",function(){return W}),n.d(o,"shimReplaceTrack",function(){return G});var c={};n.r(c),n.d(c,"shimGetUserMedia",function(){return Q}),n.d(c,"shimGetDisplayMedia",function(){return K}),n.d(c,"shimOnTrack",function(){return H}),n.d(c,"shimPeerConnection",function(){return $}),n.d(c,"shimSenderGetStats",function(){return Y}),n.d(c,"shimReceiverGetStats",function(){return X}),n.d(c,"shimRemoveStream",function(){return J}),n.d(c,"shimRTCDataChannel",function(){return Z}),n.d(c,"shimAddTransceiver",function(){return ee}),n.d(c,"shimCreateOffer",function(){return te}),n.d(c,"shimCreateAnswer",function(){return ne});var l={};n.r(l),n.d(l,"shimLocalStreamsAPI",function(){return re}),n.d(l,"shimRemoteStreamsAPI",function(){return ie}),n.d(l,"shimCallbacksAPI",function(){return oe}),n.d(l,"shimGetUserMedia",function(){return ae}),n.d(l,"shimConstraints",function(){return se}),n.d(l,"shimRTCIceServerUrls",function(){return ce}),n.d(l,"shimTrackEventTransceiver",function(){return ue}),n.d(l,"shimCreateOfferLegacy",function(){return le});var h={};n.r(h),n.d(h,"shimRTCIceCandidate",function(){return de}),n.d(h,"shimMaxMessageSize",function(){return pe}),n.d(h,"shimSendThrowTypeError",function(){return me}),n.d(h,"shimConnectionState",function(){return ve}),n.d(h,"removeAllowExtmapMixed",function(){return ge});let f=!0,d=!0;function m(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function v(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);const c=e=>{const t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=c,o.apply(this,[e,c])};const c=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return c.apply(this,arguments);const r=this._eventMap[n];return delete this._eventMap[n],c.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function y(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(f=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function w(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(d=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function _(){if("object"==typeof window){if(f)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function S(e,t){d&&console.warn(e+" is deprecated, please use "+t+" instead.")}function C(e){const{navigator:t}=e,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=m(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=m(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=m(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=m(t.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n}function x(e){return"[object Object]"===Object.prototype.toString.call(e)}function T(data){return x(data)?Object.keys(data).reduce(function(e,t){const n=x(data[t]),r=n?T(data[t]):data[t],o=n&&!Object.keys(r).length;return void 0===r||o?e:Object.assign(e,{[t]:r})},{}):data}function E(e,track,t){const n=t?"outbound-rtp":"inbound-rtp",r=new Map;if(null===track)return r;const o=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===track.id&&o.push(e)}),o.forEach(t=>{e.forEach(o=>{o.type===n&&o.trackId===t.id&&function e(t,base,n){base&&!n.has(base.id)&&(n.set(base.id,base),Object.keys(base).forEach(r=>{r.endsWith("Id")?e(t,t.get(base[r]),n):r.endsWith("Ids")&&base[r].forEach(r=>{e(t,t.get(r),n)})}))}(e,o,r)})}),r}const I=_;function D(e){const t=e&&e.navigator;if(!t.mediaDevices)return;const n=C(e),r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[o("min",n)]=r.ideal,t.optional.push(e),(e={})[o("max",n)]=r.ideal,t.optional.push(e)):(e[o("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach(e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(n.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,a,b){a in e&&!(b in e)&&(e[b]=e[a],delete e[a])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let c=e.video.facingMode;c=c&&("object"==typeof c?c:{ideal:c});const l=n.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||l)){let n;if(delete e.video.facingMode,"environment"===c.exact||"environment"===c.ideal?n=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(n=["front"]),n)return t.mediaDevices.enumerateDevices().then(t=>{let l=(t=t.filter(e=>"videoinput"===e.kind)).find(e=>n.some(t=>e.label.toLowerCase().includes(t)));return!l&&t.length&&n.includes("back")&&(l=t[t.length-1]),l&&(e.video.deviceId=c.exact?{exact:l.deviceId}:{ideal:l.deviceId}),e.video=r(e.video),I("chrome: "+JSON.stringify(e)),o(e)})}e.video=r(e.video)}return I("chrome: "+JSON.stringify(e)),o(e)},c=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,n,r){o(e,e=>{t.webkitGetUserMedia(e,n,e=>{r&&r(c(e))})})}.bind(t),t.mediaDevices.getUserMedia){const e=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(t){return o(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(track=>{track.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(c(e))))}}}function A(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(t=>{const r=n.video&&n.video.width,o=n.video&&n.video.height,c=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:c||3}},r&&(n.video.mandatory.maxWidth=r),o&&(n.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function R(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function k(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)v(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e));else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.track.id):{track:n.track};const o=new Event("track");o.track=n.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)}),t.stream.getTracks().forEach(track=>{let n;n=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===track.id):{track:track};const r=new Event("track");r.track=track,r.receiver=n,r.transceiver={receiver:n},r.streams=[t.stream],this.dispatchEvent(r)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}}function O(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,track){return{track:track,get dtmf(){return void 0===this._dtmf&&("audio"===track.kind?this._dtmf=e.createDTMFSender(track):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(track,e){let r=n.apply(this,arguments);return r||(r=t(this,track),this._senders.push(r)),r};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(track=>{this._senders.push(t(this,track))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(track=>{const e=this._senders.find(s=>s.track===track);e&&this._senders.splice(this._senders.indexOf(e),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function N(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const o=function(e){const t={};return e.result().forEach(e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{n[t]=e.stat(t)}),t[n.id]=n}),t},c=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const r=function(e){n(c(o(e)))};return t.apply(this,[r,e])}return new Promise((e,n)=>{t.apply(this,[function(t){e(c(o(t)))},n])}).then(n,r)}}function P(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>E(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),v(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>E(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const track=arguments[0];let e,t,n;return this.getSenders().forEach(s=>{s.track===track&&(e?n=!0:e=s)}),this.getReceivers().forEach(e=>(e.track===track&&(t?n=!0:t=e),e.track===track)),n||e&&t?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):e?e.getStats():t?t.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function M(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(track,e){if(!e)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const n=t.apply(this,arguments);return this._shimmedLocalStreams[e.id]?-1===this._shimmedLocalStreams[e.id].indexOf(n)&&this._shimmedLocalStreams[e.id].push(n):this._shimmedLocalStreams[e.id]=[e,n],n};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(track=>{if(this.getSenders().find(s=>s.track===track))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),o.apply(this,arguments)}}function L(e){if(!e.RTCPeerConnection)return;const t=C(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return M(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(track=>{if(this.getSenders().find(s=>s.track===track))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const o=e.RTCPeerConnection.prototype.removeStream;function c(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(o.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}function l(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),o.id)}),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(track,t){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const n=[].slice.call(arguments,1);if(1!==n.length||!n[0].getTracks().find(e=>e===track))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const r=this.getSenders().find(s=>s.track===track);if(r)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[t.id];if(o)o.addTrack(track),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const n=new e.MediaStream([track]);this._streams[t.id]=n,this._reverseStreams[n.id]=t,this.addStream(n)}return this.getSenders().find(s=>s.track===track)},["createOffer","createAnswer"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const desc=c(this,t);e[0].apply(null,[desc])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then(e=>c(this,e))}};e.RTCPeerConnection.prototype[t]=r[t]});const h=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=l(this,arguments[0]),h.apply(this,arguments)):h.apply(this,arguments)};const f=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=f.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(n=>{this._streams[n].getTracks().find(track=>e.track===track)&&(t=this._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function j(e){const t=C(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!e.RTCPeerConnection)return;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]});const n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.version<78&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}function F(e){v(e,"negotiationneeded",e=>{if("stable"===e.target.signalingState)return e})}var B=n(157),U=n.n(B);function V(e){const t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function z(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function W(e){const t=C(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=U()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(e=>{if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&S("RTCIceServer.url","RTCIceServer.urls");const r="string"==typeof t;return r&&(t=[t]),t=t.filter(e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n}),delete e.url,e.urls=r?t[0]:t,!!t.length}})}(e.iceServers,t.version),_("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function G(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function Q(e){const t=C(e),n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){S("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,a,b){a in e&&!(b in e)&&(e[b]=e[a],delete e[a])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function K(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function H(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function $(e){const t=C(e);if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;if(!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}),t.version<68){const t=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&""===arguments[0].candidate?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,o,c]=arguments;return r.apply(this,[e||null]).then(e=>{if(t.version<53&&!o)try{e.forEach(e=>{e.type=n[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach((t,i)=>{e.set(i,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(o,c)}}function Y(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function X(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),v(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function J(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){S("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function Z(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function ee(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();"encodings"in n||(n.encodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).catch(()=>{})))}return r})}function te(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function ne(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function re(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(track=>t.call(this,track,e)),e.getVideoTracks().forEach(track=>t.call(this,track,e))},e.RTCPeerConnection.prototype.addTrack=function(track){const e=arguments[1];return e&&(this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(e=>{n.includes(e.track)&&this.removeTrack(e)})})}}function ie(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)})}),t.apply(e,arguments)}}}function oe(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,c=t.setRemoteDescription,l=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],o=r.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o};let h=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=h,h=function(e,t,n){const r=c.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=h,h=function(e,t,n){const r=l.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=h}function ae(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(se(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function se(e){return e&&void 0!==e.video?Object.assign({},e,{video:T(e.video)}):e}function ce(e){const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let i=0;i<e.iceServers.length;i++){let n=e.iceServers[i];!n.hasOwnProperty("urls")&&n.hasOwnProperty("url")?(S("RTCIceServer.url","RTCIceServer.urls"),(n=JSON.parse(JSON.stringify(n))).urls=n.url,delete n.url,t.push(n)):t.push(e.iceServers[i])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function ue(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function le(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}var he=n(53),fe=n.n(he);function de(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=fe.a.parseCandidate(e.candidate),o=Object.assign(n,r);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,v(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function pe(e){if(!e.RTCPeerConnection)return;const t=C(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=fe.a.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=fe.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},o=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},c=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const o=fe.a.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?r=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},l=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=o(e),n=c(arguments[0],e);let l;l=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const h={};Object.defineProperty(h,"maxMessageSize",{get:()=>l}),this._sctp=h}return l.apply(this,arguments)}}function me(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const data=arguments[0],r=data.length||data.size||data.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},v(e,"datachannel",e=>(t(e.channel,e.target),e))}function ve(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function ge(e){if(!e.RTCPeerConnection)return;const t=C(e);if("chrome"===t.browser&&t.version>=71)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(desc){return desc&&desc.sdp&&-1!==desc.sdp.indexOf("\na=extmap-allow-mixed")&&(desc.sdp=desc.sdp.split("\n").filter(line=>"a=extmap-allow-mixed"!==line.trim()).join("\n")),n.apply(this,arguments)}}!function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=_,f=C(e),d={browserDetails:f,commonShim:h,extractVersion:m,disableLog:y,disableWarnings:w};switch(f.browser){case"chrome":if(!r||!j||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),d;n("adapter.js shimming chrome."),d.browserShim=r,D(e),R(e),j(e),k(e),L(e),O(e),N(e),P(e),F(e),de(e),ve(e),pe(e),me(e),ge(e);break;case"firefox":if(!c||!$||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),d;n("adapter.js shimming firefox."),d.browserShim=c,Q(e),$(e),H(e),J(e),Y(e),X(e),Z(e),ee(e),te(e),ne(e),de(e),ve(e),pe(e),me(e);break;case"edge":if(!o||!W||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),d;n("adapter.js shimming edge."),d.browserShim=o,V(e),z(e),W(e),G(e),pe(e),me(e);break;case"safari":if(!l||!t.shimSafari)return n("Safari shim is not included in this adapter release."),d;n("adapter.js shimming safari."),d.browserShim=l,ce(e),le(e),oe(e),re(e),ie(e),ue(e),ae(e),de(e),pe(e),me(e),ge(e);break;default:n("Unsupported browser!")}}({window:window});var ye=n(25),be=n.n(ye),we={name:"QuaggaScanner",props:{onDetected:{type:Function,default:function(e){console.log("detected: ",e)}},onProcessed:{type:Function,default:function(e){var t=be.a.canvas.ctx.overlay,n=be.a.canvas.dom.overlay;e&&(e.boxes&&(t.clearRect(0,0,parseInt(n.getAttribute("width")),parseInt(n.getAttribute("height"))),e.boxes.filter(function(t){return t!==e.box}).forEach(function(e){be.a.ImageDebug.drawPath(e,{x:0,y:1},t,{color:"green",lineWidth:2})})),e.box&&be.a.ImageDebug.drawPath(e.box,{x:0,y:1},t,{color:"#00F",lineWidth:2}),e.codeResult&&e.codeResult.code&&be.a.ImageDebug.drawPath(e.line,{x:"x",y:"y"},t,{color:"red",lineWidth:3}))}},readerTypes:{type:Array,default:function(){return["code_128_reader"]}},readerSize:{type:Object,default:function(){return{width:640,height:480}},validator:function(e){return"number"==typeof e.width&&"number"==typeof e.height}},aspectRatio:{type:Object,default:function(){return{min:1,max:2}},validator:function(e){return"number"==typeof e.min&&"number"==typeof e.max}}},data:function(){return{quaggaState:{inputStream:{type:"LiveStream",constraints:{width:{min:this.readerSize.width},height:{min:this.readerSize.height},facingMode:"environment",aspectRatio:{min:1,max:2}}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:2,frequency:10,decoder:{readers:this.readerTypes},locate:!0}}},mounted:function(){be.a.init(this.quaggaState,function(e){if(e)return console.error(e);be.a.start()}),be.a.onDetected(this.onDetected),be.a.onProcessed(this.onProcessed)},destroyed:function(){be.a.stop()}},_e=(n(258),n(35)),Se=Object(_e.a)(we,function(){var e=this.$createElement;this._self._c;return this._m(0)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"viewport scanner",attrs:{id:"interactive"}},[t("video"),this._v(" "),t("canvas",{staticClass:"drawingBuffer"})])}],!1,null,"3870cce0",null).exports;t.a={install:function(e,t){e.component("v-quagga",Se)}}},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"linear",function(){return M}),n.d(r,"easeInQuad",function(){return L}),n.d(r,"easeOutQuad",function(){return j}),n.d(r,"easeInOutQuad",function(){return F}),n.d(r,"easeInCubic",function(){return B}),n.d(r,"easeOutCubic",function(){return U}),n.d(r,"easeInOutCubic",function(){return V}),n.d(r,"easeInQuart",function(){return z}),n.d(r,"easeOutQuart",function(){return W}),n.d(r,"easeInOutQuart",function(){return G}),n.d(r,"easeInQuint",function(){return Q}),n.d(r,"easeOutQuint",function(){return K}),n.d(r,"easeInOutQuint",function(){return H});n(26),n(34),n(41),n(23);var o=n(0);n(21),n(14),n(253);var c={bar:0,bottom:0,footer:0,insetFooter:0,left:0,right:0,top:0,components:{bar:{},bottom:{},footer:{},insetFooter:{},left:{},right:{},top:{}},bind:function(e,t,n){this.components[t]&&(this.components[t]=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,n),this.update(t))},unbind:function(e,t){null!=this.components[t][e]&&(delete this.components[t][e],this.update(t))},update:function(e){this[e]=Object.values(this.components[e]).reduce(function(e,t){return e+t},0)}},l=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},h={thresholds:{xs:600,sm:960,md:1280,lg:1920},scrollbarWidth:16};function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e||(e={}),o.a.extend({data:function(){return l({clientHeight:m(),clientWidth:d(),resizeTimeout:void 0},h,e)},computed:{breakpoint:function(){var e=this.clientWidth<this.thresholds.xs,t=this.clientWidth<this.thresholds.sm&&!e,n=this.clientWidth<this.thresholds.md-this.scrollbarWidth&&!(t||e),r=this.clientWidth<this.thresholds.lg-this.scrollbarWidth&&!(n||t||e),o=this.clientWidth>=this.thresholds.lg-this.scrollbarWidth,c=e,l=t,h=(e||t)&&!(n||r||o),f=!e&&(t||n||r||o),d=n,m=(e||t||n)&&!(r||o),v=!(e||t)&&(n||r||o),y=r,w=(e||t||n||r)&&!o,_=!(e||t||n)&&(r||o),S=o,C=void 0;switch(!0){case e:C="xs";break;case t:C="sm";break;case n:C="md";break;case r:C="lg";break;default:C="xl"}return{xs:e,sm:t,md:n,lg:r,xl:o,name:C,xsOnly:c,smOnly:l,smAndDown:h,smAndUp:f,mdOnly:d,mdAndDown:m,mdAndUp:v,lgOnly:y,lgAndDown:w,lgAndUp:_,xlOnly:S,width:this.clientWidth,height:this.clientHeight,thresholds:this.thresholds,scrollbarWidth:this.scrollbarWidth}}},created:function(){"undefined"!=typeof window&&window.addEventListener("resize",this.onResize,{passive:!0})},beforeDestroy:function(){"undefined"!=typeof window&&window.removeEventListener("resize",this.onResize)},methods:{onResize:function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.setDimensions,200)},setDimensions:function(){this.clientHeight=m(),this.clientWidth=d()}}})}function d(){return"undefined"==typeof document?0:Math.max(document.documentElement.clientWidth,window.innerWidth||0)}function m(){return"undefined"==typeof document?0:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}var v=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},y={primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!1!==e&&v({},y,e)}var _={complete:"fas fa-check",cancel:"fas fa-times-circle",close:"fas fa-times",delete:"fas fa-times-circle",clear:"fas fa-times-circle",success:"fas fa-check-circle",info:"fas fa-info-circle",warning:"fas fa-exclamation",error:"fas fa-exclamation-triangle",prev:"fas fa-chevron-left",next:"fas fa-chevron-right",checkboxOn:"fas fa-check-square",checkboxOff:"far fa-square",checkboxIndeterminate:"fas fa-minus-square",delimiter:"fas fa-circle",sort:"fas fa-sort-up",expand:"fas fa-chevron-down",menu:"fas fa-bars",subgroup:"fas fa-caret-down",dropdown:"fas fa-caret-down",radioOn:"far fa-dot-circle",radioOff:"far fa-circle",edit:"fas fa-edit",ratingEmpty:"far fa-star",ratingFull:"fas fa-star",ratingHalf:"fas fa-star-half"};var S={md:{complete:"check",cancel:"cancel",close:"close",delete:"cancel",clear:"clear",success:"check_circle",info:"info",warning:"priority_high",error:"warning",prev:"chevron_left",next:"chevron_right",checkboxOn:"check_box",checkboxOff:"check_box_outline_blank",checkboxIndeterminate:"indeterminate_check_box",delimiter:"fiber_manual_record",sort:"arrow_upward",expand:"keyboard_arrow_down",menu:"menu",subgroup:"arrow_drop_down",dropdown:"arrow_drop_down",radioOn:"radio_button_checked",radioOff:"radio_button_unchecked",edit:"edit",ratingEmpty:"star_border",ratingFull:"star",ratingHalf:"star_half",loading:"cached"},mdi:{complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-exclamation",error:"mdi-alert",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sort:"mdi-arrow-up",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half"},fa:_,fa4:{complete:"fa fa-check",cancel:"fa fa-times-circle",close:"fa fa-times",delete:"fa fa-times-circle",clear:"fa fa-times-circle",success:"fa fa-check-circle",info:"fa fa-info-circle",warning:"fa fa-exclamation",error:"fa fa-exclamation-triangle",prev:"fa fa-chevron-left",next:"fa fa-chevron-right",checkboxOn:"fa fa-check-square",checkboxOff:"fa fa-square-o",checkboxIndeterminate:"fa fa-minus-square",delimiter:"fa fa-circle",sort:"fa fa-sort-up",expand:"fa fa-chevron-down",menu:"fa fa-bars",subgroup:"fa fa-caret-down",dropdown:"fa fa-caret-down",radioOn:"fa fa-dot-circle",radioOff:"fa fa-circle-o",edit:"fa fa-pencil",ratingEmpty:"fa fa-star-o",ratingFull:"fa fa-star",ratingHalf:"fa fa-star-half-o"},faSvg:function(component,e){var t={};for(var n in e)t[n]={component:component,props:{icon:e[n].split(" fa-")}};return t}("font-awesome-icon",_)};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"md",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({},S[e]||S.md,t)}var x=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},T={minifyTheme:null,themeCache:null,customProperties:!1,cspNonce:null};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x({},T,e)}n(63),n(27),n(22),n(45),n(91);var I={dataIterator:{rowsPerPageText:"Items per page:",rowsPerPageAll:"All",pageText:"{0}-{1} of {2}",noResultsText:"No matching records found",nextPage:"Next page",prevPage:"Previous page"},dataTable:{rowsPerPageText:"Rows per page:"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual"}},D=n(1),A=n(13);function R(e){if(Array.isArray(e)){for(var i=0,t=Array(e.length);i<e.length;i++)t[i]=e[i];return t}return Array.from(e)}var k="$vuetify.",O=Symbol("Lang fallback");function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.replace(k,""),o=Object(D.h)(e,r,O);return o===O&&(n?(Object(A.a)('Translation key "'+r+'" not found in fallback'),o=t):(Object(A.b)('Translation key "'+r+'" not found, falling back to default'),o=N(I,t,!0))),o}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{locales:Object.assign({en:I},e.locales),current:e.current||"en",t:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(!t.startsWith(k))return t;if(e.t)return e.t.apply(e,[t].concat(R(r)));var c=N(this.locales[this.current],t);return c.replace(/\{(\d+)\}/g,function(e,t){return String(r[+t])})}}}var M=function(e){return e},L=function(e){return e*e},j=function(e){return e*(2-e)},F=function(e){return e<.5?2*e*e:(4-2*e)*e-1},B=function(e){return e*e*e},U=function(e){return--e*e*e+1},V=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},z=function(e){return e*e*e*e},W=function(e){return 1- --e*e*e*e},G=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},Q=function(e){return e*e*e*e*e},K=function(e){return 1+--e*e*e*e*e},H=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e};function $(e){return null==e?e:e.constructor.name}function Y(e){return"string"==typeof e?document.querySelector(e):e&&e._isVue?e.$el:e instanceof HTMLElement?e:null}var X=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=X({container:document.scrollingElement||document.body||document.documentElement,duration:500,offset:0,easing:"easeInOutCubic",appOffset:!0},t),c=function(e){var t=Y(e);if(t)return t;throw"string"==typeof e?new Error('Container element "'+e+'" not found.'):new TypeError("Container must be a Selector/HTMLElement/VueComponent, received "+$(e)+" instead.")}(n.container);if(n.appOffset){var l=c.classList.contains("v-navigation-drawer"),h=c.classList.contains("v-navigation-drawer--clipped");n.offset+=o.a.prototype.$vuetify.application.bar,l&&!h||(n.offset+=o.a.prototype.$vuetify.application.top)}var f=performance.now(),d=function(e){if("number"==typeof e)return e;var t=Y(e);if(!t)throw"string"==typeof e?new Error('Target element "'+e+'" not found.'):new TypeError("Target must be a Number/Selector/HTMLElement/VueComponent, received "+$(e)+" instead.");for(var n=0;t;)n+=t.offsetTop,t=t.offsetParent;return n}(e)-n.offset,m=c.scrollTop;if(d===m)return Promise.resolve(d);var v="function"==typeof n.easing?n.easing:r[n.easing];if(!v)throw new TypeError('Easing function "'+n.easing+'" not found.');return new Promise(function(e){return requestAnimationFrame(function t(r){var o=r-f,progress=Math.abs(n.duration?Math.min(o/n.duration,1):1);c.scrollTop=Math.floor(m+(d-m)*v(progress));var l=c===document.body?document.documentElement.clientHeight:c.clientHeight;if(1===progress||l+c.scrollTop===c.scrollHeight)return e(d);requestAnimationFrame(t)})})}function Z(e,t){var n=t||"^2.5.18",r=n.split(".",3).map(function(e){return e.replace(/\D/g,"")}).map(Number),o=e.version.split(".",3).map(function(e){return parseInt(e,10)});o[0]===r[0]&&(o[1]>r[1]||o[1]===r[1]&&o[2]>=r[2])||Object(A.b)("Vuetify requires Vue version "+n)}var ee={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.installed){this.installed=!0,o.a!==e&&Object(A.a)("Multiple instances of Vue detected\nSee https://github.com/vuetifyjs/vuetify/issues/4068\n\nIf you're seeing \"$attrs is readonly\", it's caused by this"),Z(e);var n=P(t.lang);if(e.prototype.$vuetify=new e({mixins:[f(t.breakpoint)],data:{application:c,dark:!1,icons:C(t.iconfont,t.icons),lang:n,options:E(t.options),rtl:t.rtl,theme:w(t.theme)},methods:{goTo:J,t:n.t.bind(n)}}),t.directives)for(var r in t.directives)e.directive(r,t.directives[r]);!function t(n){if(n){for(var r in n){var component=n[r];component&&!t(component.$_vuetify_subcomponents)&&e.component(r,component)}return!0}return!1}(t.components)}},version:"1.5.18"};t.a=ee},,function(e,t,n){var content=n(208);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("20d6dbb5",content,!0,{sourceMap:!1})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var content=n(205);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("0094ac9e",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".application{display:flex}.application a{cursor:pointer}.application--is-rtl{direction:rtl}.application--wrap{flex:1 1 auto;-webkit-backface-visibility:hidden;backface-visibility:hidden;display:flex;flex-direction:column;min-height:100vh;max-width:100%;position:relative}.theme--light.application{background:#fafafa;color:rgba(0,0,0,.87)}.theme--light.application .text--primary{color:rgba(0,0,0,.87)!important}.theme--light.application .text--secondary{color:rgba(0,0,0,.54)!important}.theme--light.application .text--disabled{color:rgba(0,0,0,.38)!important}.theme--dark.application{background:#303030;color:#fff}.theme--dark.application .text--primary{color:#fff!important}.theme--dark.application .text--secondary{color:hsla(0,0%,100%,.7)!important}.theme--dark.application .text--disabled{color:hsla(0,0%,100%,.5)!important}@-moz-document url-prefix(){@media print{.application,.application--wrap{display:block}}}",""])},,,function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".container{flex:1 1 100%;margin:auto;padding:24px;width:100%}@media only screen and (min-width:960px){.container{max-width:900px}}@media only screen and (min-width:1264px){.container{max-width:1185px}}@media only screen and (min-width:1904px){.container{max-width:1785px}}@media only screen and (max-width:959px){.container{padding:16px}}.container.fluid{max-width:100%}.container.fill-height{align-items:center;display:flex}.container.fill-height>.layout{height:100%;flex:1 1 auto}.container.grid-list-xs .layout .flex{padding:1px}.container.grid-list-xs .layout:only-child{margin:-1px}.container.grid-list-xs .layout:not(:only-child){margin:auto -1px}.container.grid-list-xs :not(:only-child) .layout:first-child{margin-top:-1px}.container.grid-list-xs :not(:only-child) .layout:last-child{margin-bottom:-1px}.container.grid-list-sm .layout .flex{padding:2px}.container.grid-list-sm .layout:only-child{margin:-2px}.container.grid-list-sm .layout:not(:only-child){margin:auto -2px}.container.grid-list-sm :not(:only-child) .layout:first-child{margin-top:-2px}.container.grid-list-sm :not(:only-child) .layout:last-child{margin-bottom:-2px}.container.grid-list-md .layout .flex{padding:4px}.container.grid-list-md .layout:only-child{margin:-4px}.container.grid-list-md .layout:not(:only-child){margin:auto -4px}.container.grid-list-md :not(:only-child) .layout:first-child{margin-top:-4px}.container.grid-list-md :not(:only-child) .layout:last-child{margin-bottom:-4px}.container.grid-list-lg .layout .flex{padding:8px}.container.grid-list-lg .layout:only-child{margin:-8px}.container.grid-list-lg .layout:not(:only-child){margin:auto -8px}.container.grid-list-lg :not(:only-child) .layout:first-child{margin-top:-8px}.container.grid-list-lg :not(:only-child) .layout:last-child{margin-bottom:-8px}.container.grid-list-xl .layout .flex{padding:12px}.container.grid-list-xl .layout:only-child{margin:-12px}.container.grid-list-xl .layout:not(:only-child){margin:auto -12px}.container.grid-list-xl :not(:only-child) .layout:first-child{margin-top:-12px}.container.grid-list-xl :not(:only-child) .layout:last-child{margin-bottom:-12px}.layout{display:flex;flex:1 1 auto;flex-wrap:nowrap;min-width:0}.layout.row{flex-direction:row}.layout.row.reverse{flex-direction:row-reverse}.layout.column{flex-direction:column}.layout.column.reverse{flex-direction:column-reverse}.layout.column>.flex{max-width:100%}.layout.wrap{flex-wrap:wrap}@media (min-width:0){.flex.xs1{flex-basis:8.333333333333332%;flex-grow:0;max-width:8.333333333333332%}.flex.order-xs1{order:1}.flex.xs2{flex-basis:16.666666666666664%;flex-grow:0;max-width:16.666666666666664%}.flex.order-xs2{order:2}.flex.xs3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-xs3{order:3}.flex.xs4{flex-basis:33.33333333333333%;flex-grow:0;max-width:33.33333333333333%}.flex.order-xs4{order:4}.flex.xs5{flex-basis:41.66666666666667%;flex-grow:0;max-width:41.66666666666667%}.flex.order-xs5{order:5}.flex.xs6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-xs6{order:6}.flex.xs7{flex-basis:58.333333333333336%;flex-grow:0;max-width:58.333333333333336%}.flex.order-xs7{order:7}.flex.xs8{flex-basis:66.66666666666666%;flex-grow:0;max-width:66.66666666666666%}.flex.order-xs8{order:8}.flex.xs9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-xs9{order:9}.flex.xs10{flex-basis:83.33333333333334%;flex-grow:0;max-width:83.33333333333334%}.flex.order-xs10{order:10}.flex.xs11{flex-basis:91.66666666666666%;flex-grow:0;max-width:91.66666666666666%}.flex.order-xs11{order:11}.flex.xs12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-xs12{order:12}.flex.offset-xs0{margin-left:0}.flex.offset-xs1{margin-left:8.333333333333332%}.flex.offset-xs2{margin-left:16.666666666666664%}.flex.offset-xs3{margin-left:25%}.flex.offset-xs4{margin-left:33.33333333333333%}.flex.offset-xs5{margin-left:41.66666666666667%}.flex.offset-xs6{margin-left:50%}.flex.offset-xs7{margin-left:58.333333333333336%}.flex.offset-xs8{margin-left:66.66666666666666%}.flex.offset-xs9{margin-left:75%}.flex.offset-xs10{margin-left:83.33333333333334%}.flex.offset-xs11{margin-left:91.66666666666666%}.flex.offset-xs12{margin-left:100%}}@media (min-width:600px){.flex.sm1{flex-basis:8.333333333333332%;flex-grow:0;max-width:8.333333333333332%}.flex.order-sm1{order:1}.flex.sm2{flex-basis:16.666666666666664%;flex-grow:0;max-width:16.666666666666664%}.flex.order-sm2{order:2}.flex.sm3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-sm3{order:3}.flex.sm4{flex-basis:33.33333333333333%;flex-grow:0;max-width:33.33333333333333%}.flex.order-sm4{order:4}.flex.sm5{flex-basis:41.66666666666667%;flex-grow:0;max-width:41.66666666666667%}.flex.order-sm5{order:5}.flex.sm6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-sm6{order:6}.flex.sm7{flex-basis:58.333333333333336%;flex-grow:0;max-width:58.333333333333336%}.flex.order-sm7{order:7}.flex.sm8{flex-basis:66.66666666666666%;flex-grow:0;max-width:66.66666666666666%}.flex.order-sm8{order:8}.flex.sm9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-sm9{order:9}.flex.sm10{flex-basis:83.33333333333334%;flex-grow:0;max-width:83.33333333333334%}.flex.order-sm10{order:10}.flex.sm11{flex-basis:91.66666666666666%;flex-grow:0;max-width:91.66666666666666%}.flex.order-sm11{order:11}.flex.sm12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-sm12{order:12}.flex.offset-sm0{margin-left:0}.flex.offset-sm1{margin-left:8.333333333333332%}.flex.offset-sm2{margin-left:16.666666666666664%}.flex.offset-sm3{margin-left:25%}.flex.offset-sm4{margin-left:33.33333333333333%}.flex.offset-sm5{margin-left:41.66666666666667%}.flex.offset-sm6{margin-left:50%}.flex.offset-sm7{margin-left:58.333333333333336%}.flex.offset-sm8{margin-left:66.66666666666666%}.flex.offset-sm9{margin-left:75%}.flex.offset-sm10{margin-left:83.33333333333334%}.flex.offset-sm11{margin-left:91.66666666666666%}.flex.offset-sm12{margin-left:100%}}@media (min-width:960px){.flex.md1{flex-basis:8.333333333333332%;flex-grow:0;max-width:8.333333333333332%}.flex.order-md1{order:1}.flex.md2{flex-basis:16.666666666666664%;flex-grow:0;max-width:16.666666666666664%}.flex.order-md2{order:2}.flex.md3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-md3{order:3}.flex.md4{flex-basis:33.33333333333333%;flex-grow:0;max-width:33.33333333333333%}.flex.order-md4{order:4}.flex.md5{flex-basis:41.66666666666667%;flex-grow:0;max-width:41.66666666666667%}.flex.order-md5{order:5}.flex.md6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-md6{order:6}.flex.md7{flex-basis:58.333333333333336%;flex-grow:0;max-width:58.333333333333336%}.flex.order-md7{order:7}.flex.md8{flex-basis:66.66666666666666%;flex-grow:0;max-width:66.66666666666666%}.flex.order-md8{order:8}.flex.md9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-md9{order:9}.flex.md10{flex-basis:83.33333333333334%;flex-grow:0;max-width:83.33333333333334%}.flex.order-md10{order:10}.flex.md11{flex-basis:91.66666666666666%;flex-grow:0;max-width:91.66666666666666%}.flex.order-md11{order:11}.flex.md12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-md12{order:12}.flex.offset-md0{margin-left:0}.flex.offset-md1{margin-left:8.333333333333332%}.flex.offset-md2{margin-left:16.666666666666664%}.flex.offset-md3{margin-left:25%}.flex.offset-md4{margin-left:33.33333333333333%}.flex.offset-md5{margin-left:41.66666666666667%}.flex.offset-md6{margin-left:50%}.flex.offset-md7{margin-left:58.333333333333336%}.flex.offset-md8{margin-left:66.66666666666666%}.flex.offset-md9{margin-left:75%}.flex.offset-md10{margin-left:83.33333333333334%}.flex.offset-md11{margin-left:91.66666666666666%}.flex.offset-md12{margin-left:100%}}@media (min-width:1264px){.flex.lg1{flex-basis:8.333333333333332%;flex-grow:0;max-width:8.333333333333332%}.flex.order-lg1{order:1}.flex.lg2{flex-basis:16.666666666666664%;flex-grow:0;max-width:16.666666666666664%}.flex.order-lg2{order:2}.flex.lg3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-lg3{order:3}.flex.lg4{flex-basis:33.33333333333333%;flex-grow:0;max-width:33.33333333333333%}.flex.order-lg4{order:4}.flex.lg5{flex-basis:41.66666666666667%;flex-grow:0;max-width:41.66666666666667%}.flex.order-lg5{order:5}.flex.lg6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-lg6{order:6}.flex.lg7{flex-basis:58.333333333333336%;flex-grow:0;max-width:58.333333333333336%}.flex.order-lg7{order:7}.flex.lg8{flex-basis:66.66666666666666%;flex-grow:0;max-width:66.66666666666666%}.flex.order-lg8{order:8}.flex.lg9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-lg9{order:9}.flex.lg10{flex-basis:83.33333333333334%;flex-grow:0;max-width:83.33333333333334%}.flex.order-lg10{order:10}.flex.lg11{flex-basis:91.66666666666666%;flex-grow:0;max-width:91.66666666666666%}.flex.order-lg11{order:11}.flex.lg12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-lg12{order:12}.flex.offset-lg0{margin-left:0}.flex.offset-lg1{margin-left:8.333333333333332%}.flex.offset-lg2{margin-left:16.666666666666664%}.flex.offset-lg3{margin-left:25%}.flex.offset-lg4{margin-left:33.33333333333333%}.flex.offset-lg5{margin-left:41.66666666666667%}.flex.offset-lg6{margin-left:50%}.flex.offset-lg7{margin-left:58.333333333333336%}.flex.offset-lg8{margin-left:66.66666666666666%}.flex.offset-lg9{margin-left:75%}.flex.offset-lg10{margin-left:83.33333333333334%}.flex.offset-lg11{margin-left:91.66666666666666%}.flex.offset-lg12{margin-left:100%}}@media (min-width:1904px){.flex.xl1{flex-basis:8.333333333333332%;flex-grow:0;max-width:8.333333333333332%}.flex.order-xl1{order:1}.flex.xl2{flex-basis:16.666666666666664%;flex-grow:0;max-width:16.666666666666664%}.flex.order-xl2{order:2}.flex.xl3{flex-basis:25%;flex-grow:0;max-width:25%}.flex.order-xl3{order:3}.flex.xl4{flex-basis:33.33333333333333%;flex-grow:0;max-width:33.33333333333333%}.flex.order-xl4{order:4}.flex.xl5{flex-basis:41.66666666666667%;flex-grow:0;max-width:41.66666666666667%}.flex.order-xl5{order:5}.flex.xl6{flex-basis:50%;flex-grow:0;max-width:50%}.flex.order-xl6{order:6}.flex.xl7{flex-basis:58.333333333333336%;flex-grow:0;max-width:58.333333333333336%}.flex.order-xl7{order:7}.flex.xl8{flex-basis:66.66666666666666%;flex-grow:0;max-width:66.66666666666666%}.flex.order-xl8{order:8}.flex.xl9{flex-basis:75%;flex-grow:0;max-width:75%}.flex.order-xl9{order:9}.flex.xl10{flex-basis:83.33333333333334%;flex-grow:0;max-width:83.33333333333334%}.flex.order-xl10{order:10}.flex.xl11{flex-basis:91.66666666666666%;flex-grow:0;max-width:91.66666666666666%}.flex.order-xl11{order:11}.flex.xl12{flex-basis:100%;flex-grow:0;max-width:100%}.flex.order-xl12{order:12}.flex.offset-xl0{margin-left:0}.flex.offset-xl1{margin-left:8.333333333333332%}.flex.offset-xl2{margin-left:16.666666666666664%}.flex.offset-xl3{margin-left:25%}.flex.offset-xl4{margin-left:33.33333333333333%}.flex.offset-xl5{margin-left:41.66666666666667%}.flex.offset-xl6{margin-left:50%}.flex.offset-xl7{margin-left:58.333333333333336%}.flex.offset-xl8{margin-left:66.66666666666666%}.flex.offset-xl9{margin-left:75%}.flex.offset-xl10{margin-left:83.33333333333334%}.flex.offset-xl11{margin-left:91.66666666666666%}.flex.offset-xl12{margin-left:100%}}.child-flex>*,.flex{flex:1 1 auto;max-width:100%}.align-start{align-items:flex-start}.align-end{align-items:flex-end}.align-center{align-items:center}.align-baseline{align-items:baseline}.align-self-start{align-self:flex-start}.align-self-end{align-self:flex-end}.align-self-center{align-self:center}.align-self-baseline{align-self:baseline}.align-content-start{align-content:flex-start}.align-content-end{align-content:flex-end}.align-content-center{align-content:center}.align-content-space-between{align-content:space-between}.align-content-space-around{align-content:space-around}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-space-around{justify-content:space-around}.justify-space-between{justify-content:space-between}.justify-self-start{justify-self:flex-start}.justify-self-end{justify-self:flex-end}.justify-self-center{justify-self:center}.justify-self-baseline{justify-self:baseline}.grow,.spacer{flex-grow:1!important}.grow{flex-shrink:0!important}.shrink{flex-grow:0!important;flex-shrink:1!important}.scroll-y{overflow-y:auto}.fill-height{height:100%}.hide-overflow{overflow:hidden!important}.show-overflow{overflow:visible!important}.ellipsis,.no-wrap{white-space:nowrap}.ellipsis{overflow:hidden;text-overflow:ellipsis}.d-flex{display:flex!important}.d-inline-flex{display:inline-flex!important}.d-flex>*,.d-inline-flex>*{flex:1 1 auto!important}.d-block{display:block!important}.d-inline-block{display:inline-block!important}.d-inline{display:inline!important}.d-none{display:none!important}",""])},function(e,t,n){var content=n(210);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("56f7b131",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".v-content{transition:none;display:flex;flex:1 0 auto;max-width:100%}.v-content[data-booted=true]{transition:.2s cubic-bezier(.4,0,.2,1)}.v-content__wrap{flex:1 1 auto;max-width:100%;position:relative}@-moz-document url-prefix(){@media print{.v-content{display:block}}}",""])},,,function(e,t,n){var content=n(214);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("0643c60b",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".theme--light.v-footer{background:#f5f5f5;color:rgba(0,0,0,.87)}.theme--dark.v-footer{background:#212121;color:#fff}.v-footer{align-items:center;display:flex;flex:0 1 auto!important;min-height:36px;transition:.2s cubic-bezier(.4,0,.2,1)}.v-footer--absolute,.v-footer--fixed{bottom:0;left:0;width:100%;z-index:3}.v-footer--inset{z-index:2}.v-footer--absolute{position:absolute}.v-footer--fixed{position:fixed}",""])},,,,,,function(e,t,n){var content=n(221);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("c74c695e",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'.theme--light.v-icon{color:rgba(0,0,0,.54)}.theme--light.v-icon.v-icon--disabled{color:rgba(0,0,0,.38)!important}.theme--dark.v-icon{color:#fff}.theme--dark.v-icon.v-icon--disabled{color:hsla(0,0%,100%,.5)!important}.v-icon{align-items:center;display:inline-flex;font-feature-settings:"liga";font-size:24px;justify-content:center;line-height:1;transition:.3s cubic-bezier(.25,.8,.5,1);vertical-align:text-bottom}.v-icon--right{margin-left:16px}.v-icon--left{margin-right:16px}.v-icon.v-icon.v-icon--link{cursor:pointer}.v-icon--disabled{pointer-events:none;opacity:.6}.v-icon--is-component{height:24px}',""])},function(e,t,n){var content=n(223);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("305b2b71",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'.theme--light.v-list{background:#fff;color:rgba(0,0,0,.87)}.theme--light.v-list .v-list--disabled{color:rgba(0,0,0,.38)}.theme--light.v-list .v-list__tile__sub-title{color:rgba(0,0,0,.54)}.theme--light.v-list .v-list__tile__mask{color:rgba(0,0,0,.38);background:#eee}.theme--light.v-list .v-list__group__header:hover,.theme--light.v-list .v-list__tile--highlighted,.theme--light.v-list .v-list__tile--link:hover{background:rgba(0,0,0,.04)}.theme--light.v-list .v-list__group--active:after,.theme--light.v-list .v-list__group--active:before{background:rgba(0,0,0,.12)}.theme--light.v-list .v-list__group--disabled .v-list__group__header__prepend-icon .v-icon,.theme--light.v-list .v-list__group--disabled .v-list__tile{color:rgba(0,0,0,.38)!important}.theme--dark.v-list{background:#424242;color:#fff}.theme--dark.v-list .v-list--disabled{color:hsla(0,0%,100%,.5)}.theme--dark.v-list .v-list__tile__sub-title{color:hsla(0,0%,100%,.7)}.theme--dark.v-list .v-list__tile__mask{color:hsla(0,0%,100%,.5);background:#494949}.theme--dark.v-list .v-list__group__header:hover,.theme--dark.v-list .v-list__tile--highlighted,.theme--dark.v-list .v-list__tile--link:hover{background:hsla(0,0%,100%,.08)}.theme--dark.v-list .v-list__group--active:after,.theme--dark.v-list .v-list__group--active:before{background:hsla(0,0%,100%,.12)}.theme--dark.v-list .v-list__group--disabled .v-list__group__header__prepend-icon .v-icon,.theme--dark.v-list .v-list__group--disabled .v-list__tile{color:hsla(0,0%,100%,.5)!important}.application--is-rtl .v-list__tile__content,.application--is-rtl .v-list__tile__title{text-align:right}.v-list{list-style-type:none;padding:8px 0;transition:.3s cubic-bezier(.25,.8,.5,1)}.v-list>div{transition:inherit}.v-list__tile{align-items:center;color:inherit;display:flex;font-size:16px;font-weight:400;height:48px;margin:0;padding:0 16px;position:relative;text-decoration:none;transition:background .3s cubic-bezier(.25,.8,.5,1)}.v-list__tile--link{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-list__tile__action,.v-list__tile__content{height:100%}.v-list__tile__sub-title,.v-list__tile__title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;transition:.3s cubic-bezier(.25,.8,.5,1);width:100%}.v-list__tile__title{height:24px;line-height:24px;position:relative;text-align:left}.v-list__tile__sub-title{font-size:14px}.v-list__tile__action,.v-list__tile__avatar{display:flex;justify-content:flex-start;min-width:56px}.v-list__tile__action{align-items:center}.v-list__tile__action .v-btn{padding:0;margin:0}.v-list__tile__action .v-btn--icon{margin:-6px}.v-list__tile__action .v-radio.v-radio{margin:0}.v-list__tile__action .v-input--selection-controls{padding:0;margin:0}.v-list__tile__action .v-input--selection-controls .v-messages{display:none}.v-list__tile__action .v-input--selection-controls .v-input__slot{margin:0}.v-list__tile__action-text{color:#9e9e9e;font-size:12px}.v-list__tile__action--stack{align-items:flex-end;justify-content:space-between;padding-top:8px;padding-bottom:8px;white-space:nowrap;flex-direction:column}.v-list__tile__content{text-align:left;flex:1 1 auto;overflow:hidden;display:flex;align-items:flex-start;justify-content:center;flex-direction:column}.v-list__tile__content~.v-list__tile__action:not(.v-list__tile__action--stack),.v-list__tile__content~.v-list__tile__avatar{justify-content:flex-end}.v-list__tile--active .v-list__tile__action:first-of-type .v-icon{color:inherit}.v-list__tile--avatar{height:56px}.v-list--dense{padding-top:4px;padding-bottom:4px}.v-list--dense .v-subheader{font-size:13px;height:40px}.v-list--dense .v-list__group .v-subheader{height:40px}.v-list--dense .v-list__tile{font-size:13px}.v-list--dense .v-list__tile--avatar{height:48px}.v-list--dense .v-list__tile:not(.v-list__tile--avatar){height:40px}.v-list--dense .v-list__tile .v-icon{font-size:22px}.v-list--dense .v-list__tile__sub-title{font-size:13px}.v-list--disabled{pointer-events:none}.v-list--two-line .v-list__tile{height:72px}.v-list--two-line.v-list--dense .v-list__tile{height:60px}.v-list--three-line .v-list__tile{height:88px}.v-list--three-line .v-list__tile__avatar{margin-top:-18px}.v-list--three-line .v-list__tile__sub-title{white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box}.v-list--three-line.v-list--dense .v-list__tile{height:76px}.v-list>.v-list__group:before{top:0}.v-list>.v-list__group:before .v-list__tile__avatar{margin-top:-14px}.v-list__group{padding:0;position:relative;transition:inherit}.v-list__group:after,.v-list__group:before{content:"";height:1px;left:0;position:absolute;transition:.3s cubic-bezier(.25,.8,.5,1);width:100%}.v-list__group--active~.v-list__group:before{display:none}.v-list__group__header{align-items:center;cursor:pointer;display:flex;list-style-type:none}.v-list__group__header>div:not(.v-list__group__header__prepend-icon):not(.v-list__group__header__append-icon){flex:1 1 auto;overflow:hidden}.v-list__group__header .v-list__group__header__append-icon,.v-list__group__header .v-list__group__header__prepend-icon{padding:0 16px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-list__group__header--sub-group{align-items:center;display:flex}.v-list__group__header--sub-group div .v-list__tile{padding-left:0}.v-list__group__header--sub-group .v-list__group__header__prepend-icon{padding:0 0 0 40px;margin-right:8px}.v-list__group__header .v-list__group__header__prepend-icon{display:flex;justify-content:flex-start;min-width:56px}.v-list__group__header--active .v-list__group__header__append-icon .v-icon{transform:rotate(-180deg)}.v-list__group__header--active .v-list__group__header__prepend-icon .v-icon{color:inherit}.v-list__group__header--active.v-list__group__header--sub-group .v-list__group__header__prepend-icon .v-icon{transform:rotate(-180deg)}.v-list__group__items{position:relative;padding:0;transition:inherit}.v-list__group__items>div{display:block}.v-list__group__items--no-action .v-list__tile{padding-left:72px}.v-list__group--disabled{pointer-events:none}.v-list--subheader{padding-top:0}',""])},function(e,t,n){var content=n(225);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("2ae77351",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".v-avatar{align-items:center;border-radius:50%;display:inline-flex;justify-content:center;position:relative;text-align:center;vertical-align:middle}.v-avatar .v-icon,.v-avatar .v-image,.v-avatar img{border-radius:50%;display:inline-flex;height:inherit;width:inherit}.v-avatar--tile,.v-avatar--tile .v-icon,.v-avatar--tile .v-image,.v-avatar--tile img{border-radius:0}",""])},function(e,t,n){var content=n(227);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("5152fd51",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".theme--light.v-navigation-drawer{background-color:#fff}.theme--light.v-navigation-drawer:not(.v-navigation-drawer--floating) .v-navigation-drawer__border{background-color:rgba(0,0,0,.12)}.theme--light.v-navigation-drawer .v-divider{border-color:rgba(0,0,0,.12)}.theme--dark.v-navigation-drawer{background-color:#424242}.theme--dark.v-navigation-drawer:not(.v-navigation-drawer--floating) .v-navigation-drawer__border{background-color:hsla(0,0%,100%,.12)}.theme--dark.v-navigation-drawer .v-divider{border-color:hsla(0,0%,100%,.12)}.v-navigation-drawer{transition:none;display:block;left:0;max-width:100%;overflow-y:auto;overflow-x:hidden;pointer-events:auto;top:0;will-change:transform;z-index:3;-webkit-overflow-scrolling:touch}.v-navigation-drawer[data-booted=true]{transition:.2s cubic-bezier(.4,0,.2,1);transition-property:transform,width}.v-navigation-drawer__border{position:absolute;right:0;top:0;height:100%;width:1px}.v-navigation-drawer.v-navigation-drawer--right:after{left:0;right:auto}.v-navigation-drawer--right{left:auto;right:0}.v-navigation-drawer--right>.v-navigation-drawer__border{right:auto;left:0}.v-navigation-drawer--absolute{position:absolute}.v-navigation-drawer--fixed{position:fixed}.v-navigation-drawer--floating:after{display:none}.v-navigation-drawer--mini-variant{overflow:hidden}.v-navigation-drawer--mini-variant .v-list__group__header__prepend-icon{flex:1 0 auto;justify-content:center;width:100%}.v-navigation-drawer--mini-variant .v-list__tile__action,.v-navigation-drawer--mini-variant .v-list__tile__avatar{justify-content:center;min-width:48px}.v-navigation-drawer--mini-variant .v-list__tile:after,.v-navigation-drawer--mini-variant .v-list__tile__content{opacity:0}.v-navigation-drawer--mini-variant .v-divider,.v-navigation-drawer--mini-variant .v-list--group,.v-navigation-drawer--mini-variant .v-subheader{display:none!important}.v-navigation-drawer--is-mobile,.v-navigation-drawer--temporary{z-index:6}.v-navigation-drawer--is-mobile:not(.v-navigation-drawer--close),.v-navigation-drawer--temporary:not(.v-navigation-drawer--close){box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.v-navigation-drawer .v-list{background:inherit}.v-navigation-drawer>.v-list .v-list__tile{transition:none;font-weight:500}.v-navigation-drawer>.v-list .v-list__tile--active .v-list__tile__title{color:inherit}.v-navigation-drawer>.v-list .v-list--group .v-list__tile{font-weight:400}.v-navigation-drawer>.v-list .v-list--group__header--active:after{background:transparent}.v-navigation-drawer>.v-list:not(.v-list--dense) .v-list__tile{font-size:14px}",""])},function(e,t,n){var content=n(229);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("14dc9211",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'.v-overlay{position:fixed;top:0;left:0;right:0;bottom:0;pointer-events:none;transition:.3s cubic-bezier(.25,.8,.5,1);z-index:5}.v-overlay--absolute{position:absolute}.v-overlay:before{background-color:#212121;bottom:0;content:"";height:100%;left:0;opacity:0;position:absolute;right:0;top:0;transition:inherit;transition-delay:.15s;width:100%}.v-overlay--active{pointer-events:auto;touch-action:none}.v-overlay--active:before{opacity:.46}',""])},function(e,t,n){var content=n(231);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("e170b51e",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".theme--light.v-toolbar{background-color:#f5f5f5;color:rgba(0,0,0,.87)}.theme--dark.v-toolbar{background-color:#212121;color:#fff}.application--is-rtl .v-toolbar__title:not(:first-child){margin-left:0;margin-right:20px}.v-toolbar{transition:none;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12);position:relative;width:100%;will-change:padding-left,padding-right}.v-toolbar[data-booted=true]{transition:.2s cubic-bezier(.4,0,.2,1)}.v-toolbar .v-text-field--box,.v-toolbar .v-text-field--enclosed{margin:0}.v-toolbar .v-text-field--box .v-text-field__details,.v-toolbar .v-text-field--enclosed .v-text-field__details{display:none}.v-toolbar .v-tabs{width:100%}.v-toolbar__title{font-size:20px;font-weight:500;letter-spacing:.02em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.v-toolbar__title:not(:first-child){margin-left:20px}.v-toolbar__content,.v-toolbar__extension{align-items:center;display:flex;padding:0 24px}@media only screen and (max-width:959px){.v-toolbar__content,.v-toolbar__extension{padding:0 16px}}.v-toolbar__content .v-btn--icon,.v-toolbar__extension .v-btn--icon{margin:6px}.v-toolbar__content>:first-child,.v-toolbar__extension>:first-child{margin-left:0}.v-toolbar__content>:first-child.v-btn--icon,.v-toolbar__extension>:first-child.v-btn--icon{margin-left:-6px}.v-toolbar__content>:first-child.v-menu .v-menu__activator .v-btn,.v-toolbar__content>:first-child.v-tooltip span .v-btn,.v-toolbar__extension>:first-child.v-menu .v-menu__activator .v-btn,.v-toolbar__extension>:first-child.v-tooltip span .v-btn{margin-left:0}.v-toolbar__content>:first-child.v-menu .v-menu__activator .v-btn--icon,.v-toolbar__content>:first-child.v-tooltip span .v-btn--icon,.v-toolbar__extension>:first-child.v-menu .v-menu__activator .v-btn--icon,.v-toolbar__extension>:first-child.v-tooltip span .v-btn--icon{margin-left:-6px}.v-toolbar__content>:last-child,.v-toolbar__extension>:last-child{margin-right:0}.v-toolbar__content>:last-child.v-btn--icon,.v-toolbar__extension>:last-child.v-btn--icon{margin-right:-6px}.v-toolbar__content>:last-child.v-menu .v-menu__activator .v-btn,.v-toolbar__content>:last-child.v-tooltip span .v-btn,.v-toolbar__extension>:last-child.v-menu .v-menu__activator .v-btn,.v-toolbar__extension>:last-child.v-tooltip span .v-btn{margin-right:0}.v-toolbar__content>:last-child.v-menu .v-menu__activator .v-btn--icon,.v-toolbar__content>:last-child.v-tooltip span .v-btn--icon,.v-toolbar__extension>:last-child.v-menu .v-menu__activator .v-btn--icon,.v-toolbar__extension>:last-child.v-tooltip span .v-btn--icon{margin-right:-6px}.v-toolbar__content>.v-list,.v-toolbar__extension>.v-list{flex:1 1 auto;max-height:100%}.v-toolbar__content>.v-list:first-child,.v-toolbar__extension>.v-list:first-child{margin-left:-24px}@media only screen and (max-width:959px){.v-toolbar__content>.v-list:first-child,.v-toolbar__extension>.v-list:first-child{margin-left:-16px}}.v-toolbar__content>.v-list:last-child,.v-toolbar__extension>.v-list:last-child{margin-right:-24px}@media only screen and (max-width:959px){.v-toolbar__content>.v-list:last-child,.v-toolbar__extension>.v-list:last-child{margin-right:-16px}}.v-toolbar__extension>.v-toolbar__title{margin-left:72px}.v-toolbar__items{display:flex;height:inherit;max-width:100%;padding:0}.v-toolbar__items .v-btn{align-items:center;align-self:center}.v-toolbar__items .v-tooltip,.v-toolbar__items .v-tooltip>span{height:inherit}.v-toolbar__items .v-btn:not(.v-btn--floating):not(.v-btn--icon),.v-toolbar__items .v-menu,.v-toolbar__items .v-menu__activator{height:inherit;margin:0}.v-toolbar .v-btn-toggle,.v-toolbar .v-overflow-btn{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.v-toolbar .v-input{margin:0}.v-toolbar .v-overflow-btn .v-input__control:before,.v-toolbar .v-overflow-btn .v-input__slot:before{display:none}.v-toolbar--card{border-radius:2px 2px 0 0;box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.v-toolbar--fixed{position:fixed;z-index:2}.v-toolbar--absolute,.v-toolbar--fixed{top:0;left:0}.v-toolbar--absolute{position:absolute;z-index:2}.v-toolbar--floating{display:inline-flex;margin:16px;width:auto}.v-toolbar--clipped{z-index:3}",""])},,function(e,t,n){var content=n(234);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("7c593b9e",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(9)(!1)).push([e.i,'.v-ripple__container{border-radius:inherit;width:100%;height:100%;z-index:0;contain:strict}.v-ripple__animation,.v-ripple__container{color:inherit;position:absolute;left:0;top:0;overflow:hidden;pointer-events:none}.v-ripple__animation{border-radius:50%;background:currentColor;opacity:0;will-change:transform,opacity}.v-ripple__animation--enter{transition:none}.v-ripple__animation--in{transition:transform .25s cubic-bezier(.4,0,.2,1),opacity .1s cubic-bezier(.4,0,.2,1)}.v-ripple__animation--out{transition:opacity .3s cubic-bezier(.4,0,.2,1)}.theme--light.v-btn{color:rgba(0,0,0,.87)}.theme--light.v-btn.v-btn--disabled,.theme--light.v-btn.v-btn--disabled .v-btn__loading,.theme--light.v-btn.v-btn--disabled .v-icon{color:rgba(0,0,0,.26)!important}.theme--light.v-btn.v-btn--disabled:not(.v-btn--icon):not(.v-btn--flat):not(.v-btn--outline){background-color:rgba(0,0,0,.12)!important}.theme--light.v-btn:not(.v-btn--icon):not(.v-btn--flat){background-color:#f5f5f5}.theme--dark.v-btn{color:#fff}.theme--dark.v-btn.v-btn--disabled,.theme--dark.v-btn.v-btn--disabled .v-btn__loading,.theme--dark.v-btn.v-btn--disabled .v-icon{color:hsla(0,0%,100%,.3)!important}.theme--dark.v-btn.v-btn--disabled:not(.v-btn--icon):not(.v-btn--flat):not(.v-btn--outline){background-color:hsla(0,0%,100%,.12)!important}.theme--dark.v-btn:not(.v-btn--icon):not(.v-btn--flat){background-color:#212121}.v-btn{align-items:center;border-radius:2px;display:inline-flex;height:36px;flex:0 0 auto;font-size:14px;font-weight:500;justify-content:center;margin:6px 8px;min-width:88px;outline:0;text-transform:uppercase;text-decoration:none;transition:.3s cubic-bezier(.25,.8,.5,1),color 1ms;position:relative;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.v-btn:before{border-radius:inherit;color:inherit;content:"";position:absolute;left:0;top:0;height:100%;opacity:.12;transition:.3s cubic-bezier(.25,.8,.5,1);width:100%}.v-btn{padding:0 16px}.v-btn--active,.v-btn:focus,.v-btn:hover{position:relative}.v-btn--active:before,.v-btn:focus:before,.v-btn:hover:before{background-color:currentColor}@media (hover:none){.v-btn:hover:before{background-color:transparent}}.v-btn__content{align-items:center;border-radius:inherit;color:inherit;display:flex;flex:1 0 auto;justify-content:center;margin:0 auto;position:relative;transition:.3s cubic-bezier(.25,.8,.5,1);white-space:nowrap;width:inherit}.v-btn--small{font-size:13px;height:28px;padding:0 8px}.v-btn--large{font-size:15px;height:44px;padding:0 32px}.v-btn .v-btn__content .v-icon{color:inherit}.v-btn:not(.v-btn--depressed):not(.v-btn--flat){will-change:box-shadow;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.v-btn:not(.v-btn--depressed):not(.v-btn--flat):active{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.v-btn--icon{background:transparent;box-shadow:none!important;border-radius:50%;justify-content:center;min-width:0;width:36px}.v-btn--icon.v-btn--small{width:28px}.v-btn--icon.v-btn--large{width:44px}.v-btn--floating,.v-btn--icon:before{border-radius:50%}.v-btn--floating{min-width:0;height:56px;width:56px;padding:0}.v-btn--floating.v-btn--absolute,.v-btn--floating.v-btn--fixed{z-index:4}.v-btn--floating:not(.v-btn--depressed):not(.v-btn--flat){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.v-btn--floating:not(.v-btn--depressed):not(.v-btn--flat):active{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.v-btn--floating .v-btn__content{flex:1 1 auto;margin:0;height:100%}.v-btn--floating:after{border-radius:50%}.v-btn--floating .v-btn__content>:not(:only-child){transition:.3s cubic-bezier(.25,.8,.5,1)}.v-btn--floating .v-btn__content>:not(:only-child):first-child{opacity:1}.v-btn--floating .v-btn__content>:not(:only-child):last-child{opacity:0;transform:rotate(-45deg)}.v-btn--floating .v-btn__content>:not(:only-child):first-child,.v-btn--floating .v-btn__content>:not(:only-child):last-child{-webkit-backface-visibility:hidden;position:absolute;left:0;top:0}.v-btn--floating.v-btn--active .v-btn__content>:not(:only-child):first-child{opacity:0;transform:rotate(45deg)}.v-btn--floating.v-btn--active .v-btn__content>:not(:only-child):last-child{opacity:1;transform:rotate(0)}.v-btn--floating .v-icon{height:inherit;width:inherit}.v-btn--floating.v-btn--small{height:40px;width:40px}.v-btn--floating.v-btn--small .v-icon{font-size:18px}.v-btn--floating.v-btn--large{height:72px;width:72px}.v-btn--floating.v-btn--large .v-icon{font-size:30px}.v-btn--reverse .v-btn__content{flex-direction:row-reverse}.v-btn--reverse.v-btn--column .v-btn__content{flex-direction:column-reverse}.v-btn--absolute,.v-btn--fixed{margin:0}.v-btn.v-btn--absolute{position:absolute}.v-btn.v-btn--fixed{position:fixed}.v-btn--top:not(.v-btn--absolute){top:16px}.v-btn--top.v-btn--absolute{top:-28px}.v-btn--top.v-btn--absolute.v-btn--small{top:-20px}.v-btn--top.v-btn--absolute.v-btn--large{top:-36px}.v-btn--bottom:not(.v-btn--absolute){bottom:16px}.v-btn--bottom.v-btn--absolute{bottom:-28px}.v-btn--bottom.v-btn--absolute.v-btn--small{bottom:-20px}.v-btn--bottom.v-btn--absolute.v-btn--large{bottom:-36px}.v-btn--left{left:16px}.v-btn--right{right:16px}.v-btn.v-btn--disabled{box-shadow:none!important;pointer-events:none}.v-btn:not(.v-btn--disabled):not(.v-btn--floating):not(.v-btn--icon) .v-btn__content .v-icon{transition:none}.v-btn--icon{padding:0}.v-btn--loader{pointer-events:none}.v-btn--loader .v-btn__content{opacity:0}.v-btn__loading{align-items:center;display:flex;height:100%;justify-content:center;left:0;position:absolute;top:0;width:100%}.v-btn__loading .v-icon--left{margin-right:1rem;line-height:inherit}.v-btn__loading .v-icon--right{margin-left:1rem;line-height:inherit}.v-btn.v-btn--outline{border:1px solid;background:transparent!important;box-shadow:none}.v-btn.v-btn--outline:hover{box-shadow:none}.v-btn--block{display:flex;flex:1;margin:6px 0;width:100%}.v-btn--round,.v-btn--round:after{border-radius:28px}.v-btn:not(.v-btn--outline).accent,.v-btn:not(.v-btn--outline).error,.v-btn:not(.v-btn--outline).info,.v-btn:not(.v-btn--outline).primary,.v-btn:not(.v-btn--outline).secondary,.v-btn:not(.v-btn--outline).success,.v-btn:not(.v-btn--outline).warning{color:#fff}',""])},function(e,t,n){var content=n(236);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("605a8fb1",content,!0,{sourceMap:!1})},function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".v-progress-circular{position:relative;display:inline-flex;vertical-align:middle}.v-progress-circular svg{width:100%;height:100%;margin:auto;position:absolute;top:0;bottom:0;left:0;right:0;z-index:0}.v-progress-circular--indeterminate svg{-webkit-animation:progress-circular-rotate 1.4s linear infinite;animation:progress-circular-rotate 1.4s linear infinite;transform-origin:center center;transition:all .2s ease-in-out}.v-progress-circular--indeterminate .v-progress-circular__overlay{-webkit-animation:progress-circular-dash 1.4s ease-in-out infinite;animation:progress-circular-dash 1.4s ease-in-out infinite;stroke-linecap:round;stroke-dasharray:80,200;stroke-dashoffset:0px}.v-progress-circular__underlay{stroke:rgba(0,0,0,.1);z-index:1}.v-progress-circular__overlay{stroke:currentColor;z-index:2;transition:all .6s ease-in-out}.v-progress-circular__info{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}@-webkit-keyframes progress-circular-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0px}50%{stroke-dasharray:100,200;stroke-dashoffset:-15px}to{stroke-dasharray:100,200;stroke-dashoffset:-125px}}@keyframes progress-circular-dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0px}50%{stroke-dasharray:100,200;stroke-dashoffset:-15px}to{stroke-dasharray:100,200;stroke-dashoffset:-125px}}@-webkit-keyframes progress-circular-rotate{to{transform:rotate(1turn)}}@keyframes progress-circular-rotate{to{transform:rotate(1turn)}}",""])},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(256)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,o,c=(r=n(150))&&"object"==typeof r&&"default"in r?r.default:r,l=n(152),h=n(105),f=n(151),d=n(257),m=c.SDK_VERSION,v=new l.Logger("@firebase/firestore");function y(){return v.logLevel===l.LogLevel.DEBUG?o.DEBUG:v.logLevel===l.LogLevel.SILENT?o.SILENT:o.ERROR}function w(e){switch(e){case o.DEBUG:v.logLevel=l.LogLevel.DEBUG;break;case o.ERROR:v.logLevel=l.LogLevel.ERROR;break;case o.SILENT:v.logLevel=l.LogLevel.SILENT;break;default:v.error("Firestore ("+m+"): Invalid value passed to `setLogLevel`")}}function _(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(v.logLevel<=l.LogLevel.DEBUG){var o=n.map(C);v.debug.apply(v,["Firestore ("+m+") ["+e+"]: "+t].concat(o))}}function S(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(v.logLevel<=l.LogLevel.ERROR){var r=t.map(C);v.error.apply(v,["Firestore ("+m+"): "+e].concat(r))}}function C(e){if("string"==typeof e)return e;var t=E.getPlatform();try{return t.formatJSON(e)}catch(t){return e}}function x(e){var t="FIRESTORE ("+m+") INTERNAL ASSERTION FAILED: "+e;throw S(t),new Error(t)}function T(e,t){e||x(t)}!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(o||(o={}));var E=function(){function e(){}return e.setPlatform=function(t){e.platform&&x("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||x("Platform not set"),e.platform},e}();function I(){return E.getPlatform().emptyByteString}var D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},A=function(e){function t(code,t){var n=e.call(this,t)||this;return n.code=code,n.message=t,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}return h.__extends(t,e),t}(Error);function R(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new A(D.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function O(e,t){return void 0!==e?e:t}function N(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function P(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function M(e){for(var t in T(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function L(e,t){if(0!==t.length)throw new A(D.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+te(t.length,"argument")+".")}function j(e,t,n){if(t.length!==n)throw new A(D.INVALID_ARGUMENT,"Function "+e+"() requires "+te(n,"argument")+", but was called with "+te(t.length,"argument")+".")}function F(e,t,n){if(t.length<n)throw new A(D.INVALID_ARGUMENT,"Function "+e+"() requires at least "+te(n,"argument")+", but was called with "+te(t.length,"argument")+".")}function B(e,t,n,r){if(t.length<n||t.length>r)throw new A(D.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+te(t.length,"argument")+".")}function U(e,t,n,r){H(e,t,ee(n)+" argument",r)}function V(e,t,n,r){void 0!==r&&U(e,t,n,r)}function z(e,t,n,r){H(e,t,n+" option",r)}function W(e,t,n,r){void 0!==r&&z(e,t,n,r)}function G(e,t,n,r,o){void 0!==r&&function(e,t,n,r,o){if(!(r instanceof Array))throw new A(D.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+Y(r));for(var i=0;i<r.length;++i)if(!o(r[i]))throw new A(D.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+i+" was: "+Y(r[i]))}(e,t,n,r,o)}function Q(e,t,n,input,r){void 0!==input&&function(e,t,n,input,r){for(var o=[],c=0,l=r;c<l.length;c++){var h=l[c];if(h===input)return;o.push(Y(h))}var f=Y(input);throw new A(D.INVALID_ARGUMENT,"Invalid value "+f+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,input,r)}function K(e,t,n,r){if(!t.some(function(element){return element===r}))throw new A(D.INVALID_ARGUMENT,"Invalid value "+Y(r)+" provided to function "+e+"() for its "+ee(n)+" argument. Acceptable values: "+t.join(", "))}function H(e,t,n,input){if(!("object"===t?$(input):"non-empty string"===t?"string"==typeof input&&""!==input:typeof input===t)){var r=Y(input);throw new A(D.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+r)}}function $(input){return"object"==typeof input&&null!==input&&(Object.getPrototypeOf(input)===Object.prototype||null===Object.getPrototypeOf(input))}function Y(input){if(void 0===input)return"undefined";if(null===input)return"null";if("string"==typeof input)return input.length>20&&(input=input.substring(0,20)+"..."),JSON.stringify(input);if("number"==typeof input||"boolean"==typeof input)return""+input;if("object"==typeof input){if(input instanceof Array)return"an array";var e=function(input){if(input.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(input.constructor.toString());if(e&&e.length>1)return e[1]}return null}(input);return e?"a custom "+e+" object":"an object"}return"function"==typeof input?"a function":x("Unknown wrong type: "+typeof input)}function X(e,t,n){if(void 0===n)throw new A(D.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+ee(t)+" argument, but it was undefined.")}function J(e,t,n){P(t,function(t,r){if(n.indexOf(t)<0)throw new A(D.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))})}function Z(e,t,n,r){var o=Y(r);return new A(D.INVALID_ARGUMENT,"Function "+e+"() requires its "+ee(n)+" argument to be a "+t+", but it was: "+o)}function ee(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function te(e,t){return e+" "+t+(1===e?"":"s")}var ne=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",i=0;i<20;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return T(20===t.length,"Invalid auto ID: "+t),t},e}();function re(e,t){return e<t?-1:e>t?1:0}function ie(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(!e[i].isEqual(t[i]))return!1;return!0}function oe(s){return s+"\0"}function ae(){if("undefined"==typeof Uint8Array)throw new A(D.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function se(){if(!E.getPlatform().base64Available)throw new A(D.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ce,ue=function(){function e(e){se(),this._binaryString=e}return e.fromBase64String=function(t){j("Blob.fromBase64String",arguments,1),U("Blob.fromBase64String","string",1,t),se();try{var n=E.getPlatform().atob(t);return new e(n)}catch(e){throw new A(D.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},e.fromUint8Array=function(t){if(j("Blob.fromUint8Array",arguments,1),ae(),!(t instanceof Uint8Array))throw Z("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,function(e){return String.fromCharCode(e)}).join("");return new e(n)},e.prototype.toBase64=function(){return j("Blob.toBase64",arguments,0),se(),E.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){j("Blob.toUint8Array",arguments,0),ae();for(var e=new Uint8Array(this._binaryString.length),i=0;i<this._binaryString.length;i++)e[i]=this._binaryString.charCodeAt(i);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return re(this._binaryString,e._binaryString)},e}(),le=R(ue,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),he=function(e,t,n,r,o){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=o},fe="(default)",de=function(){function e(e,t){this.projectId=e,this.database=t||fe}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return this.database===fe},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return re(this.projectId,e.projectId)||re(this.database,e.database)},e}(),pe=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),me=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&x("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&x("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,T(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return T(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return T(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return T(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0},e.prototype.forEach=function(e){for(var i=this.offset,t=this.limit();i<t;i++)e(this.segments[i])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++){var r=e.get(i),o=t.get(i);if(r<o)return-1;if(r>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(path){if(path.indexOf("//")>=0)throw new A(D.INVALID_ARGUMENT,"Invalid path ("+path+"). Paths must not contain // in them.");return new t(path.split("/").filter(function(e){return e.length>0}))},t.EMPTY_PATH=new t([]),t}(me),ge=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return ge.test(e)},t.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(path){for(var e=[],n="",i=0,r=function(){if(0===n.length)throw new A(D.INVALID_ARGUMENT,"Invalid field path ("+path+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;i<path.length;){var c=path[i];if("\\"===c){if(i+1===path.length)throw new A(D.INVALID_ARGUMENT,"Path has trailing escape character: "+path);var l=path[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new A(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+path);n+=l,i+=2}else"`"===c?(o=!o,i++):"."!==c||o?(n+=c,i++):(r(),i++)}if(r(),o)throw new A(D.INVALID_ARGUMENT,"Unterminated ` in path: "+path);return new t(e)},t.EMPTY_PATH=new t([]),t}(me),be=function(){function e(path){this.path=path,T(e.isDocumentKey(path),"Invalid DocumentKey with an odd number of segments: "+path.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===ve.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return ve.comparator(e.path,t.path)},e.isDocumentKey=function(path){return path.length%2==0},e.fromSegments=function(t){return new e(new ve(t.slice()))},e.fromPathString=function(path){return new e(ve.fromString(path))},e.EMPTY=new e(new ve([])),e}(),we=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})};!function(e){e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection"}(ce||(ce={}));var _e=function(){function e(e,t,n,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=o,this.deferred=new we,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return e.createAndSchedule=function(t,n,r,o,c){var l=new e(t,n,Date.now()+r,o,c);return l.start(r),l},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new A(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),Se=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(e){}):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then(function(){return t.operationInProgress=!0,e().catch(function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw S("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return t.operationInProgress=!1,e})});return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),T(t>=0,"Attempted to schedule an operation with a negative delay of "+t),T(!this.containsDelayedOperation(e),"Attempted to schedule multiple operations with timer id "+e+".");var o=_e.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(o),o},e.prototype.verifyNotFailed=function(){this.failure&&x("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){T(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++){if(n[t].timerId===e)return!0}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then(function(){T(e===ce.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort(function(a,b){return a.targetTimeMs-b.targetTimeMs});for(var n=0,r=t.delayedOperations;n<r.length;n++){var o=r[n];if(o.skipDelay(),e!==ce.All&&o.timerId===e)break}return t.drain()})},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);T(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}(),Ce="",xe="",Te="",Ee="";function Ie(path){for(var e="",i=0;i<path.length;i++)e.length>0&&(e=Ae(e)),e=De(path.get(i),e);return Ae(e)}function De(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=Ce+Te;break;case Ce:n+=Ce+Ee;break;default:n+=o}}return n}function Ae(e){return e+Ce+xe}function Re(path){var e=path.length;if(T(e>=2,"Invalid path "+path),2===e)return T(path.charAt(0)===Ce&&path.charAt(1)===xe,"Non-empty path "+path+" had length 2"),ve.EMPTY_PATH;for(var t=e-2,n=[],r="",o=0;o<e;){var c=path.indexOf(Ce,o);switch((c<0||c>t)&&x('Invalid encoded resource path: "'+path+'"'),path.charAt(c+1)){case xe:var l=path.substring(o,c),h=void 0;0===r.length?h=l:(h=r+=l,r=""),n.push(h);break;case Te:r+=path.substring(o,c),r+="\0";break;case Ee:r+=path.substring(o,c+1);break;default:x('Invalid encoded resource path: "'+path+'"')}o=c+2}return new ve(n)}var ke=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new A(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new A(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new A(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new A(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),Oe=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new ke(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new ke(0,0)),e}(),Ne=function(){function e(e,t){this.comparator=e,this.root=t||Me.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Me.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Me.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})},e.prototype.toString=function(){var e=[];return this.inorderTraversal(function(t,n){return e.push(t+":"+n),!1}),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Pe(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Pe(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Pe(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Pe(this.root,e,this.comparator,!0)},e}(),Pe=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var o=1;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){T(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Me=function(){function e(t,n,r,o,c){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=o?o:e.EMPTY,this.right=null!=c?c:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,o,c){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=c?c:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,o=n(e,r.key);return(r=o<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===o?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===n(t,o.key)){if(o.right.isEmpty())return e.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw x("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw x("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw x("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Le=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw x("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw x("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw x("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw x("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw x("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,o){return this},e.prototype.insert=function(e,t,n){return new Me(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();Me.EMPTY=new Le;var je=function(){function e(e){this.comparator=e,this.data=new Ne(this.comparator)}return e.fromMapKeys=function(map){var t=new e(map.comparator);return map.forEach(function(e){t=t.add(e)}),t},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();){if(!e(n.getNext().key))return}},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Fe(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Fe(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var o=n.getNext().key,c=r.getNext().key;if(0!==this.comparator(o,c))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},e.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},e.prototype.copy=function(data){var t=new e(this.comparator);return t.data=data,t},e}(),Fe=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Be=new Ne(be.comparator);function Ue(){return Be}function qe(){return Ue()}var Ve=new Ne(be.comparator);function ze(){return Ve}var We=new Ne(be.comparator);function Ge(){return We}var Qe=new je(be.comparator);function Ke(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Qe,r=0,o=e;r<o.length;r++){var c=o[r];n=n.add(c)}return n}var He=new je(re);function $e(){return He}var Ye=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,T(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&T(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;T(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var c=r[i];t=o.applyToRemoteDocument(t,c)}}return t},e.prototype.applyToLocalView=function(e,t){t&&T(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++){(h=r[n]).key.isEqual(e)&&(t=h.applyToLocalView(t,t,this.localWriteTime))}for(var o=t,c=0,l=this.mutations;c<l.length;c++){var h;(h=l[c]).key.isEqual(e)&&(t=h.applyToLocalView(t,o,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach(function(r){var o=t.applyToLocalView(r.key,e.get(r.key));o&&(n=n.insert(r.key,o))}),n},e.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},Ke())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&ie(this.mutations,e.mutations)&&ie(this.baseMutations,e.baseMutations)},e}(),Xe=function(){function e(e,t,n,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=o}return e.from=function(t,n,r,o){T(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var c=Ge(),l=t.mutations,i=0;i<l.length;i++)c=c.insert(l[i].key,r[i].version);return new e(t,n,r,o,c)},e}(),Je=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&x("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,o){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,o)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,o)}})},e.prototype.toPromise=function(){var e=this;return new Promise(function(t,n){e.next(t,n)})},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(e,n){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.waitFor=function(t){return new e(function(e,n){var r=0,o=0,c=!1;t.forEach(function(element){++r,element.next(function(){++o,c&&o===r&&e()},function(e){return n(e)})}),c=!0,o===r&&e()})},e.or=function(t){for(var p=e.resolve(!1),n=function(t){p=p.next(function(n){return n?e.resolve(n):t()})},r=0,o=t;r<o.length;r++){n(o[r])}return p},e.forEach=function(e,t){var n=this,r=[];return e.forEach(function(e,s){r.push(t.call(n,e,s))}),this.waitFor(r)},e}(),Ze=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,o){return T(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,o)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return it(e).iterate({index:Gt.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=nt(n),at(e).put(t)})},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next(function(n){return n.lastStreamToken=nt(t),at(e).put(n)})},e.prototype.addMutationBatch=function(e,t,n,r){var o=this,c=ot(e),l=it(e);return l.add({}).next(function(h){T("number"==typeof h,"Auto-generated key is not a number");var f=new Ye(h,t,n,r),d=o.serializer.toDbMutationBatch(o.userId,f);o.documentKeysByBatchId[h]=f.keys();for(var m=[],v=0,y=r;v<y.length;v++){var w=y[v],_=Qt.key(o.userId,w.key.path,h);m.push(l.put(d)),m.push(c.put(_,Qt.PLACEHOLDER)),m.push(o.indexManager.addToCollectionParentIndex(e,w.key.path.popLast()))}return Je.waitFor(m).next(function(){return f})})},e.prototype.lookupMutationBatch=function(e,t){var n=this;return it(e).get(t).next(function(e){return e?(T(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Je.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null})},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]),c=null;return it(e).iterate({index:Gt.userMutationsIndex,range:o},function(e,t,o){t.userId===n.userId&&(T(t.batchId>=r,"Should have found mutation after "+r),c=n.serializer.fromDbMutationBatch(t)),o.done()}).next(function(){return c})},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return it(e).loadAll(Gt.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Qt.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),c=[];return ot(e).iterate({range:o},function(r,o,l){var h=r[0],f=r[1],d=r[2],path=Re(f);if(h===n.userId&&t.path.isEqual(path))return it(e).get(d).next(function(e){if(!e)throw x("Dangling document-mutation reference found: "+r+" which points to "+d);T(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+d),c.push(n.serializer.fromDbMutationBatch(e))});l.done()}).next(function(){return c})},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new je(re),o=[];return t.forEach(function(t){var c=Qt.prefixForPath(n.userId,t.path),l=IDBKeyRange.lowerBound(c),h=ot(e).iterate({range:l},function(e,o,c){var l=e[0],h=e[1],f=e[2],path=Re(h);l===n.userId&&t.path.isEqual(path)?r=r.add(f):c.done()});o.push(h)}),Je.waitFor(o).next(function(){return n.lookupMutationBatches(e,r)})},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;T(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),T(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,o=r.length+1,c=Qt.prefixForPath(this.userId,r),l=IDBKeyRange.lowerBound(c),h=new je(re);return ot(e).iterate({range:l},function(e,t,c){var l=e[0],f=e[1],d=e[2],path=Re(f);l===n.userId&&r.isPrefixOf(path)?path.length===o&&(h=h.add(d)):c.done()}).next(function(){return n.lookupMutationBatches(e,h)})},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],o=[];return t.forEach(function(t){o.push(it(e).get(t).next(function(e){if(null===e)throw x("Dangling document-mutation reference found, which points to "+t);T(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),Je.waitFor(o).next(function(){return r})},e.prototype.removeMutationBatch=function(e,t){var n=this;return tt(e.simpleDbTransaction,this.userId,t).next(function(r){return n.removeCachedMutationKeys(t.batchId),Je.forEach(r,function(t){return n.referenceDelegate.removeMutationReference(e,t)})})},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return Je.resolve();var r=IDBKeyRange.lowerBound(Qt.prefixForUser(t.userId)),o=[];return ot(e).iterate({range:r},function(e,n,r){if(e[0]===t.userId){var path=Re(e[1]);o.push(path)}else r.done()}).next(function(){T(0===o.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+o.map(function(p){return p.canonicalString()}))})})},e.prototype.containsKey=function(e,t){return et(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return at(e).get(this.userId).next(function(e){return e||new Wt(t.userId,-1,"")})},e}();function et(e,t,n){var r=Qt.prefixForPath(t,n.path),o=r[1],c=IDBKeyRange.lowerBound(r),l=!1;return ot(e).iterate({range:c,keysOnly:!0},function(e,n,r){var c=e[0],h=e[1];e[2];c===t&&h===o&&(l=!0),r.done()}).next(function(){return l})}function tt(e,t,n){var r=e.store(Gt.store),o=e.store(Qt.store),c=[],l=IDBKeyRange.only(n.batchId),h=0,f=r.iterate({range:l},function(e,t,n){return h++,n.delete()});c.push(f.next(function(){T(1===h,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var d=[],m=0,v=n.mutations;m<v.length;m++){var y=v[m],w=Qt.key(t,y.key.path,n.batchId);c.push(o.delete(w)),d.push(y.key)}return Je.waitFor(c).next(function(){return d})}function nt(t){return t instanceof Uint8Array?(T("YES"===e.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function it(e){return Sn.getStore(e,Gt.store)}function ot(e){return Sn.getStore(e,Qt.store)}function at(e){return Sn.getStore(e,Wt.store)}var st,ct=1;!function(e){e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine"}(st||(st={}));var ut=function(){function e(e,t){this.generatorId=e,T((e&ct)===e,"Generator ID "+e+" contains more than "+ct+" reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=1<<ct,e},e.prototype.after=function(e){return this.seek(e+(1<<ct)),this.next()},e.prototype.seek=function(e){T((e&ct)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forQueryCache=function(){return new e(st.QueryCache,2)},e.forSyncEngine=function(){return new e(st.SyncEngine)},e}(),lt="SimpleDb",ht=function(){function t(e){this.db=e,12.2===t.getIOSVersion(f.getUA())&&S("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,r){return T(t.isAvailable(),"IndexedDB not supported in current environment."),_(lt,"Opening database:",e),new Je(function(o,c){var l=window.indexedDB.open(e,n);l.onsuccess=function(e){var n=e.target.result;o(new t(n))},l.onblocked=function(){c(new A(D.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=function(e){var t=e.target.error;"VersionError"===t.name?c(new A(D.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c(t)},l.onupgradeneeded=function(t){_(lt,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result,o=new pt(l.transaction);r.createOrUpgrade(n,o,t.oldVersion,Ut).next(function(){_(lt,"Database upgrade to version "+Ut+" complete")})}}).toPromise()},t.delete=function(e){return _(lt,"Removing database:",e),vt(window.indexedDB.deleteDatabase(e)).toPromise()},t.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(void 0===window.navigator)return"YES"===e.env.USE_MOCK_PERSISTENCE;var n=f.getUA(),r=t.getIOSVersion(n),o=0<r&&r<10,c=t.getAndroidVersion(n),l=0<c&&c<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||o||l)},t.getStore=function(e,t){return e.store(t)},t.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},t.prototype.runTransaction=function(e,t,n){var r=pt.open(this.db,e,t),o=n(r).catch(function(e){return r.abort(e),Je.reject(e)}).toPromise();return o.catch(function(){}),r.completionPromise.then(function(){return o})},t.prototype.close=function(){this.db.close()},t}(),ft=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return vt(this.dbCursor.delete())},e}(),pt=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new we,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=yt(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(_(lt,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return T(!!t,"Object store not part of transaction: "+e),new mt(t)},e}(),mt=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(_(lt,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(_(lt,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),vt(n)},e.prototype.add=function(e){return _(lt,"ADD",this.store.name,e,e),vt(this.store.add(e))},e.prototype.get=function(e){var t=this;return vt(this.store.get(e)).next(function(n){return void 0===n&&(n=null),_(lt,"GET",t.store.name,e,n),n})},e.prototype.delete=function(e){return _(lt,"DELETE",this.store.name,e),vt(this.store.delete(e))},e.prototype.count=function(){return _(lt,"COUNT",this.store.name),vt(this.store.count())},e.prototype.loadAll=function(e,t){var cursor=this.cursor(this.options(e,t)),n=[];return this.iterateCursor(cursor,function(e,t){n.push(t)}).next(function(){return n})},e.prototype.deleteAll=function(e,t){_(lt,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var cursor=this.cursor(n);return this.iterateCursor(cursor,function(e,t,n){return n.delete()})},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var cursor=this.cursor(n);return this.iterateCursor(cursor,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new Je(function(n,r){t.onerror=function(e){var t=yt(e.target.error);r(t)},t.onsuccess=function(t){var cursor=t.target.result;cursor?e(cursor.primaryKey,cursor.value).next(function(e){e?cursor.continue():n()}):n()}})},e.prototype.iterateCursor=function(e,t){var n=[];return new Je(function(r,o){e.onerror=function(e){o(e.target.error)},e.onsuccess=function(e){var cursor=e.target.result;if(cursor){var o=new ft(cursor),c=t(cursor.primaryKey,cursor.value,o);if(c instanceof Je){var l=c.catch(function(e){return o.done(),Je.reject(e)});n.push(l)}o.isDone?r():null===o.skipToKey?cursor.continue():cursor.continue(o.skipToKey)}else r()}}).next(function(){return Je.waitFor(n)})},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(T(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function vt(e){return new Je(function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=yt(e.target.error);n(t)}})}var gt=!1;function yt(e){var t=ht.getIOSVersion(f.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new A("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return gt||(gt=!0,setTimeout(function(){throw r},0)),r}}return e}var bt=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=ut.forQueryCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next(function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next(function(){return n.highestTargetId})})},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return Oe.fromTimestamp(new ke(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.getHighestSequenceNumber=function(e){return St(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next(function(o){return o.highestListenSequenceNumber=t,n&&(o.lastRemoteSnapshotVersion=n.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),r.saveMetadata(e,o)})},e.prototype.addQueryData=function(e,t){var n=this;return this.saveQueryData(e,t).next(function(){return n.retrieveMetadata(e).next(function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(t,r),n.saveMetadata(e,r)})})},e.prototype.updateQueryData=function(e,t){return this.saveQueryData(e,t)},e.prototype.removeQueryData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return wt(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return T(t.targetCount>0,"Removing from an empty query cache"),t.targetCount-=1,n.saveMetadata(e,t)})},e.prototype.removeTargets=function(e,t,n){var r=this,o=0,c=[];return wt(e).iterate(function(l,h){var f=r.serializer.fromDbTarget(h);f.sequenceNumber<=t&&void 0===n[f.targetId]&&(o++,c.push(r.removeQueryData(e,f)))}).next(function(){return Je.waitFor(c)}).next(function(){return o})},e.prototype.forEachTarget=function(e,t){var n=this;return wt(e).iterate(function(e,r){var o=n.serializer.fromDbTarget(r);t(o)})},e.prototype.retrieveMetadata=function(e){return _t(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,Sn.getStore(n,Zt.store)).put(Zt.key,t);var n},e.prototype.saveQueryData=function(e,t){return wt(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromQueryData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getQueryCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},e.prototype.getQueryData=function(e,t){var n=this,r=t.canonicalId(),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),c=null;return wt(e).iterate({range:o,index:Xt.queryTargetsIndexName},function(e,r,o){var l=n.serializer.fromDbTarget(r);t.isEqual(l.query)&&(c=l,o.done())}).next(function(){return c})},e.prototype.addMatchingKeys=function(e,t,n){var r=this,o=[],c=Ct(e);return t.forEach(function(t){var path=Ie(t.path);o.push(c.put(new Jt(n,path))),o.push(r.referenceDelegate.addReference(e,t))}),Je.waitFor(o)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,o=Ct(e);return Je.forEach(t,function(t){var path=Ie(t.path);return Je.waitFor([o.delete([n,path]),r.referenceDelegate.removeReference(e,t)])})},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=Ct(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ct(e),o=Ke();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var path=Re(e[1]),r=new be(path);o=o.add(r)}).next(function(){return o})},e.prototype.containsKey=function(e,t){var path=Ie(t.path),n=IDBKeyRange.bound([path],[oe(path)],!1,!0),r=0;return Ct(e).iterate({index:Jt.documentTargetsIndex,keysOnly:!0,range:n},function(e,t,n){var o=e[0];e[1];0!==o&&(r++,n.done())}).next(function(){return r>0})},e.prototype.getQueryDataForTarget=function(e,t){var n=this;return wt(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},e}();function wt(e){return Sn.getStore(e,Xt.store)}function _t(e){return ht.getStore(e,Zt.store).get(Zt.key).next(function(e){return T(null!==e,"Missing metadata row."),e})}function St(e){return _t(e).next(function(e){return e.highestListenSequenceNumber})}function Ct(e){return Sn.getStore(e,Jt.store)}var xt=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return be.comparator(e.key,t.key)},e}(),Tt=function(e){function t(t,n,data,r,o){var c=e.call(this,t,n)||this;return c.data=data,c.proto=o,c.hasLocalMutations=!!r.hasLocalMutations,c.hasCommittedMutations=!!r.hasCommittedMutations,c}return h.__extends(t,e),t.prototype.field=function(path){return this.data.field(path)},t.prototype.fieldValue=function(path){var e=this.field(path);return e?e.value():void 0},t.prototype.value=function(){return this.data.value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.data.isEqual(e.data)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.compareByField=function(e,t,n){var r=t.field(e),o=n.field(e);return null!==r&&null!==o?r.compareTo(o):x("Trying to compare documents on fields that don't exist")},t}(xt),Et=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.hasCommittedMutations=!(!r||!r.hasCommittedMutations),o}return h.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(xt),It=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(xt),Dt=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,o=n;r<o.length;r++){var c=o[r],l=c[0],h=c[1];if(l.isEqual(e))return h}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(n[i][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(i,1),!0;return!1},e.prototype.forEach=function(e){P(this.inner,function(t,n){for(var r=0,o=n;r<o.length;r++){var c=o[r],l=c[0],h=c[1];e(l,h)}})},e.prototype.isEmpty=function(){return M(this.inner)},e}(),At=function(){function e(){this.changes=Ue(),this.documentSizes=new Dt(function(e){return e.toString()})}return e.prototype.addEntry=function(e){var t=this.assertChanges();this.changes=t.insert(e.key,e)},e.prototype.getEntry=function(e,t){var n=this,r=this.assertChanges().get(t);return r?Je.resolve(r):this.getFromCache(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},e.prototype.getEntries=function(e,t){var n=this;return this.getAllFromCache(e,t).next(function(e){var t=e.maybeDocuments;return e.sizeMap.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},e.prototype.apply=function(e){var t=this.applyChanges(e);return this.changes=null,t},e.prototype.assertChanges=function(){return T(null!==this.changes,"Changes have already been applied."),this.changes},e}(),Rt="The remote document changelog no longer contains all changes for all local query views. It may be necessary to rebuild these views.",kt=function(){function e(e,t,n){this.serializer=e,this.indexManager=t,this.keepDocumentChangeLog=n,this._lastProcessedDocumentChangeId=0}return Object.defineProperty(e.prototype,"lastProcessedDocumentChangeId",{get:function(){return this._lastProcessedDocumentChangeId},enumerable:!0,configurable:!0}),e.prototype.start=function(e){var t=ht.getStore(e,nn.store);return this.synchronizeLastDocumentChangeId(t)},e.prototype.addEntries=function(e,t,n){var r=[];if(t.length>0){for(var o=Pt(e),c=Ke(),l=0,h=t;l<h.length;l++){var f=h[l],d=f.key,m=f.doc;r.push(o.put(Lt(d),m)),c=c.add(d),r.push(this.indexManager.addToCollectionParentIndex(e,d.path.popLast()))}this.keepDocumentChangeLog&&r.push(Mt(e).put({changes:this.serializer.toDbResourcePaths(c)})),r.push(this.updateSize(e,n))}return Je.waitFor(r)},e.prototype.removeEntry=function(e,t){var n=Pt(e),r=Lt(t);return n.get(r).next(function(e){return e?n.delete(r).next(function(){return jt(e)}):Je.resolve(0)})},e.prototype.getEntry=function(e,t){var n=this;return Pt(e).get(Lt(t)).next(function(e){return e?n.serializer.fromDbRemoteDocument(e):null})},e.prototype.getSizedEntry=function(e,t){var n=this;return Pt(e).get(Lt(t)).next(function(e){return e?{maybeDocument:n.serializer.fromDbRemoteDocument(e),size:jt(e)}:null})},e.prototype.getEntries=function(e,t){var n=this,r=qe();return this.forEachDbEntry(e,t,function(e,t){r=t?r.insert(e,n.serializer.fromDbRemoteDocument(t)):r.insert(e,null)}).next(function(){return r})},e.prototype.getSizedEntries=function(e,t){var n=this,r=qe(),o=new Ne(be.comparator);return this.forEachDbEntry(e,t,function(e,t){t?(r=r.insert(e,n.serializer.fromDbRemoteDocument(t)),o=o.insert(e,jt(t))):(r=r.insert(e,null),o=o.insert(e,0))}).next(function(){return{maybeDocuments:r,sizeMap:o}})},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Je.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),o=t.getIterator(),c=o.getNext();return Pt(e).iterate({range:r},function(e,t,r){for(var l=be.fromSegments(e);c&&be.comparator(c,l)<0;)n(c,null),c=o.getNext();c&&c.isEqual(l)&&(n(c,t),c=o.hasNext()?o.getNext():null),c?r.skip(c.path.toArray()):r.done()}).next(function(){for(;c;)n(c,null),c=o.hasNext()?o.getNext():null})},e.prototype.getDocumentsMatchingQuery=function(e,t){var n=this;T(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=ze(),o=t.path.length+1,c=t.path.toArray(),l=IDBKeyRange.lowerBound(c);return Pt(e).iterate({range:l},function(e,c,l){if(e.length===o){var h=n.serializer.fromDbRemoteDocument(c);t.path.isPrefixOf(h.key.path)?h instanceof Tt&&t.matches(h)&&(r=r.insert(h.key,h)):l.done()}}).next(function(){return r})},e.prototype.getNewDocumentChanges=function(e){var t=this;T(this.keepDocumentChangeLog,"Can only call getNewDocumentChanges() when document change log is enabled");var n=Ke(),r=Ue(),o=IDBKeyRange.lowerBound(this._lastProcessedDocumentChangeId+1),c=!0,l=Mt(e);return l.iterate({range:o},function(e,r){if(c&&(c=!1,t._lastProcessedDocumentChangeId+1!==r.id))return t.synchronizeLastDocumentChangeId(l).next(function(){return Je.reject(new A(D.DATA_LOSS,Rt))});n=n.unionWith(t.serializer.fromDbResourcePaths(r.changes)),t._lastProcessedDocumentChangeId=r.id}).next(function(){var o=[];return n.forEach(function(n){o.push(t.getEntry(e,n).next(function(e){var t=e||new Et(n,Oe.forDeletedDoc());r=r.insert(n,t)}))}),Je.waitFor(o)}).next(function(){return r})},e.prototype.removeDocumentChangesThroughChangeId=function(e,t){var n=IDBKeyRange.upperBound(t);return Mt(e).delete(n)},e.prototype.synchronizeLastDocumentChangeId=function(e){var t=this;return this._lastProcessedDocumentChangeId=0,e.iterate({keysOnly:!0,reverse:!0},function(e,n,r){t._lastProcessedDocumentChangeId=e,r.done()})},e.prototype.newChangeBuffer=function(){return new Nt(this)},e.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},e.prototype.getMetadata=function(e){return Ot(e).get(Yt.key).next(function(e){return T(!!e,"Missing document cache metadata"),e})},e.prototype.setMetadata=function(e,t){return Ot(e).put(Yt.key,t)},e.prototype.updateSize=function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.setMetadata(e,r)})},e}();function Ot(e){return Sn.getStore(e,Yt.store)}var Nt=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return h.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=this.assertChanges(),r=0,o=[];return n.forEach(function(e,n){var c=t.documentCache.serializer.toDbRemoteDocument(n),l=t.documentSizes.get(e);T(void 0!==l,"Attempting to change document "+e.toString()+" without having read it first");var h=jt(c);r+=h-l,o.push({key:e,doc:c})}),this.documentCache.addEntries(e,o,r)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},t}(At);function Pt(e){return Sn.getStore(e,$t.store)}function Mt(e){return Sn.getStore(e,nn.store)}function Lt(e){return e.path.toArray()}function jt(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw x("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var Ft=function(){function e(){this.collectionParentIndex=new Bt}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Je.resolve()},e.prototype.getCollectionParents=function(e,t){return Je.resolve(this.collectionParentIndex.getEntries(t))},e}(),Bt=function(){function e(){this.index={}}return e.prototype.add=function(e){T(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new je(ve.comparator),o=!r.has(n);return this.index[t]=r.add(n),o},e.prototype.getEntries=function(e){return(this.index[e]||new je(ve.comparator)).toArray()},e}(),Ut=8,qt=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var o=this;T(n<r&&n>=0&&r<=Ut,"Unexpected schema upgrade from v"+n+" to v{toVersion}."),n<1&&r>=1&&(function(e){e.createObjectStore(zt.store)}(e),function(e){e.createObjectStore(Wt.store,{keyPath:Wt.keyPath}),e.createObjectStore(Gt.store,{keyPath:Gt.keyPath,autoIncrement:!0}).createIndex(Gt.userMutationsIndex,Gt.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Qt.store)}(e),tn(e),function(e){e.createObjectStore($t.store)}(e));var p=Je.resolve();return n<3&&r>=3&&(0!==n&&(!function(e){e.deleteObjectStore(Jt.store),e.deleteObjectStore(Xt.store),e.deleteObjectStore(Zt.store)}(e),tn(e)),p=p.next(function(){return function(e){var t=e.store(Zt.store),n=new Zt(0,0,Oe.MIN.toTimestamp(),0);return t.put(Zt.key,n)}(t)})),n<4&&r>=4&&(0!==n&&(p=p.next(function(){return function(e,t){return t.store(Gt.store).loadAll().next(function(n){e.deleteObjectStore(Gt.store),e.createObjectStore(Gt.store,{keyPath:Gt.keyPath,autoIncrement:!0}).createIndex(Gt.userMutationsIndex,Gt.userMutationsKeyPath,{unique:!0});var r=t.store(Gt.store),o=n.map(function(e){return r.put(e)});return Je.waitFor(o)})}(e,t)})),p=p.next(function(){!function(e){e.createObjectStore(rn.store,{keyPath:rn.keyPath})}(e),function(e){e.createObjectStore(nn.store,{keyPath:"id",autoIncrement:!0})}(e)})),n<5&&r>=5&&(p=p.next(function(){return o.removeAcknowledgedMutations(t)})),n<6&&r>=6&&(p=p.next(function(){return function(e){e.createObjectStore(Yt.store)}(e),o.addDocumentGlobal(t)})),n<7&&r>=7&&(p=p.next(function(){return o.ensureSequenceNumbers(t)})),n<8&&r>=8&&(p=p.next(function(){return o.createCollectionParentIndex(e,t)})),p},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store($t.store).iterate(function(e,n){t+=jt(n)}).next(function(){var n=new Yt(t);return e.store(Yt.store).put(Yt.key,n)})},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(Wt.store),r=e.store(Gt.store);return n.loadAll().next(function(n){return Je.forEach(n,function(n){var o=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(Gt.userMutationsIndex,o).next(function(r){return Je.forEach(r,function(r){T(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var o=t.serializer.fromDbMutationBatch(r);return tt(e,n.userId,o).next(function(){})})})})})},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(Jt.store),n=e.store($t.store);return St(e).next(function(e){var r=[];return n.iterate(function(n,o){var path=new ve(n),c=function(path){return[0,Ie(path)]}(path);r.push(t.get(c).next(function(n){return n?Je.resolve():function(path){return t.put(new Jt(0,Ie(path),e))}(path)}))}).next(function(){return Je.waitFor(r)})})},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(en.store,{keyPath:en.keyPath});var n=t.store(en.store),r=new Bt,o=function(e){if(r.add(e)){var t=e.lastSegment(),o=e.popLast();return n.put({collectionId:t,parent:Ie(o)})}};return t.store($t.store).iterate({keysOnly:!0},function(e,t){var path=new ve(e);return o(path.popLast())}).next(function(){return t.store(Qt.store).iterate({keysOnly:!0},function(e,t){e[0];var n=e[1],path=(e[2],Re(n));return o(path.popLast())})})},e}();var Vt=function(e,t){this.seconds=e,this.nanoseconds=t},zt=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}();var Wt=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),Gt=function(){function e(e,t,n,r,o){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=o}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}();var Qt=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,path){return[e,Ie(path)]},e.key=function(e,path,t){return[e,Ie(path),t]},e.store="documentMutations",e.PLACEHOLDER=new e,e}();var Kt=function(path,e){this.path=path,this.readTime=e},Ht=function(path,e){this.path=path,this.version=e},$t=function(){function e(e,t,n,r){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r}return e.store="remoteDocuments",e}(),Yt=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}();var Xt=function(){function e(e,t,n,r,o,c){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=o,this.query=c}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),Jt=function(){function e(e,path,t){this.targetId=e,this.path=path,this.sequenceNumber=t,T(0===e==(void 0!==t),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),Zt=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),en=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function tn(e){e.createObjectStore(Jt.store,{keyPath:Jt.keyPath}).createIndex(Jt.documentTargetsIndex,Jt.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Xt.store,{keyPath:Xt.keyPath}).createIndex(Xt.queryTargetsIndexName,Xt.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Zt.store)}var nn=function(){function e(e){this.changes=e}return e.store="remoteDocumentChanges",e.keyPath="id",e}();var rn=function(){function e(e,t,n,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r,this.lastProcessedDocumentChangeId=o}return e.store="clientMetadata",e.keyPath="clientId",e}();var on,an=[Wt.store,Gt.store,Qt.store,$t.store,Xt.store,zt.store,Zt.store,Jt.store].concat([rn.store,nn.store]).concat([Yt.store]).concat([en.store]),sn=function(){function e(){this.collectionParentsCache=new Bt}return e.prototype.addToCollectionParentIndex=function(e,t){if(T(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.add(t)){T(t.length>=1,"Invalid collection path.");var n=t.lastSegment(),r=t.popLast();return cn(e).put({collectionId:n,parent:Ie(r)})}return Je.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[oe(t),""],!1,!0);return cn(e).loadAll(r).next(function(e){for(var r=0,o=e;r<o.length;r++){var c=o[r];if(c.collectionId!==t)break;n.push(Re(c.parent))}return n})},e}();function cn(e){return Sn.getStore(e,en.store)}!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(on||(on={}));var un=function(){function e(e,t,n,r,o,c){void 0===o&&(o=Oe.MIN),void 0===c&&(c=I()),this.query=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=o,this.resumeToken=c}return e.prototype.copy=function(t){return new e(this.query,this.targetId,this.purpose,void 0===t.sequenceNumber?this.sequenceNumber:t.sequenceNumber,void 0===t.snapshotVersion?this.snapshotVersion:t.snapshotVersion,void 0===t.resumeToken?this.resumeToken:t.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.resumeToken===e.resumeToken&&this.query.isEqual(e.query)},e}(),ln=function(){function t(e){this.remoteSerializer=e}return t.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=be.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new Et(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){t=be.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version);return new It(t,n)}return x("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(e){if(e instanceof Tt){var t=e.proto?e.proto:this.remoteSerializer.toDocument(e),n=e.hasCommittedMutations;return new $t(null,null,t,n)}if(e instanceof Et){var path=e.key.path.toArray(),r=this.toDbTimestamp(e.version);n=e.hasCommittedMutations;return new $t(null,new Kt(path,r),null,n)}if(e instanceof It){path=e.key.path.toArray(),r=this.toDbTimestamp(e.version);return new $t(new Ht(path,r),null,null,!0)}return x("Unexpected MaybeDocumment")},t.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new Vt(t.seconds,t.nanoseconds)},t.prototype.fromDbTimestamp=function(e){var t=new ke(e.seconds,e.nanoseconds);return Oe.fromTimestamp(t)},t.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map(function(e){return n.remoteSerializer.toMutation(e)}),o=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new Gt(e,t.batchId,t.localWriteTime.toMillis(),r,o)},t.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map(function(e){return t.remoteSerializer.fromMutation(e)}),r=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),o=ke.fromMillis(e.localWriteTimeMs);return new Ye(e.batchId,o,n,r)},t.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(Ie(e.path))}),t},t.prototype.fromDbResourcePaths=function(e){for(var t=Ke(),n=0,r=e;n<r.length;n++){var o=r[n];t=t.add(new be(Re(o)))}return t},t.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime);return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new un(t,e.targetId,on.Listen,e.lastListenSequenceNumber,n,e.resumeToken)},t.prototype.toDbTarget=function(t){T(on.Listen===t.purpose,"Only queries with purpose "+on.Listen+" may be stored, got "+t.purpose);var n,r,o=this.toDbTimestamp(t.snapshotVersion);return n=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),t.resumeToken instanceof Uint8Array?(T("YES"===e.env.USE_MOCK_PERSISTENCE,"Persisting non-string stream tokens is only supported with mock persistence ."),r=t.resumeToken.toString()):r=t.resumeToken,new Xt(t.targetId,t.query.canonicalId(),o,r,t.sequenceNumber,n)},t}();function hn(e,t){var n=e[0],r=e[1],o=t[0],c=t[1],l=re(n,o);return 0===l?re(r,c):l}var fn=function(){function e(e){this.maxElements=e,this.buffer=new je(hn),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();hn(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),dn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pn=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),mn=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){T(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==pn.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;T(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;_("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(ce.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch(Cn)})},e}(),vn=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Je.resolve(pe.INVALID);var r=new fn(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===pn.COLLECTION_DISABLED?(_("LruGarbageCollector","Garbage collection skipped; disabled"),Je.resolve(dn)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(_("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),dn):n.runGarbageCollection(e,t)})},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,c,l,h,f,d,m=this,v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>m.params.maximumSequenceNumbersToCollect?(_("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+m.params.maximumSequenceNumbersToCollect+" from "+t),r=m.params.maximumSequenceNumbersToCollect):r=t,l=Date.now(),m.nthSequenceNumber(e,r)}).next(function(r){return n=r,h=Date.now(),m.removeTargets(e,n,t)}).next(function(t){return c=t,f=Date.now(),m.removeOrphanedDocuments(e,n)}).next(function(e){(d=Date.now(),y()<=o.DEBUG)&&_("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(l-v)+"ms\n\tDetermined least recently used "+r+" in "+(h-l)+"ms\n\tRemoved "+c+" targets in "+(f-h)+"ms\n\tRemoved "+e+" documents in "+(d-f)+"ms\nTotal Duration: "+(d-v)+"ms");return Je.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:c,documentsRemoved:e})})},e}(),gn="IndexedDbPersistence",yn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",wn="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",_n=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return h.__extends(t,e),t}(function(){}),Sn=function(){function e(t,n,r,o,c,l,h){if(this.persistenceKey=t,this.clientId=n,this.queue=o,this.multiClientParams=h,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},!e.isAvailable())throw new A(D.UNIMPLEMENTED,wn);if(this.referenceDelegate=new Dn(this,l),this.dbName=t+e.MAIN_DATABASE,this.serializer=new ln(c),this.document=r.document,this.allowTabSynchronization=void 0!==h,this.queryCache=new bt(this.referenceDelegate,this.serializer),this.indexManager=new sn,this.remoteDocumentCache=new kt(this.serializer,this.indexManager,this.allowTabSynchronization),!r.window||!r.window.localStorage)throw new A(D.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof _n)return ht.getStore(e.simpleDbTransaction,t);throw x("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t,n,r,o,c,l){return h.__awaiter(this,void 0,void 0,function(){var f;return h.__generator(this,function(h){switch(h.label){case 0:return[4,(f=new e(t,n,r,o,c,l)).start()];case 1:return h.sent(),[2,f]}})})},e.createMultiClientIndexedDbPersistence=function(t,n,r,o,c,l,f){return h.__awaiter(this,void 0,void 0,function(){var d;return h.__generator(this,function(h){switch(h.label){case 0:return[4,(d=new e(t,n,r,o,c,l,f)).start()];case 1:return h.sent(),[2,d]}})})},e.prototype.start=function(){var e=this;return T(!this.started,"IndexedDbPersistence double-started!"),T(null!==this.window,"Expected 'window' to be defined"),ht.openOrCreate(this.dbName,Ut,new qt(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.startRemoteDocumentCache()}).then(function(){return e.simpleDb.runTransaction("readonly",[Zt.store],function(t){return St(t).next(function(t){var n=e.multiClientParams?e.multiClientParams.sequenceNumberSyncer:void 0;e.listenSequence=new pe(t,n)})})}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},e.prototype.startRemoteDocumentCache=function(){var e=this;return this.simpleDb.runTransaction("readonly",an,function(t){return e.remoteDocumentCache.start(t)})},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return h.__awaiter(t,void 0,void 0,function(){return h.__generator(this,function(t){return this.started?[2,e(n)]:[2]})})},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener(function(n){return h.__awaiter(t,void 0,void 0,function(){return h.__generator(this,function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return h.__awaiter(t,void 0,void 0,function(){return h.__generator(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite",an,function(t){return Tn(t).put(new rn(e.clientId,Date.now(),e.networkEnabled,e.inForeground,e.remoteDocumentCache.lastProcessedDocumentChangeId)).next(function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next(function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget(function(){return e.primaryStateListener(!1)}))})}).next(function(){return e.canActAsPrimary(t)}).next(function(n){var r=e.isPrimary;return e.isPrimary=n,r!==e.isPrimary&&e.queue.enqueueAndForget(function(){return e.primaryStateListener(e.isPrimary)}),r&&!e.isPrimary?e.releasePrimaryLeaseIfHeld(t):e.isPrimary?e.acquireOrExtendPrimaryLease(t):void 0})})},e.prototype.verifyPrimaryLease=function(e){var t=this;return xn(e).get(zt.key).next(function(e){return Je.resolve(t.isLocalClient(e))})},e.prototype.removeClientMetadata=function(e){return Tn(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return h.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return h.__generator(this,function(o){switch(o.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),n=[],[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(o){var c=e.getStore(o,rn.store);return c.loadAll().next(function(e){t=r.filterActiveClients(e,18e5),n=e.filter(function(e){return-1===t.indexOf(e)})}).next(function(){return Je.forEach(n,function(e){return c.delete(e.clientId)})}).next(function(){if((t=t.filter(function(e){return e.clientId!==r.clientId})).length>0){var e=t.map(function(e){return e.lastProcessedDocumentChangeId||0}),n=Math.min.apply(Math,e);return r.remoteDocumentCache.removeDocumentChangesThroughChangeId(o,n)}})})]);case 1:o.sent(),n.forEach(function(e){r.window.localStorage.removeItem(r.zombiedClientLocalStorageKey(e.clientId))}),o.label=2;case 2:return[2]}})})},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(ce.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return xn(e).get(zt.key).next(function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new A(D.FAILED_PRECONDITION,bn);return!1}}return!(!t.networkEnabled||!t.inForeground)||Tn(e).loadAll().next(function(e){return void 0===t.filterActiveClients(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,o=t.networkEnabled===e.networkEnabled;if(n||r&&o)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&_(gn,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},e.prototype.shutdown=function(){return h.__awaiter(this,void 0,void 0,function(){var e=this;return h.__generator(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite",[zt.store,rn.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly",[rn.store],function(t){return Tn(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(e){return e.clientId})})})},e.clearPersistence=function(t){return h.__awaiter(this,void 0,void 0,function(){var n;return h.__generator(this,function(r){switch(r.label){case 0:return e.isAvailable()?(n=t+e.MAIN_DATABASE,[4,ht.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}})})},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return T(this.started,"Cannot initialize MutationQueue before persistence is started."),Ze.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getQueryCache=function(){return T(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},e.prototype.getRemoteDocumentCache=function(){return T(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return T(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;return _(gn,"Starting transaction:",e),this.simpleDb.runTransaction("readonly"===t?"readonly":"readwrite",an,function(o){return"readwrite-primary"===t?r.verifyPrimaryLease(o).next(function(t){if(!t)throw S("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget(function(){return r.primaryStateListener(!1)}),new A(D.FAILED_PRECONDITION,yn);return n(new _n(o,r.listenSequence.next()))}).next(function(e){return r.acquireOrExtendPrimaryLease(o).next(function(){return e})}):r.verifyAllowTabSynchronization(o).next(function(){return n(new _n(o,r.listenSequence.next()))})})},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return xn(e).get(zt.key).next(function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new A(D.FAILED_PRECONDITION,bn)})},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new zt(this.clientId,this.allowTabSynchronization,Date.now());return xn(e).put(zt.key,t)},e.isAvailable=function(){return ht.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=xn(e);return n.get(zt.key).next(function(e){return t.isLocalClient(e)?(_(gn,"Releasing primary lease."),n.delete(zt.key)):Je.resolve()})},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(S("Detected an update time that is in the future: "+e+" > "+n),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(T(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(T("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return _(gn,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return S(gn,"Failed to get zombied client id.",e),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){S("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function Cn(e){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(t){if(!function(e){return e.code===D.FAILED_PRECONDITION&&e.message===yn}(e))throw e;return _(gn,"Unexpectedly lost primary lease"),[2]})})}function xn(e){return e.store(zt.store)}function Tn(e){return e.store(rn.store)}var En,In,Dn=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new vn(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getQueryCache().getQueryCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachTarget=function(e,t){return this.db.getQueryCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,function(e,n){return t(n)})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return An(e,t)},e.prototype.removeReference=function(e,t){return An(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getQueryCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return An(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Je.resolve(!0):function(e,t){var n=!1;return at(e).iterateSerial(function(r){return et(e,r,t).next(function(e){return e&&(n=!0),Je.resolve(!e)})}).next(function(){return n})}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,o=0,c=[];return this.forEachOrphanedDocument(e,function(l,h){if(h<=t){var p=n.isPinned(e,l).next(function(t){if(!t)return r++,n.removeOrphanedDocument(e,l).next(function(e){o+=e})});c.push(p)}}).next(function(){return Je.waitFor(c)}).next(function(){return n.db.getRemoteDocumentCache().updateSize(e,-o)}).next(function(){return r})},e.prototype.removeOrphanedDocument=function(e,t){var n,r=0,o=this.db.getRemoteDocumentCache();return Je.waitFor([Ct(e).delete((n=t,[0,Ie(n.path)])),o.removeEntry(e,t).next(function(e){r+=e})]).next(function(){return r})},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.db.getQueryCache().updateQueryData(e,n)},e.prototype.updateLimboDocument=function(e,t){return An(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=Ct(e),o=pe.INVALID;return r.iterate({index:Jt.documentTargetsIndex},function(e,r){var c=e[0],path=(e[1],r.path),l=r.sequenceNumber;0===c?(o!==pe.INVALID&&t(new be(Re(n)),o),o=l,n=path):o=pe.INVALID}).next(function(){o!==pe.INVALID&&t(new be(Re(n)),o)})},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function An(e,t){return Ct(e).put(function(e,t){return new Jt(0,Ie(e.path),t)}(t,e.currentSequenceNumber))}!function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(En||(En={})),function(e){e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous"}(In||(In={}));var Rn=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(In.Estimate,n);case"previous":return new e(In.Previous,n);case"none":case void 0:return new e(In.Default,n);default:return x("fromSnapshotOptions() called with invalid options.")}},e}(),kn=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return T(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),re(this.typeOrder,e.typeOrder)},e}(),On=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=En.NullValue,t.internalValue=null,t}return h.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(kn),Nn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=En.BooleanValue,n}return h.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?re(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(kn),Pn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=En.NumberValue,n}return h.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue,r=e.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(e);var n,r},t}(kn);function Mn(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Ln,jn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Mn(this.internalValue,e.internalValue)},t}(Pn),Fn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&Mn(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Pn),Bn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=En.StringValue,n}return h.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?re(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(kn),Un=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=En.TimestampValue,n}return h.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof qn?-1:this.defaultCompareTo(e)},t}(kn),qn=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=En.TimestampValue,r}return h.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===In.Estimate?new Un(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===In.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Un?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(kn),Vn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=En.BlobValue,n}return h.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(kn),zn=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=En.RefValue,r}return h.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&(this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:be.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(kn),Wn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=En.GeoPointValue,n}return h.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(kn),Gn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=En.ObjectValue,n}return h.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal(function(n,r){t[n]=r.value(e)}),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var o=n.getNext(),c=r.getNext();if(o.key!==c.key||!o.value.isEqual(c.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var o=n.getNext(),c=r.getNext(),l=re(o.key,c.key)||o.value.compareTo(c.value);if(l)return l}return re(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(path,e){if(T(!path.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===path.length)return this.setChild(path.firstSegment(),e);var n=this.child(path.firstSegment());n instanceof t||(n=t.EMPTY);var r=n.set(path.popFirst(),e);return this.setChild(path.firstSegment(),r)},t.prototype.delete=function(path){if(T(!path.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===path.length)return new t(this.internalValue.remove(path.firstSegment()));var e=this.child(path.firstSegment());if(e instanceof t){var n=e.delete(path.popFirst());return new t(this.internalValue.insert(path.firstSegment(),n))}return this},t.prototype.contains=function(path){return null!==this.field(path)},t.prototype.field=function(path){T(!path.isEmpty(),"Can't get field of empty path");var e=this;return path.forEach(function(n){e=e instanceof t?e.internalValue.get(n):null}),e},t.prototype.fieldMask=function(){var e=new je(ye.comparator);return this.internalValue.forEach(function(n,r){var o=new ye([n]);if(r instanceof t){var c=r.fieldMask().fields;c.isEmpty()?e=e.add(o):c.forEach(function(t){e=e.add(o.child(t))})}else e=e.add(o)}),Kn.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new Ne(re)),t}(kn),Qn=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=En.ArrayValue,n}return h.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++){if(n[t].isEqual(e))return!0}return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var i=0;i<this.internalValue.length;i++)if(!this.internalValue[i].isEqual(e.internalValue[i]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),i=0;i<n;i++){var r=this.internalValue[i].compareTo(e.internalValue[i]);if(r)return r}return re(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map(function(e){return e.toString()}).join(",")+"]"},t}(kn),Kn=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new je(ye.comparator);return t.forEach(function(e){return n=n.add(e)}),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach(function(n){n.isPrefixOf(e)&&(t=!0)}),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),Hn=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),$n=function(e,t){this.version=e,this.transformResults=t};!function(e){e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete"}(Ln||(Ln={}));var Yn=function(){function e(e,t){this.updateTime=e,this.exists=t,T(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Tt&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Tt:(T(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!=t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),Xn=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&T(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Tt?e.version:Oe.MIN},e}(),Jn=function(e){function t(t,n,r){var o=e.call(this)||this;return o.key=t,o.value=n,o.precondition=r,o.type=Ln.Set,o}return h.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),T(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Tt(this.key,n,this.value,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Xn.getPostMutationVersion(e);return new Tt(this.key,r,this.value,{hasLocalMutations:!0})},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(Xn),Zn=function(e){function t(t,data,n,r){var o=e.call(this)||this;return o.key=t,o.data=data,o.fieldMask=n,o.precondition=r,o.type=Ln.Patch,o}return h.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),T(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new It(this.key,t.version);var n=this.patchDocument(e);return new Tt(this.key,t.version,n,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=Xn.getPostMutationVersion(e),o=this.patchDocument(e);return new Tt(this.key,r,o,{hasLocalMutations:!0})},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var data;return data=e instanceof Tt?e.data:Gn.EMPTY,this.patchObject(data)},t.prototype.patchObject=function(data){var e=this;return this.fieldMask.fields.forEach(function(t){if(!t.isEmpty()){var n=e.data.field(t);data=null!==n?data.set(t,n):data.delete(t)}}),data},t}(Xn),er=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=Ln.Transform,r.precondition=Yn.exists(!0),r}return h.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),T(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new It(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),o=t.version,c=this.transformObject(n.data,r);return new Tt(this.key,o,c,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),o=this.localTransformResults(n,e,t),c=this.transformObject(r.data,o);return new Tt(this.key,r.version,c,{hasLocalMutations:!0})},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var o=r[n],c=e instanceof Tt?e.field(o.field):void 0,l=o.transform.computeBaseValue(c||null);null!=l&&(t=null==t?Gn.EMPTY.set(o.field,l):t.set(o.field,l))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&ie(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){T(e instanceof Tt,"Unknown MaybeDocument type "+e);var t=e;return T(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},t.prototype.serverTransformResults=function(e,t){var n=[];T(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var i=0;i<t.length;i++){var r=this.fieldTransforms[i],o=r.transform,c=null;e instanceof Tt&&(c=e.field(r.field)),n.push(o.applyToRemoteDocument(c,t[i]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],o=0,c=this.fieldTransforms;o<c.length;o++){var l=c[o],h=l.transform,f=null;t instanceof Tt&&(f=t.field(l.field)),null===f&&n instanceof Tt&&(f=n.field(l.field)),r.push(h.applyToLocalView(f,e))}return r},t.prototype.transformObject=function(data,e){T(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var i=0;i<this.fieldTransforms.length;i++){var t=this.fieldTransforms[i].field;data=data.set(t,e[i])}return data},t}(Xn),nr=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=Ln.Delete,r}return h.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),T(null==t.transformResults,"Transform results received by DeleteMutation."),new Et(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&T(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Et(this.key,Oe.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(Xn),rr=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.getDocumentInternal(e,t,r)})},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next(function(e){for(var r=0,o=n;r<o.length;r++){e=o[r].applyToLocalView(t,e)}return e})},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=qe();return t.forEach(function(e,t){for(var o=0,c=n;o<c.length;o++){t=c[o].applyToLocalView(e,t)}r=r.insert(e,t)}),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(r){var o=n.applyLocalMutationsToDocuments(e,t,r),c=Ue();return o.forEach(function(e,t){t||(t=new Et(e,Oe.forDeletedDoc())),c=c.insert(e,t)}),c})},e.prototype.getDocumentsMatchingQuery=function(e,t){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t):this.getDocumentsMatchingCollectionQuery(e,t)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new be(t)).next(function(e){var t=ze();return e instanceof Tt&&(t=t.insert(e.key,e)),t})},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t){var n=this;T(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var r=t.collectionGroup,o=ze();return this.indexManager.getCollectionParents(e,r).next(function(c){return Je.forEach(c,function(c){var l=t.asCollectionQueryAtPath(c.child(r));return n.getDocumentsMatchingCollectionQuery(e,l).next(function(e){e.forEach(function(e,t){o=o.insert(e,t)})})}).next(function(){return o})})},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t){var n,r,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t).next(function(r){return n=r,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return r=t,o.addMissingBaseDocuments(e,r,n).next(function(e){n=e;for(var t=0,o=r;t<o.length;t++)for(var c=o[t],l=0,h=c.mutations;l<h.length;l++){var f=h[l],d=f.key,m=n.get(d),v=f.applyToLocalView(m,m,c.localWriteTime);n=v instanceof Tt?n.insert(d,v):n.remove(d)}})}).next(function(){return n.forEach(function(e,r){t.matches(r)||(n=n.remove(e))}),n})},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=Ke(),o=0,c=t;o<c.length;o++)for(var l=0,h=c[o].mutations;l<h.length;l++){var f=h[l];f instanceof Zn&&null===n.get(f.key)&&(r=r.add(f.key))}var d=n;return this.remoteDocumentCache.getEntries(e,r).next(function(e){return e.forEach(function(e,t){null!==t&&t instanceof Tt&&(d=d.insert(e,t))}),d})},e}(),ir=function(){function e(){this.refsByKey=new je(or.compareByKey),this.refsByTarget=new je(or.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new or(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},e.prototype.removeReference=function(e,t){this.removeRef(new or(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},e.prototype.removeReferencesForId=function(e){var t=this,n=be.EMPTY,r=new or(n,e),o=new or(n,e+1),c=[];return this.refsByTarget.forEachInRange([r,o],function(e){t.removeRef(e),c.push(e.key)}),c},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=be.EMPTY,n=new or(t,e),r=new or(t,e+1),o=Ke();return this.refsByTarget.forEachInRange([n,r],function(e){o=o.add(e.key)}),o},e.prototype.containsKey=function(e){var t=new or(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),or=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return be.comparator(e.key,t.key)||re(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return re(e.targetOrBatchId,t.targetOrBatchId)||be.comparator(e.key,t.key)},e}(),ar=function(){function e(e,t){this.persistence=e,this.localViewReferences=new ir,this.queryDataByTarget={},T(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(t),this.remoteDocuments=e.getRemoteDocumentCache(),this.queryCache=e.getQueryCache(),this.localDocuments=new rr(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager())}return e.prototype.handleUserChange=function(e){var t=this;return this.persistence.runTransaction("Handle user change","readonly",function(n){var r;return t.mutationQueue.getAllMutationBatches(n).next(function(o){return r=o,t.mutationQueue=t.persistence.getMutationQueue(e),t.localDocuments=new rr(t.remoteDocuments,t.mutationQueue,t.persistence.getIndexManager()),t.mutationQueue.getAllMutationBatches(n)}).next(function(e){for(var o=[],c=[],l=Ke(),h=0,f=r;h<f.length;h++){var d=f[h];o.push(d.batchId);for(var m=0,v=d.mutations;m<v.length;m++){var y=v[m];l=l.add(y.key)}}for(var w=0,_=e;w<_.length;w++){d=_[w];c.push(d.batchId);for(var S=0,C=d.mutations;S<C.length;S++){y=C[S];l=l.add(y.key)}}return t.localDocuments.getDocuments(n,l).next(function(e){return{affectedDocuments:e,removedBatchIds:o,addedBatchIds:c}})})})},e.prototype.localWrite=function(e){var t=this,n=ke.now(),r=e.reduce(function(e,t){return e.add(t.key)},Ke());return this.persistence.runTransaction("Locally write mutations","readwrite",function(o){return t.localDocuments.getDocuments(o,r).next(function(r){for(var c=[],l=0,h=e;l<h.length;l++){var f=h[l],d=f.extractBaseValue(r.get(f.key));null!=d&&c.push(new Zn(f.key,d,d.fieldMask(),Yn.exists(!0)))}return t.mutationQueue.addMutationBatch(o,n,c,e).next(function(e){var t=e.applyToLocalDocumentSet(r);return{batchId:e.batchId,changes:t}})})})},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",function(n){return t.mutationQueue.lookupMutationKeys(n,e).next(function(e){return e?t.localDocuments.getDocuments(n,e):Je.resolve(null)})})},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(n){var r=e.batch.keys(),o=t.remoteDocuments.newChangeBuffer();return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next(function(){return t.applyWriteToRemoteDocuments(n,e,o)}).next(function(){return o.apply(n)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next(function(e){return T(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)}).next(function(){return t.mutationQueue.performConsistencyCheck(n)}).next(function(){return t.localDocuments.getDocuments(n,r)})})},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly",function(t){return e.mutationQueue.getLastStreamToken(t)})},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary",function(n){return t.mutationQueue.setLastStreamToken(n,e)})},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.queryCache.getLastRemoteSnapshotVersion(t)})},e.prototype.applyRemoteEvent=function(t){var n=this,r=this.remoteDocuments.newChangeBuffer();return this.persistence.runTransaction("Apply remote event","readwrite-primary",function(o){var c=[],l=Ke();N(t.targetChanges,function(r,h){var f=n.queryDataByTarget[r];if(f){h.addedDocuments.forEach(function(e){l=l.add(e)}),h.modifiedDocuments.forEach(function(e){l=l.add(e)}),c.push(n.queryCache.removeMatchingKeys(o,h.removedDocuments,r).next(function(){return n.queryCache.addMatchingKeys(o,h.addedDocuments,r)}));var d=h.resumeToken;if(d.length>0){var m=f;f=f.copy({resumeToken:d,snapshotVersion:t.snapshotVersion}),n.queryDataByTarget[r]=f,e.shouldPersistQueryData(m,f,h)&&c.push(n.queryCache.updateQueryData(o,f))}}});var h=Ue(),f=Ke();t.documentUpdates.forEach(function(e,t){f=f.add(e)}),c.push(r.getEntries(o,f).next(function(e){t.documentUpdates.forEach(function(f,d){var m=e.get(f);null==m||d.version.isEqual(Oe.MIN)||l.has(d.key)&&!m.hasPendingWrites||d.version.compareTo(m.version)>=0?(r.addEntry(d),h=h.insert(f,d)):_("LocalStore","Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",d.version),t.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))})}));var d=t.snapshotVersion;if(!d.isEqual(Oe.MIN)){var m=n.queryCache.getLastRemoteSnapshotVersion(o).next(function(e){return T(d.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+d+" < "+e),n.queryCache.setTargetsMetadata(o,o.currentSequenceNumber,d)});c.push(m)}return Je.waitFor(c).next(function(){return r.apply(o)}).next(function(){return n.localDocuments.getLocalViewOfDocuments(o,h)})})},e.shouldPersistQueryData=function(e,t,n){return 0!==t.resumeToken.length&&(0===e.resumeToken.length||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0))},e.prototype.notifyLocalViewChanges=function(e){var t=this;return this.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return Je.forEach(e,function(e){return t.localViewReferences.addReferences(e.addedKeys,e.targetId),t.localViewReferences.removeReferences(e.removedKeys,e.targetId),Je.forEach(e.removedKeys,function(e){return t.persistence.referenceDelegate.removeReference(n,e)})})})},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly",function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)})},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly",function(n){return t.localDocuments.getDocument(n,e)})},e.prototype.allocateQuery=function(e){var t=this;return this.persistence.runTransaction("Allocate query","readwrite",function(n){var r;return t.queryCache.getQueryData(n,e).next(function(o){return o?(r=o,Je.resolve()):t.queryCache.allocateTargetId(n).next(function(o){return r=new un(e,o,on.Listen,n.currentSequenceNumber),t.queryCache.addQueryData(n,r)})}).next(function(){return T(!t.queryDataByTarget[r.targetId],"Tried to allocate an already allocated query: "+e),t.queryDataByTarget[r.targetId]=r,r})})},e.prototype.releaseQuery=function(e,t){var n=this,r=t?"readwrite":"readwrite-primary";return this.persistence.runTransaction("Release query",r,function(r){return n.queryCache.getQueryData(r,e).next(function(o){T(null!=o,"Tried to release nonexistent query: "+e);var c=o.targetId,l=n.queryDataByTarget[c],h=n.localViewReferences.removeReferencesForId(c);return delete n.queryDataByTarget[c],t?Je.resolve():Je.forEach(h,function(e){return n.persistence.referenceDelegate.removeReference(r,e)}).next(function(){return n.persistence.referenceDelegate.removeTarget(r,l)})})})},e.prototype.executeQuery=function(e){var t=this;return this.persistence.runTransaction("Execute query","readonly",function(n){return t.localDocuments.getDocumentsMatchingQuery(n,e)})},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly",function(n){return t.queryCache.getMatchingKeysForTargetId(n,e)})},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,o=t.batch,c=o.keys(),l=Je.resolve();return c.forEach(function(r){l=l.next(function(){return n.getEntry(e,r)}).next(function(e){var c=e,l=t.docVersions.get(r);T(null!==l,"ackVersions should contain every doc in the write."),(!c||c.version.compareTo(l)<0)&&((c=o.applyToRemoteDocument(r,c,t))?n.addEntry(c):T(!e,"Mutation batch "+o+" applied to document "+e+" resulted in null"))})}),l.next(function(){return r.mutationQueue.removeMutationBatch(e,o)})},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.queryDataByTarget)})},e.prototype.getQueryForTarget=function(e){var t=this;return this.queryDataByTarget[e]?Promise.resolve(this.queryDataByTarget[e].query):this.persistence.runTransaction("Get query data","readonly",function(n){return t.queryCache.getQueryDataForTarget(n,e).next(function(e){return e?e.query:null})})},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly",function(t){return e.remoteDocuments.getNewDocumentChanges(t)})},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),sr=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=I(),this.batchesByDocumentKey=new je(or.compareByKey)}return e.prototype.checkEmpty=function(e){return Je.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,o=this.indexOfExistingBatchId(r,"acknowledged");T(0===o,"Can only acknowledge the first batch in the mutation queue");var c=this.mutationQueue[o];return T(r===c.batchId,"Queue ordering failure: expected batch "+r+", got batch "+c.batchId),this.lastStreamToken=n,Je.resolve()},e.prototype.getLastStreamToken=function(e){return Je.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Je.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){T(0!==r.length,"Mutation batches should not be empty");var o=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&T(this.mutationQueue[this.mutationQueue.length-1].batchId<o,"Mutation batchIDs must be monotonically increasing order");var c=new Ye(o,t,n,r);this.mutationQueue.push(c);for(var l=0,h=r;l<h.length;l++){var f=h[l];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new or(f.key,o)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast())}return Je.resolve(c)},e.prototype.lookupMutationBatch=function(e,t){return Je.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return T(null!=n,"Failed to find local mutation batch."),Je.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),o=r<0?0:r;return Je.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)},e.prototype.getAllMutationBatches=function(e){return Je.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new or(t,0),o=new or(t,Number.POSITIVE_INFINITY),c=[];return this.batchesByDocumentKey.forEachInRange([r,o],function(e){T(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);T(null!==r,"Batches in the index must exist in the main table"),c.push(r)}),Je.resolve(c)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new je(re);return t.forEach(function(e){var t=new or(e,0),o=new or(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,o],function(t){T(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)})}),Je.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){T(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,o=n;be.isDocumentKey(o)||(o=o.child(""));var c=new or(new be(o),0),l=new je(re);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(l=l.add(e.targetOrBatchId)),!0)},c),Je.resolve(this.findMutationBatches(l))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)}),n},e.prototype.removeMutationBatch=function(e,t){var n=this;T(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Je.forEach(t.mutations,function(o){var c=new or(o.key,t.batchId);return r=r.delete(c),n.referenceDelegate.removeMutationReference(e,o.key)}).next(function(){n.batchesByDocumentKey=r})},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new or(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Je.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&T(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Je.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return T(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return T(n.batchId===e,"If found batch must match"),n},e}(),cr=function(){function e(e){this.persistence=e,this.queries=new Dt(function(q){return q.canonicalId()}),this.lastRemoteSnapshotVersion=Oe.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new ir,this.targetCount=0,this.targetIdGenerator=ut.forQueryCache()}return e.prototype.getTargetCount=function(e){return Je.resolve(this.targetCount)},e.prototype.forEachTarget=function(e,t){return this.queries.forEach(function(e,n){return t(n)}),Je.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Je.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Je.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Je.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Je.resolve()},e.prototype.saveQueryData=function(e){this.queries.set(e.query,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addQueryData=function(e,t){return T(!this.queries.has(t.query),"Adding a query that already exists"),this.saveQueryData(t),this.targetCount+=1,Je.resolve()},e.prototype.updateQueryData=function(e,t){return T(this.queries.has(t.query),"Updating a non-existent query"),this.saveQueryData(t),Je.resolve()},e.prototype.removeQueryData=function(e,t){return T(this.targetCount>0,"Removing a target from an empty cache"),T(this.queries.has(t.query),"Removing a non-existent target from the cache"),this.queries.delete(t.query),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Je.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,o=0,c=[];return this.queries.forEach(function(l,h){h.sequenceNumber<=t&&!n[h.targetId]&&(r.queries.delete(l),c.push(r.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),Je.waitFor(c).next(function(){return o})},e.prototype.getQueryCount=function(e){return Je.resolve(this.targetCount)},e.prototype.getQueryData=function(e,t){var n=this.queries.get(t)||null;return Je.resolve(n)},e.prototype.getQueryDataForTarget=function(e,t){return x("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(function(t){o.push(r.addReference(e,t))}),Je.waitFor(o)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,o=[];return r&&t.forEach(function(t){o.push(r.removeReference(e,t))}),Je.waitFor(o)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Je.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Je.resolve(n)},e.prototype.containsKey=function(e,t){return Je.resolve(this.references.containsKey(t))},e}();var ur=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new Ne(be.comparator),this.newDocumentChanges=Ke(),this.size=0}return e.prototype.addEntries=function(e,t,n){for(var r=[],o=0,c=t;o<c.length;o++){var l=c[o],h=l.maybeDocument.key;this.docs=this.docs.insert(h,l),this.newDocumentChanges=this.newDocumentChanges.add(h),r.push(this.indexManager.addToCollectionParentIndex(e,h.path.popLast()))}return this.size+=n,Je.waitFor(r)},e.prototype.removeEntry=function(e,t){var n=this.docs.get(t);return n?(this.docs=this.docs.remove(t),this.size-=n.size,Je.resolve(n.size)):Je.resolve(0)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Je.resolve(n?n.maybeDocument:null)},e.prototype.getSizedEntry=function(e,t){return Je.resolve(this.docs.get(t))},e.prototype.getEntries=function(e,t){var n=this,r=qe();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)}),Je.resolve(r)},e.prototype.getSizedEntries=function(e,t){var n=this,r=qe(),o=new Ne(be.comparator);return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null),o=o.insert(e,t?t.size:0)}),Je.resolve({maybeDocuments:r,sizeMap:o})},e.prototype.getDocumentsMatchingQuery=function(e,t){T(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var n=ze(),r=new be(t.path.child("")),o=this.docs.getIteratorFrom(r);o.hasNext();){var c=o.getNext(),l=c.key,h=c.value.maybeDocument;if(!t.path.isPrefixOf(l.path))break;h instanceof Tt&&t.matches(h)&&(n=n.insert(h.key,h))}return Je.resolve(n)},e.prototype.forEachDocumentKey=function(e,t){return Je.forEach(this.docs,function(e){return t(e)})},e.prototype.getNewDocumentChanges=function(e){var t=this,n=Ue();return this.newDocumentChanges.forEach(function(e){var r=t.docs.get(e),o=r?r.maybeDocument:new Et(e,Oe.forDeletedDoc());n=n.insert(e,o)}),this.newDocumentChanges=Ke(),Je.resolve(n)},e.prototype.newChangeBuffer=function(){return new lr(this.sizer,this)},e.prototype.getSize=function(e){return Je.resolve(this.size)},e}(),lr=function(e){function t(t,n){var r=e.call(this)||this;return r.sizer=t,r.documentCache=n,r}return h.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=this.assertChanges(),r=0,o=[];return n.forEach(function(e,n){var c=t.documentSizes.get(e);T(void 0!==c,"Attempting to change document "+e.toString()+" without having read it first");var l=t.sizer(n);r+=l-c,o.push({maybeDocument:n,size:l})}),this.documentCache.addEntries(e,o,r)},t.prototype.getFromCache=function(e,t){return this.documentCache.getSizedEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getSizedEntries(e,t)},t}(At),fr=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new pe(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.queryCache=new cr(this);this.indexManager=new Ft,this.remoteDocumentCache=new ur(this.indexManager,function(e){return n.referenceDelegate.documentSize(e)})}return e.createLruPersistence=function(t,n,r){return new e(t,function(p){return new mr(p,new ln(n),r)})},e.createEagerPersistence=function(t){return new e(t,function(p){return new pr(p)})},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(e){return[2,[this.clientId]]})})},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new sr(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getQueryCache=function(){return this.queryCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;_("MemoryPersistence","Starting transaction:",e);var o=new dr(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(o).next(function(e){return r.referenceDelegate.onTransactionCommitted(o).next(function(){return e})}).toPromise()},e.prototype.mutationQueuesContainKey=function(e,t){return Je.or((n=this.mutationQueues,r=[],P(n,function(e,t){return r.push(t)}),r).map(function(n){return function(){return n.containsKey(e,t)}}));var n,r},e}(),dr=function(e){this.currentSequenceNumber=e},pr=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw x("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Je.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Je.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Je.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return r.removeQueryData(e,t)})},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache();return Je.forEach(this.orphanedDocuments,function(r){return t.isReferenced(e,r).next(function(t){return t?Je.resolve():n.removeEntry(e,r).next(function(){})})}).next(function(){t._orphanedDocuments=null})},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return Je.or([function(){return n.persistence.getQueryCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Je.resolve(n.inMemoryPins.containsKey(t))}])},e}(),mr=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Dt(function(e){return Ie(e.path)}),this.garbageCollector=new vn(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return Je.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getQueryCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getQueryCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Je.forEach(this.orphanedSequenceNumbers,function(r,o){return n.isPinned(e,r,o).next(function(e){return e?Je.resolve():t(o)})})},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getQueryCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,o=this.persistence.getRemoteDocumentCache();return o.forEachDocumentKey(e,function(c){return n.isPinned(e,c,t).next(function(t){return t?Je.resolve():(r++,o.removeEntry(e,c).next())})}).next(function(){return r})},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Je.resolve()},e.prototype.removeTarget=function(e,t){var n=t.copy({sequenceNumber:e.currentSequenceNumber});return this.persistence.getQueryCache().updateQueryData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Je.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Je.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Je.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw x("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return Je.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Je.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getQueryCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Je.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),vr=Number,gr=vr.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),yr=vr.MAX_SAFE_INTEGER||Math.pow(2,53)-1,wr=vr.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function _r(e){return null==e}function Sr(e){return wr(e)&&e<=yr&&e>=gr}var Cr,xr=function(){function e(e,t,n,r,o){this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=o,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),o=Math.max(0,n-r);this.currentBaseMs>0&&_("ExponentialBackoff","Backing off for "+o+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,o,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}();!function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff"}(Cr||(Cr={}));var Tr,Er,Ir=1e3,Dr=6e4,Ar=1.5,Rr=function(){function e(e,t,n,r,o,c){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=o,this.listener=c,this.state=Cr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new xr(e,t,Ir,Ar,Dr)}return e.prototype.isStarted=function(){return this.state===Cr.Starting||this.state===Cr.Open||this.state===Cr.Backoff},e.prototype.isOpen=function(){return this.state===Cr.Open},e.prototype.start=function(){this.state!==Cr.Error?(T(this.state===Cr.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(Cr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.inhibitBackoff=function(){T(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=Cr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(e){return this.isOpen()?[2,this.close(Cr.Initial)]:[2]})})},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(n){switch(n.label){case 0:return T(this.isStarted(),"Only started streams should be closed."),T(e===Cr.Error||_r(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==Cr.Error?this.backoff.reset():t&&t.code===D.RESOURCE_EXHAUSTED?(S(t.toString()),S("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===D.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}})})},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;T(this.state===Cr.Initial,"Must be in initial state to auth"),this.state=Cr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then(function(t){e.closeCount===n&&e.startStream(t)},function(n){t(function(){var t=new A(D.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)})})},e.prototype.startStream=function(e){var t=this;T(this.state===Cr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return T(t.state===Cr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=Cr.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},e.prototype.performBackoff=function(){var e=this;T(this.state===Cr.Error,"Should only perform backoff when in Error state"),this.state=Cr.Backoff,this.backoff.backoffAndRun(function(){return h.__awaiter(e,void 0,void 0,function(){return h.__generator(this,function(e){return T(this.state===Cr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=Cr.Initial,this.start(),T(this.isStarted(),"PersistentStream should have started"),[2]})})})},e.prototype.handleStreamClose=function(e){return T(this.isStarted(),"Can't handle server close on non-started stream"),_("PersistentStream","close with error: "+e),this.stream=null,this.close(Cr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget(function(){return t.closeCount===e?n():(_("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),kr=function(e){function t(t,n,r,o,c){var l=e.call(this,t,ce.ListenStreamConnectionBackoff,ce.ListenStreamIdle,n,r,c)||this;return l.serializer=o,l}return h.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Rr),Or=function(e){function t(t,n,r,o,c){var l=e.call(this,t,ce.WriteStreamConnectionBackoff,ce.WriteStreamIdle,n,r,c)||this;return l.serializer=o,l.handshakeComplete_=!1,l.lastStreamToken=I(),l}return h.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(T(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return T(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){T(this.isOpen(),"Writing handshake requires an opened stream"),T(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;T(this.isOpen(),"Writing mutations requires an opened stream"),T(this.handshakeComplete_,"Handshake must be complete before writing mutations"),T(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},t}(Rr),Nr=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new Or(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new kr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map(function(e){return t.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",n).then(function(n){var r=Ue();n.forEach(function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)});var o=[];return e.forEach(function(e){var t=r.get(e);T(!!t,"Missing entity in write response for "+e),o.push(t)}),o})},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeRPC(e,t,r)}).catch(function(e){throw e.code===D.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then(function(r){return n.connection.invokeStreamingRPC(e,t,r)}).catch(function(e){throw e.code===D.UNAUTHENTICATED&&n.credentials.invalidateToken(),e})},e}(),Pr=function(){function e(e){this.datastore=e,this.readVersions=Ge(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return h.__awaiter(this,void 0,void 0,function(){var t,n=this;return h.__generator(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new A(D.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach(function(e){e instanceof Et||e instanceof Tt?n.recordVersion(e):x("Document in a transaction was a "+e.constructor.name)}),[2,t]}})})},e.prototype.set=function(e,data){this.write(data.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,data){try{this.write(data.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new nr(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return h.__awaiter(this,void 0,void 0,function(){var e;return h.__generator(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach(function(t){e=e.remove(t.key)}),!e.isEmpty())throw new A(D.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},e.prototype.recordVersion=function(e){var t;if(e instanceof Tt)t=e.version;else{if(!(e instanceof Et))throw x("Document in a transaction was a "+e.constructor.name);t=Oe.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new A(D.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?Yn.updateTime(t):Yn.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(Oe.forDeletedDoc()))throw new A(D.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yn.updateTime(t)}return Yn.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){T(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline"}(Tr||(Tr={})),function(e){e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState"}(Er||(Er={}));var Mr,Lr=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Tr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Tr.Unknown),T(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(ce.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,T(e.state===Tr.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Tr.Offline),Promise.resolve()}))},e.prototype.handleWatchStreamFailure=function(e){this.state===Tr.Online?(this.setAndBroadcast(Tr.Unknown),T(0===this.watchStreamFailures,"watchStreamFailures must be 0"),T(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Tr.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Tr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(details){var e="Could not reach Cloud Firestore backend. "+details+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(S(e),this.shouldWarnClientIsOffline=!1):_("OnlineStateTracker",e)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}();function jr(code){switch(code){case D.OK:return x("Treated status OK as error");case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return x("Unknown status code: "+code)}}function Fr(code){if(void 0===code)return S("GRPC error has no .code"),D.UNKNOWN;switch(code){case Mr.OK:return D.OK;case Mr.CANCELLED:return D.CANCELLED;case Mr.UNKNOWN:return D.UNKNOWN;case Mr.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Mr.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Mr.INTERNAL:return D.INTERNAL;case Mr.UNAVAILABLE:return D.UNAVAILABLE;case Mr.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Mr.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Mr.NOT_FOUND:return D.NOT_FOUND;case Mr.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Mr.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Mr.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Mr.ABORTED:return D.ABORTED;case Mr.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Mr.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Mr.DATA_LOSS:return D.DATA_LOSS;default:return x("Unknown status code: "+code)}}function Br(code){if(void 0===code)return Mr.OK;switch(code){case D.OK:return Mr.OK;case D.CANCELLED:return Mr.CANCELLED;case D.UNKNOWN:return Mr.UNKNOWN;case D.DEADLINE_EXCEEDED:return Mr.DEADLINE_EXCEEDED;case D.RESOURCE_EXHAUSTED:return Mr.RESOURCE_EXHAUSTED;case D.INTERNAL:return Mr.INTERNAL;case D.UNAVAILABLE:return Mr.UNAVAILABLE;case D.UNAUTHENTICATED:return Mr.UNAUTHENTICATED;case D.INVALID_ARGUMENT:return Mr.INVALID_ARGUMENT;case D.NOT_FOUND:return Mr.NOT_FOUND;case D.ALREADY_EXISTS:return Mr.ALREADY_EXISTS;case D.PERMISSION_DENIED:return Mr.PERMISSION_DENIED;case D.FAILED_PRECONDITION:return Mr.FAILED_PRECONDITION;case D.ABORTED:return Mr.ABORTED;case D.OUT_OF_RANGE:return Mr.OUT_OF_RANGE;case D.UNIMPLEMENTED:return Mr.UNIMPLEMENTED;case D.DATA_LOSS:return Mr.DATA_LOSS;default:return x("Unknown status code: "+code)}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(Mr||(Mr={}));var Ur,qr,Vr=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||be.comparator(t.key,n.key)}:function(e,t){return be.comparator(e.key,t.key)},this.keyedMap=ze(),this.sortedSet=new Ne(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();!function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(Ur||(Ur={})),function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(qr||(qr={}));var zr,Wr=function(){function e(){this.changeMap=new Ne(be.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==Ur.Added&&n.type===Ur.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Ur.Metadata&&n.type!==Ur.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Ur.Modified&&n.type===Ur.Modified?this.changeMap=this.changeMap.insert(t,{type:Ur.Modified,doc:e.doc}):e.type===Ur.Modified&&n.type===Ur.Added?this.changeMap=this.changeMap.insert(t,{type:Ur.Added,doc:e.doc}):e.type===Ur.Removed&&n.type===Ur.Added?this.changeMap=this.changeMap.remove(t):e.type===Ur.Removed&&n.type===Ur.Modified?this.changeMap=this.changeMap.insert(t,{type:Ur.Removed,doc:n.doc}):e.type===Ur.Added&&n.type===Ur.Removed?this.changeMap=this.changeMap.insert(t,{type:Ur.Modified,doc:e.doc}):x("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal(function(t,n){e.push(n)}),e},e}(),Gr=function(){function e(e,t,n,r,o,c,l,h){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=l,this.excludesMetadataChanges=h}return e.fromInitialDocuments=function(t,n,r,o){var c=[];return n.forEach(function(e){c.push({type:Ur.Added,doc:e})}),new e(t,n,Vr.emptySet(n),c,r,o,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0},e}(),Qr=function(){function e(e,t,n,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=o}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,o=((r={})[t]=Kr.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(Oe.MIN,o,$e(),Ue(),Ke())},e}(),Kr=function(){function e(e,t,n,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=o}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(I(),n,Ke(),Ke(),Ke())},e}(),Hr=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},$r=function(e,t){this.targetId=e,this.existenceFilter=t};!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(zr||(zr={}));var Yr=function(e,t,n,r){void 0===n&&(n=I()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Xr=function(){function e(){this.pendingResponses=0,this.documentChanges=ei(),this._resumeToken=I(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=Ke(),t=Ke(),n=Ke();return this.documentChanges.forEach(function(r,o){switch(o){case Ur.Added:e=e.add(r);break;case Ur.Modified:t=t.add(r);break;case Ur.Removed:n=n.add(r);break;default:x("Encountered invalid change type: "+o)}}),new Kr(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=ei()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),Jr=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Ue(),this.pendingDocumentTargetMapping=Zr(),this.pendingTargetResets=new je(re)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Tt?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof Et&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var o=0,c=e.removedTargetIds;o<c.length;o++){r=c[o];this.removeDocumentFromTarget(r,e.key,e.newDoc)}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ensureTargetState(n);switch(e.state){case zr.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case zr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case zr.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),T(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case zr.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case zr.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:x("Unknown target watch change state: "+e.state)}})},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):N(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.queryDataForActiveTarget(t);if(r){var o=r.query;if(o.isDocumentQuery())if(0===n){var c=new be(o.path);this.removeDocumentFromTarget(t,c,new Et(c,Oe.forDeletedDoc()))}else T(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};N(this.targetStates,function(r,o){var c=t.queryDataForActiveTarget(r);if(c){if(o.current&&c.query.isDocumentQuery()){var l=new be(c.query.path);null!==t.pendingDocumentUpdates.get(l)||t.targetContainsDocument(r,l)||t.removeDocumentFromTarget(r,l,new Et(l,e))}o.hasPendingChanges&&(n[r]=o.toTargetChange(),o.clearPendingChanges())}});var r=Ke();this.pendingDocumentTargetMapping.forEach(function(e,n){var o=!0;n.forEachWhile(function(e){var n=t.queryDataForActiveTarget(e);return!n||n.purpose===on.LimboResolution||(o=!1,!1)}),o&&(r=r.add(e))});var o=new Qr(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Ue(),this.pendingDocumentTargetMapping=Zr(),this.pendingTargetResets=new je(re),o},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Ur.Modified:Ur.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Ur.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Xr),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new je(re),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.queryDataForActiveTarget(e);return t||_("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.queryDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getQueryDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;T(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Xr,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(n){t.removeDocumentFromTarget(e,n,null)})},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function Zr(){return new Ne(be.comparator)}function ei(){return new Ne(be.comparator)}var ti="RemoteStore",ni=function(){function e(e,t,n,r,o){var c=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=o,this.connectivityMonitor.addCallback(function(e){n.enqueueAndForget(function(){return h.__awaiter(c,void 0,void 0,function(){return h.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(_(ti,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new Lr(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return h.__awaiter(this,void 0,void 0,function(){var e;return h.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Tr.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.disableNetwork=function(){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Tr.Offline),[2]}})})},e.prototype.disableNetworkInternal=function(){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(_(ti,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},e.prototype.shutdown=function(){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(e){switch(e.label){case 0:return _(ti,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Tr.Unknown),[2]}})})},e.prototype.listen=function(e){T(!k(this.listenTargets,e.targetId),"listen called with duplicate targetId!"),this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e)},e.prototype.unlisten=function(e){T(k(this.listenTargets,e),"unlisten called without assigned target ID!"),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),M(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Tr.Unknown))},e.prototype.getQueryDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){T(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Jr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!M(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return h.__awaiter(this,void 0,void 0,function(){var e=this;return h.__generator(this,function(t){return N(this.listenTargets,function(t,n){e.sendWatchRequest(n)}),[2]})})},e.prototype.onWatchStreamClose=function(e){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(t){return void 0===e&&T(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Tr.Unknown),[2]})})},e.prototype.onWatchStreamChange=function(e,t){return h.__awaiter(this,void 0,void 0,function(){var n;return h.__generator(this,function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Tr.Online),e instanceof Yr&&e.state===zr.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Hr?this.watchChangeAggregator.handleDocumentChange(e):e instanceof $r?this.watchChangeAggregator.handleExistenceFilter(e):(T(e instanceof Yr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(Oe.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},e.prototype.raiseWatchSnapshot=function(e){var t=this;T(!e.isEqual(Oe.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return N(n.targetChanges,function(n,r){if(r.resumeToken.length>0){var o=t.listenTargets[n];o&&(t.listenTargets[n]=o.copy({resumeToken:r.resumeToken,snapshotVersion:e}))}}),n.targetMismatches.forEach(function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.copy({resumeToken:I()}),t.sendUnwatchRequest(e);var r=new un(n.query,e,on.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}}),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;T(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach(function(e){r=r.then(function(){return h.__awaiter(t,void 0,void 0,function(){return h.__generator(this,function(t){return k(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]})})})}),r},e.prototype.fillWritePipeline=function(){return h.__awaiter(this,void 0,void 0,function(){var e,t;return h.__generator(this,function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){T(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){T(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(e){return this.writeStream.writeHandshake(),[2]})})},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}}).catch(Cn)},e.prototype.onMutationResult=function(e,t){var n=this;T(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),o=Xe.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(o).then(function(){return n.fillWritePipeline()})},e.prototype.onWriteStreamClose=function(e){return h.__awaiter(this,void 0,void 0,function(){var t=this;return h.__generator(this,function(n){return void 0===e&&T(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then(function(){t.shouldStartWriteStream()&&t.startWriteStream()})]):[2]})})},e.prototype.handleHandshakeError=function(e){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(t){return jr(e.code)?(_(ti,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=I(),[2,this.localStore.setLastStreamToken(I()).catch(Cn)]):[2]})})},e.prototype.handleWriteError=function(e){return h.__awaiter(this,void 0,void 0,function(){var t,n=this;return h.__generator(this,function(r){return jr(code=e.code)&&code!==D.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then(function(){return n.fillWritePipeline()})]):[2];var code})})},e.prototype.createTransaction=function(){return new Pr(this.datastore)},e.prototype.restartNetwork=function(){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Tr.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}})})},e.prototype.handleCredentialChange=function(){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(_(ti,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.applyPrimaryState=function(e){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Tr.Unknown),t.label=4;case 4:return[2]}})})},e}(),ri=function(){function e(e,t){if(j("GeoPoint",arguments,2),U("GeoPoint","number",1,e),U("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new A(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new A(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return re(this._lat,e._lat)||re(this._long,e._long)},e}(),ii=function(){function e(path,e,t,n,r,o,c){void 0===e&&(e=null),void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=null),void 0===o&&(o=null),void 0===c&&(c=null),this.path=path,this.collectionGroup=e,this.explicitOrderBy=t,this.filters=n,this.limit=r,this.startAt=o,this.endAt=c,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(path){return new e(path)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[gi]:this.memoizedOrderBy=[new vi(e),gi];else{T(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,o=this.explicitOrderBy;r<o.length;r++){var c=o[r];this.memoizedOrderBy.push(c),c.field.isKeyField()&&(n=!0)}if(!n){var l=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:pi.ASCENDING;this.memoizedOrderBy.push(l===pi.ASCENDING?gi:yi)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(filter){T(null==this.getInequalityFilterField()||!(filter instanceof si)||!filter.isInequality()||filter.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),T(!this.isDocumentQuery(),"No filtering allowed for document query");var t=this.filters.concat([filter]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),t,this.limit,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){T(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.withLimit=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(path){return new e(path,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();this.isCollectionGroupQuery()&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++){e+=n[t].canonicalId(),e+=","}e+="|ob:";for(var r=0,o=this.orderBy;r<o.length;r++){e+=o[r].canonicalId(),e+=","}_r(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),_r(this.limit)||(e+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(e+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var i=0;i<this.orderBy.length;i++)if(!this.orderBy[i].isEqual(e.orderBy[i]))return!1;if(this.filters.length!==e.filters.length)return!1;for(i=0;i<this.filters.length;i++)if(!this.filters[i].isEqual(e.filters[i]))return!1;return this.collectionGroup===e.collectionGroup&&(!!this.path.isEqual(e.path)&&(!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)))},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,o=this.orderBy;r<o.length;r++){var c=o[r],l=c.compare(e,t);if(0!==l)return l;n=n||c.field.isKeyField()}return T(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimit=function(){return!_r(this.limit)},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var filter=t[e];if(filter instanceof si&&filter.isInequality())return filter.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var filter=n[t];if(filter instanceof si&&e.indexOf(filter.op)>=0)return filter.op}return null},e.prototype.isDocumentQuery=function(){return be.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):be.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++){if(!n[t].matches(e))return!1}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){T(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),oi=function(){},ai=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return x("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),si=function(e){function t(t,n,r){var o=e.call(this)||this;return o.field=t,o.op=n,o.value=r,o}return h.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===ai.IN?(T(r instanceof Qn,"Comparing on key with IN, but filter value not an ArrayValue"),T(r.internalValue.every(function(e){return e instanceof zn}),"Comparing on key with IN, but an array value was not a RefValue"),new ui(e,r)):(T(r instanceof zn,"Comparing on key, but filter value not a RefValue"),T(n!==ai.ARRAY_CONTAINS&&n!==ai.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new ci(e,n,r));if(r.isEqual(On.INSTANCE)){if(n!==ai.EQUAL)throw new A(D.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(Fn.NAN)){if(n!==ai.EQUAL)throw new A(D.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===ai.ARRAY_CONTAINS?new hi(e,r):n===ai.IN?(T(r instanceof Qn,"IN filter has invalid value: "+r.toString()),new fi(e,r)):n===ai.ARRAY_CONTAINS_ANY?(T(r instanceof Qn,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new di(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case ai.LESS_THAN:return e<0;case ai.LESS_THAN_OR_EQUAL:return e<=0;case ai.EQUAL:return 0===e;case ai.GREATER_THAN:return e>0;case ai.GREATER_THAN_OR_EQUAL:return e>=0;default:return x("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[ai.LESS_THAN,ai.LESS_THAN_OR_EQUAL,ai.GREATER_THAN,ai.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(oi),ci=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=be.comparator(e.key,t.key);return this.matchesComparison(n)},t}(si),ui=function(e){function t(t,n){var r=e.call(this,t,ai.IN,n)||this;return r.value=n,r}return h.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some(function(t){return e.key.isEqual(t.key)})},t}(si),hi=function(e){function t(t,n){return e.call(this,t,ai.ARRAY_CONTAINS,n)||this}return h.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Qn&&t.contains(this.value)},t}(si),fi=function(e){function t(t,n){var r=e.call(this,t,ai.IN,n)||this;return r.value=n,r}return h.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}(si),di=function(e){function t(t,n){var r=e.call(this,t,ai.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return h.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Qn&&n.internalValue.some(function(e){return t.value.contains(e)})},t}(si),pi=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),mi=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++){e+=n[t].toString()}return e},e.prototype.sortsBeforeDocument=function(e,t){T(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,i=0;i<this.position.length;i++){var r=e[i],component=this.position[i];if(r.field.isKeyField())T(component instanceof zn,"Bound has a non-key value where the key path is being used."),n=be.comparator(component.key,t.key);else{var o=t.field(r.field);T(void 0!==o,"Field should exist since document matched the orderBy already."),n=component.compareTo(o)}if(r.dir===pi.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var i=0;i<this.position.length;i++){var t=this.position[i],n=e.position[i];if(!t.isEqual(n))return!1}return!0},e}(),vi=function(){function e(e,t){this.field=e,void 0===t&&(t=pi.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Tt.compareByKey(e,t):Tt.compareByField(this.field,e,t);switch(this.dir){case pi.ASCENDING:return n;case pi.DESCENDING:return-1*n;default:return x("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),gi=new vi(ye.keyField(),pi.ASCENDING),yi=new vi(ye.keyField(),pi.DESCENDING),bi=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new qn(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),wi=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=Ci(e),n=function(e){t.find(function(element){return element.isEqual(e)})||t.push(e)},r=0,o=this.elements;r<o.length;r++){n(o[r])}return new Qn(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&ie(t.elements,this.elements)},e}(),_i=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=Ci(e),n=function(e){t=t.filter(function(element){return!element.isEqual(e)})},r=0,o=this.elements;r<o.length;r++){n(o[r])}return new Qn(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&ie(t.elements,this.elements)},e}(),Si=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof jn&&this.operand instanceof jn){var r=n.internalValue+this.operand.internalValue;return new jn(r)}r=n.internalValue+this.operand.internalValue;return new Fn(r)},e.prototype.applyToRemoteDocument=function(e,t){return T(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Pn?e:new jn(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function Ci(e){return e instanceof Qn?e.internalValue.slice():[]}var xi,Ti,Ei=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),Ii=((xi={})[pi.ASCENDING.name]="ASCENDING",xi[pi.DESCENDING.name]="DESCENDING",xi),Di=((Ti={})[ai.LESS_THAN.name]="LESS_THAN",Ti[ai.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Ti[ai.GREATER_THAN.name]="GREATER_THAN",Ti[ai.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Ti[ai.EQUAL.name]="EQUAL",Ti[ai.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Ti[ai.IN.name]="IN",Ti[ai.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",Ti),Ai=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(e,t){T(!_r(e),t+" is missing")}function ki(e){return"number"==typeof e?e:"string"==typeof e?Number(e):x("can't parse "+e)}var Oi=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var code=void 0===e.code?D.UNKNOWN:Fr(e.code);return new A(code,e.message||"")},e.prototype.toInt32Value=function(e){return _r(e)?void 0:{value:e}},e.prototype.fromInt32Value=function(e){var t;return _r(t="object"==typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);T(!!e,"Cannot deserialize null or undefined timestamp.");var t=ki(e.seconds||"0"),n=e.nanos||0;return new ke(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=Ai.exec(e);if(T(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var o=new Date(e),c=Math.floor(o.getTime()/1e3);return new ke(c,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"==typeof e?(T(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ue.fromBase64String(e)):(T(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ue.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return T(!!e,"Trying to deserialize version that isn't set"),Oe.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,path){return this.fullyQualifiedPrefixPath(e).child("documents").child(path).canonicalString()},e.prototype.fromResourceName=function(e){var t=ve.fromString(e);return T(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return T(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),T(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new be(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(path){return this.toResourceName(this.databaseId,path)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?ve.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new ve(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new ve(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return T(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(path){return path.length>=4&&"projects"===path.get(0)&&"databases"===path.get(2)},e.prototype.toValue=function(e){if(e instanceof On)return{nullValue:"NULL_VALUE"};if(e instanceof Nn)return{booleanValue:e.value()};if(e instanceof jn)return{integerValue:""+e.value()};if(e instanceof Fn){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Bn?{stringValue:e.value()}:e instanceof Gn?{mapValue:this.toMapValue(e)}:e instanceof Qn?{arrayValue:this.toArrayValue(e)}:e instanceof Un?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Wn?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Vn?{bytesValue:this.toBytes(e.value())}:e instanceof zn?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:x("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return On.INSTANCE;if("booleanValue"in e)return Nn.of(e.booleanValue);if("integerValue"in e)return new jn(ki(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Fn.NAN;if("Infinity"===e.doubleValue)return Fn.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Fn.NEGATIVE_INFINITY}return new Fn(e.doubleValue)}if("stringValue"in e)return new Bn(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){Ri(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new Qn(n.map(function(e){return t.fromValue(e)}))}if("timestampValue"in e)return Ri(e.timestampValue,"timestampValue"),new Un(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){Ri(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,o=e.geoPointValue.longitude||0;return new Wn(new ri(r,o))}if("bytesValue"in e){Ri(e.bytesValue,"bytesValue");var c=this.fromBlob(e.bytesValue);return new Vn(c)}if("referenceValue"in e){Ri(e.referenceValue,"referenceValue");var l=this.fromResourceName(e.referenceValue),h=new de(l.get(1),l.get(3)),f=new be(this.extractLocalPathFromResourceName(l));return new zn(h,f)}return x("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return T(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){return new Tt(this.fromName(e.name),this.fromVersion(e.updateTime),this.fromFields(e.fields||{}),{hasCommittedMutations:!!t})},e.prototype.toFields=function(e){var t=this,n={};return e.forEach(function(e,r){n[e]=t.toValue(r)}),n},e.prototype.fromFields=function(object){var e=this,map=object,t=Gn.EMPTY;return P(map,function(n,r){t=t.set(new ye([n]),e.fromValue(r))}),t},e.prototype.toMapValue=function(map){return{fields:this.toFields(map)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},e.prototype.fromFound=function(e){T(!!e.found,"Tried to deserialize a found document from a missing document."),Ri(e.found.name,"doc.found.name"),Ri(e.found.updateTime,"doc.found.updateTime");var t=this.fromName(e.found.name),n=this.fromVersion(e.found.updateTime),r=this.fromFields(e.found.fields||{});return new Tt(t,n,r,{},e.found)},e.prototype.fromMissing=function(e){T(!!e.missing,"Tried to deserialize a missing document from a found document."),T(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new Et(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):x("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case zr.Added:return"ADD";case zr.Current:return"CURRENT";case zr.NoChange:return"NO_CHANGE";case zr.Removed:return"REMOVE";case zr.Reset:return"RESET";default:return x("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof $r)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Hr){if(e.newDoc instanceof Tt){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof Et){t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof Yr){var n=void 0;return e.cause&&(n={code:Br(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return x("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t;if("targetChange"in e){Ri(e.targetChange,"targetChange");var n=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),c=e.targetChange.cause,l=c&&this.fromRpcStatus(c);t=new Yr(n,r,o,l||null)}else if("documentChange"in e){Ri(e.documentChange,"documentChange"),Ri(e.documentChange.document,"documentChange.name"),Ri(e.documentChange.document.name,"documentChange.document.name"),Ri(e.documentChange.document.updateTime,"documentChange.document.updateTime");var h=e.documentChange,f=this.fromName(h.document.name),d=this.fromVersion(h.document.updateTime),m=this.fromFields(h.document.fields||{}),v=new Tt(f,d,m,{},h.document),y=h.targetIds||[],w=h.removedTargetIds||[];t=new Hr(y,w,v.key,v)}else if("documentDelete"in e){Ri(e.documentDelete,"documentDelete"),Ri(e.documentDelete.document,"documentDelete.document");var _=e.documentDelete;f=this.fromName(_.document),d=_.readTime?this.fromVersion(_.readTime):Oe.forDeletedDoc(),v=new Et(f,d),w=_.removedTargetIds||[];t=new Hr([],w,v.key,v)}else if("documentRemove"in e){Ri(e.documentRemove,"documentRemove"),Ri(e.documentRemove.document,"documentRemove");var S=e.documentRemove;f=this.fromName(S.document),w=S.removedTargetIds||[];t=new Hr([],w,f,null)}else{if(!("filter"in e))return x("Unknown change type "+JSON.stringify(e));Ri(e.filter,"filter"),Ri(e.filter.targetId,"filter.targetId");var filter=e.filter,C=filter.count||0,T=new Ei(C),E=filter.targetId;t=new $r(E,T)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?zr.NoChange:"ADD"===e?zr.Added:"REMOVE"===e?zr.Removed:"CURRENT"===e?zr.Current:"RESET"===e?zr.Reset:x("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return Oe.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Oe.MIN:t.readTime?this.fromVersion(t.readTime):Oe.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof Jn)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof nr)t={delete:this.toName(e.key)};else if(e instanceof Zn)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof er))return x("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):Yn.NONE;if(e.update){Ri(e.update.name,"name");var r=this.fromName(e.update.name),o=this.fromFields(e.update.fields||{});if(e.updateMask){var c=this.fromDocumentMask(e.updateMask);return new Zn(r,o,c,n)}return new Jn(r,o,n)}if(e.delete){r=this.fromName(e.delete);return new nr(r,n)}if(e.transform){r=this.fromName(e.transform.document);var l=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return T(!0===n.exists,'Transforms only support precondition "exists == true"'),new er(r,l)}return x("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return T(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:x("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?Yn.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?Yn.exists(e.exists):Yn.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t),o=null;return e.transformResults&&e.transformResults.length>0&&(o=e.transformResults.map(function(e){return n.fromValue(e)})),new $n(r,o)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(T(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof bi)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wi)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof _i)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof Si)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw x("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)T("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=bi.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new wi(r.map(function(e){return t.fromValue(e)}))}else if("removeAllFromArray"in e){r=e.removeAllFromArray.values||[];n=new _i(r.map(function(e){return t.fromValue(e)}))}else if("increment"in e){var o=this.fromValue(e.increment);T(o instanceof Pn,"NUMERIC_ADD transform requires a NumberValue"),n=new Si(o)}else x("Unknown transform proto: "+JSON.stringify(e));var c=ye.fromServerFormat(e.fieldPath);return new Hn(c,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;T(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return ii.atPath(this.fromQueryPath(n))},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},path=e.path;null!==e.collectionGroup?(T(path.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(path),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(T(path.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(path.popLast()),t.structuredQuery.from=[{collectionId:path.lastSegment()}]);var n=this.toFilter(e.filters);n&&(t.structuredQuery.where=n);var r=this.toOrder(e.orderBy);r&&(t.structuredQuery.orderBy=r);var o=this.toInt32Value(e.limit);return void 0!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var path=this.fromQueryPath(e.parent),t=e.structuredQuery,n=t.from?t.from.length:0,r=null;if(n>0){T(1===n,"StructuredQuery.from with more than one collection is not supported.");var o=t.from[0];o.allDescendants?r=o.collectionId:path=path.child(o.collectionId)}var c=[];t.where&&(c=this.fromFilter(t.where));var l=[];t.orderBy&&(l=this.fromOrder(t.orderBy));var h=null;t.limit&&(h=this.fromInt32Value(t.limit));var f=null;t.startAt&&(f=this.fromCursor(t.startAt));var d=null;return t.endAt&&(d=this.fromCursor(t.endAt)),new ii(path,r,l,c,h,f,d)},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case on.Listen:return null;case on.ExistenceFilterMismatch:return"existence-filter-mismatch";case on.LimboResolution:return"limbo-document";default:return x("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.query;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(filter){return filter instanceof si?t.toUnaryOrFieldFilter(filter):x("Unrecognized filter: "+JSON.stringify(filter))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(filter){var e=this;return filter?void 0!==filter.unaryFilter?[this.fromUnaryFilter(filter)]:void 0!==filter.fieldFilter?[this.fromFieldFilter(filter)]:void 0!==filter.compositeFilter?filter.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(e,t){return e.concat(t)}):x("Unknown filter: "+JSON.stringify(filter)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},e.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},e.prototype.toCursor=function(cursor){var e=this;return{before:cursor.before,values:cursor.position.map(function(component){return e.toValue(component)})}},e.prototype.fromCursor=function(cursor){var e=this,t=!!cursor.before,n=cursor.values.map(function(component){return e.fromValue(component)});return new mi(n,t)},e.prototype.toDirection=function(e){return Ii[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return pi.ASCENDING;case"DESCENDING":return pi.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return Di[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return ai.EQUAL;case"GREATER_THAN":return ai.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return ai.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return ai.LESS_THAN;case"LESS_THAN_OR_EQUAL":return ai.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return ai.ARRAY_CONTAINS;case"IN":return ai.IN;case"ARRAY_CONTAINS_ANY":return ai.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return x("Unspecified operator");default:return x("Unknown operator")}},e.prototype.toFieldPathReference=function(path){return{fieldPath:path.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return ye.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new vi(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(filter){return si.create(this.fromFieldPathReference(filter.fieldFilter.field),this.fromOperatorName(filter.fieldFilter.op),this.fromValue(filter.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(filter){if(filter.op===ai.EQUAL){if(filter.value.isEqual(Fn.NAN))return{unaryFilter:{field:this.toFieldPathReference(filter.field),op:"IS_NAN"}};if(filter.value.isEqual(On.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(filter.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(filter.field),op:this.toOperatorName(filter.op),value:this.toValue(filter.value)}}},e.prototype.fromUnaryFilter=function(filter){switch(filter.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(filter.unaryFilter.field);return si.create(e,ai.EQUAL,Fn.NAN);case"IS_NULL":var t=this.fromFieldPathReference(filter.unaryFilter.field);return si.create(t,ai.EQUAL,On.INSTANCE);case"OPERATOR_UNSPECIFIED":return x("Unspecified filter");default:return x("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map(function(path){return ye.fromServerFormat(path)});return Kn.fromArray(t)},e}(),Ni=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},Pi=function(){function e(e){this.syncEngine=e,this.queries=new Dt(function(q){return q.canonicalId()}),this.onlineState=Tr.Unknown,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new Ni,this.queries.set(t,r)),r.listeners.push(e),e.applyOnlineStateChange(this.onlineState),r.viewSnap&&e.onViewSnapshot(r.viewSnap),n?this.syncEngine.listen(t).then(function(e){return r.targetId=e,e}):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return h.__awaiter(this,void 0,void 0,function(){var t,n,r,i;return h.__generator(this,function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},e.prototype.onWatchChange=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],o=r.query,c=this.queries.get(o);if(c){for(var l=0,h=c.listeners;l<h.length;l++){h[l].onViewSnapshot(r)}c.viewSnap=r}}},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,o=n.listeners;r<o.length;r++){o[r].onError(t)}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e,this.queries.forEach(function(t,n){for(var r=0,o=n.listeners;r<o.length;r++){o[r].applyOnlineStateChange(e)}})},e}(),Mi=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Tr.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(T(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var o=r[n];o.type!==Ur.Metadata&&t.push(o)}e=new Gr(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}this.raisedInitialEvent?this.shouldRaiseEvent(e)&&this.queryObserver.next(e):this.shouldRaiseInitialEvent(e,this.onlineState)&&this.raiseInitialEvent(e),this.snap=e},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e,this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&this.raiseInitialEvent(this.snap)},e.prototype.shouldRaiseInitialEvent=function(e,t){if(T(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Tr.Offline;return this.options.waitForSyncWhenOnline&&n?(T(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Tr.Offline},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){T(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Gr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),Li=function(){function e(e,t,n){this.targetId=e,this.addedKeys=t,this.removedKeys=n}return e.fromSnapshot=function(t,n){for(var r=Ke(),o=Ke(),c=0,l=n.docChanges;c<l.length;c++){var h=l[c];switch(h.type){case Ur.Added:r=r.add(h.doc.key);break;case Ur.Removed:o=o.add(h.doc.key)}}return new e(t,r,o)},e}(),ji=function(e){this.key=e},Fi=function(e){this.key=e},Bi=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Ke(),this.mutatedKeys=Ke(),this.documentSet=new Vr(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Wr,o=t?t.documentSet:this.documentSet,c=t?t.mutatedKeys:this.mutatedKeys,l=o,h=!1,f=this.query.hasLimit()&&o.size===this.query.limit?o.last():null;if(e.inorderTraversal(function(e,t){var d=o.get(e),m=t instanceof Tt?t:null;m&&(T(e.isEqual(m.key),"Mismatching keys found in document changes: "+e+" != "+m.key),m=n.query.matches(m)?m:null);var v=!!d&&n.mutatedKeys.has(d.key),y=!!m&&(m.hasLocalMutations||n.mutatedKeys.has(m.key)&&m.hasCommittedMutations),w=!1;d&&m?d.data.isEqual(m.data)?v!==y&&(r.track({type:Ur.Metadata,doc:m}),w=!0):n.shouldWaitForSyncedDocument(d,m)||(r.track({type:Ur.Modified,doc:m}),w=!0,f&&n.query.docComparator(m,f)>0&&(h=!0)):!d&&m?(r.track({type:Ur.Added,doc:m}),w=!0):d&&!m&&(r.track({type:Ur.Removed,doc:d}),w=!0,f&&(h=!0));w&&(m?(l=l.add(m),c=y?c.add(e):c.delete(e)):(l=l.delete(e),c=c.delete(e)))}),this.query.hasLimit())for(;l.size>this.query.limit;){var d=l.last();l=l.delete(d.key),c=c.delete(d.key),r.track({type:Ur.Removed,doc:d})}return T(!h||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:l,changeSet:r,needsRefill:h,mutatedKeys:c}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;T(!e.needsRefill,"Cannot apply changes that need a refill");var o=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var c=e.changeSet.getChanges();c.sort(function(e,t){return function(e,t){var n=function(e){switch(e){case Ur.Added:return 1;case Ur.Modified:case Ur.Metadata:return 2;case Ur.Removed:return 0;default:return x("Unknown ChangeType: "+e)}};return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)}),this.applyTargetChange(n);var l=t?this.updateLimboDocuments():[],h=0===this.limboDocuments.size&&this.current?qr.Synced:qr.Local,f=h!==this.syncState;return this.syncState=h,0!==c.length||f?{snapshot:new Gr(this.query,e.documentSet,o,c,e.mutatedKeys,h===qr.Local,f,!1),limboChanges:l}:{limboChanges:l}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===Tr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Wr,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return T(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=Ke(),this.documentSet.forEach(function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))});var n=[];return t.forEach(function(t){e.limboDocuments.has(t)||n.push(new Fi(t))}),this.limboDocuments.forEach(function(e){t.has(e)||n.push(new ji(e))}),n},e.prototype.synchronizeWithPersistedState=function(e,t){this._syncedDocuments=t,this.limboDocuments=Ke();var n=this.computeDocChanges(e);return this.applyChanges(n,!0)},e.prototype.computeInitialSnapshot=function(){return Gr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===qr.Local)},e}();var Ui=function(e,t,view){this.query=e,this.targetId=t,this.view=view},qi=function(e){this.key=e,this.receivedDocument=!1},Vi=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Dt(function(q){return q.canonicalId()}),this.queryViewsByTarget={},this.limboTargetsByKey=new Ne(be.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new ir,this.mutationUserCallbacks={},this.limboTargetIdGenerator=ut.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Tr.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){T(null!==e,"SyncEngine listener cannot be null"),T(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return h.__awaiter(this,void 0,void 0,function(){var t,n,r,o,c;return h.__generator(this,function(l){switch(l.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(e)];case 2:return o=l.sent(),c=this.sharedClientState.addLocalQueryTarget(o.targetId),t=o.targetId,[4,this.initializeViewAndComputeSnapshot(o,"current"===c)];case 3:n=l.sent(),this.isPrimary&&this.remoteStore.listen(o),l.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},e.prototype.initializeViewAndComputeSnapshot=function(e,t){return h.__awaiter(this,void 0,void 0,function(){var n,r,o,view,c,l,f,data;return h.__generator(this,function(h){switch(h.label){case 0:return n=e.query,[4,this.localStore.executeQuery(n)];case 1:return r=h.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return o=h.sent(),view=new Bi(n,o),c=view.computeDocChanges(r),l=Kr.createSynthesizedTargetChangeForCurrentChange(e.targetId,t&&this.onlineState!==Tr.Offline),T(0===(f=view.applyChanges(c,!0===this.isPrimary,l)).limboChanges.length,"View returned limbo docs before target ack from the server."),T(!!f.snapshot,"applyChanges for new view should always return a snapshot"),data=new Ui(n,e.targetId,view),this.queryViewsByQuery.set(n,data),this.queryViewsByTarget[e.targetId]=data,[2,f.snapshot]}})})},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return h.__awaiter(this,void 0,void 0,function(){var t,n,r;return h.__generator(this,function(o){switch(o.label){case 0:return[4,this.localStore.executeQuery(e.query)];case 1:return t=o.sent(),[4,this.localStore.remoteDocumentKeys(e.targetId)];case 2:return n=o.sent(),r=e.view.synchronizeWithPersistedState(t,n),this.isPrimary&&this.updateTrackedLimbos(e.targetId,r.limboChanges),[2,r]}})})},e.prototype.unlisten=function(e){return h.__awaiter(this,void 0,void 0,function(){var t,n=this;return h.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),T(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseQuery(e,!1).then(function(){n.sharedClientState.clearQueryState(t.targetId),n.remoteStore.unlisten(t.targetId),n.removeAndCleanupQuery(t)}).catch(Cn)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(t),[4,this.localStore.releaseQuery(e,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},e.prototype.write=function(e,t){return h.__awaiter(this,void 0,void 0,function(){var n;return h.__generator(this,function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}})})},e.prototype.runTransaction=function(e,t){return void 0===t&&(t=5),h.__awaiter(this,void 0,void 0,function(){var n,r,o,c;return h.__generator(this,function(l){switch(l.label){case 0:if(T(t>=0,"Got negative number of retries for transaction."),n=this.remoteStore.createTransaction(),_r(r=e(n))||!r.catch||!r.then)return[2,Promise.reject(Error("Transaction callback must return a Promise"))];l.label=1;case 1:return l.trys.push([1,4,,5]),[4,r];case 2:return o=l.sent(),[4,n.commit()];case 3:return l.sent(),[2,o];case 4:return c=l.sent(),t>0&&this.isRetryableTransactionError(c)?[2,this.runTransaction(e,t-1)]:[2,Promise.reject(c)];case 5:return[2]}})})},e.prototype.applyRemoteEvent=function(e){return h.__awaiter(this,void 0,void 0,function(){var t,n=this;return h.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),P(e.targetChanges,function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(T(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?r.receivedDocument=!0:t.modifiedDocuments.size>0?T(r.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(T(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,Cn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},e.prototype.applyOnlineStateChange=function(e,source){if(this.isPrimary&&source===Er.RemoteStore||!this.isPrimary&&source===Er.SharedClientState){var t=[];this.queryViewsByQuery.forEach(function(n,r){var o=r.view.applyOnlineStateChange(e);T(0===o.limboChanges.length,"OnlineState should not affect limbo documents."),o.snapshot&&t.push(o.snapshot)}),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(t),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return h.__awaiter(this,void 0,void 0,function(){var n,r,o,c,l,f,d=this;return h.__generator(this,function(h){switch(h.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],o=(o=new Ne(be.comparator)).insert(r,new Et(r,Oe.forDeletedDoc())),c=Ke().add(r),l=new Qr(Oe.MIN,{},new je(re),o,c),[2,this.applyRemoteEvent(l)]):[3,1];case 1:return T(!!(f=this.queryViewsByTarget[e]),"Unknown targetId: "+e),[4,this.localStore.releaseQuery(f.query,!1).then(function(){return d.removeAndCleanupQuery(f)}).catch(Cn)];case 2:h.sent(),this.syncEngineListener.onWatchError(f.query,t),h.label=3;case 3:return[2]}})})},e.prototype.applyBatchState=function(e,t,n){return h.__awaiter(this,void 0,void 0,function(){var r;return h.__generator(this,function(o){switch(o.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=o.sent())?(_("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return o.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):x("Unknown batchState: "+t),o.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return o.sent(),[2]}})})},e.prototype.applySuccessfulWrite=function(e){return h.__awaiter(this,void 0,void 0,function(){var t,n;return h.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Cn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},e.prototype.rejectFailedWrite=function(e,t){return h.__awaiter(this,void 0,void 0,function(){var n;return h.__generator(this,function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Cn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}})})},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Ne(re)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(T(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupQuery=function(e){var t=this;if(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.queryViewsByQuery.delete(e.query),delete this.queryViewsByTarget[e.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(e.targetId);this.limboDocumentRefs.removeReferencesForId(e.targetId),n.forEach(function(e){t.limboDocumentRefs.containsKey(e)||t.removeLimboTarget(e)})}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o instanceof ji)this.limboDocumentRefs.addReference(o.key,e),this.trackLimboChange(o);else if(o instanceof Fi){_("SyncEngine","Document no longer in limbo: "+o.key),this.limboDocumentRefs.removeReference(o.key,e),this.limboDocumentRefs.containsKey(o.key)||this.removeLimboTarget(o.key)}else x("Unknown limbo change: "+JSON.stringify(o))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){_("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=ii.atPath(t.path);this.limboResolutionsByTarget[n]=new qi(t),this.remoteStore.listen(new un(r,n,on.LimboResolution,pe.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return h.__awaiter(this,void 0,void 0,function(){var n,r,o,c=this;return h.__generator(this,function(l){switch(l.label){case 0:return n=[],r=[],o=[],this.queryViewsByQuery.forEach(function(l,h){o.push(Promise.resolve().then(function(){var t=h.view.computeDocChanges(e);return t.needsRefill?c.localStore.executeQuery(h.query).then(function(e){return h.view.computeDocChanges(e,t)}):t}).then(function(e){var o=t&&t.targetChanges[h.targetId],l=h.view.applyChanges(e,!0===c.isPrimary,o);if(c.updateTrackedLimbos(h.targetId,l.limboChanges),l.snapshot){c.isPrimary&&c.sharedClientState.updateQueryState(h.targetId,l.snapshot.fromCache?"not-current":"current"),n.push(l.snapshot);var f=Li.fromSnapshot(h.targetId,l.snapshot);r.push(f)}}))}),[4,Promise.all(o)];case 1:return l.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return l.sent(),[2]}})})},e.prototype.assertSubscribed=function(e){T(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return h.__awaiter(this,void 0,void 0,function(){var t,n;return h.__generator(this,function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?[4,this.localStore.handleUserChange(e)]:[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}})})},e.prototype.applyPrimaryState=function(e){return h.__awaiter(this,void 0,void 0,function(){var t,n,r,o,c,l,f,d=this;return h.__generator(this,function(h){switch(h.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return h.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=h.sent(),r=0,o=n;r<o.length;r++)c=o[r],this.remoteStore.listen(c);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,l=[],f=Promise.resolve(),N(this.queryViewsByTarget,function(e,t){d.sharedClientState.isLocalQueryTarget(e)?l.push(e):f=f.then(function(){return d.unlisten(t.query)}),d.remoteStore.unlisten(t.targetId)}),[4,f]);case 4:return h.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(l)];case 5:return h.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:h.sent(),h.label=7;case 7:return[2]}})})},e.prototype.resetLimboDocuments=function(){var e=this;N(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Ne(be.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return h.__awaiter(this,void 0,void 0,function(){var t,n,r,o,c,l,f,d,m;return h.__generator(this,function(h){switch(h.label){case 0:t=[],n=[],r=0,o=e,h.label=1;case 1:return r<o.length?(c=o[r],l=void 0,(f=this.queryViewsByTarget[c])?[4,this.localStore.releaseQuery(f.query,!0)]:[3,5]):[3,11];case 2:return h.sent(),[4,this.localStore.allocateQuery(f.query)];case 3:return l=h.sent(),[4,this.synchronizeViewAndComputeSnapshot(f)];case 4:return(d=h.sent()).snapshot&&n.push(d.snapshot),[3,9];case 5:return T(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(c)];case 6:return T(!!(m=h.sent()),"Query data for target "+c+" not found"),[4,this.localStore.allocateQuery(m)];case 7:return l=h.sent(),[4,this.initializeViewAndComputeSnapshot(l,!1)];case 8:h.sent(),h.label=9;case 9:t.push(l),h.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,t]}})})},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var code=e.code;return"aborted"===code||"failed-precondition"===code||!jr(code)}return!1},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return h.__awaiter(this,void 0,void 0,function(){var r,o,c,l,f;return h.__generator(this,function(h){switch(h.label){case 0:if(this.isPrimary)return _("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[e])return[3,11];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,8]}return[3,10];case 1:return h.trys.push([1,4,,8]),[4,this.localStore.getNewDocumentChanges()];case 2:return r=h.sent(),o=Qr.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,o)];case 3:return h.sent(),[3,11];case 4:return c=h.sent(),(d=c).code!==D.DATA_LOSS||d.message!==Rt?[3,6]:(l=[],N(this.queryViewsByTarget,function(e){return l.push(e)}),[4,this.synchronizeQueryViewsAndRaiseSnapshots(l)]);case 5:return h.sent(),[3,7];case 6:throw c;case 7:return[3,8];case 8:return f=this.queryViewsByTarget[e],this.removeAndCleanupQuery(f),[4,this.localStore.releaseQuery(f.query,!0)];case 9:return h.sent(),this.syncEngineListener.onWatchError(f.query,n),[3,11];case 10:x("Unexpected target state: "+t),h.label=11;case 11:return[2]}var d})})},e.prototype.applyActiveTargetsChange=function(e,t){return h.__awaiter(this,void 0,void 0,function(){var n,r,o,c,l,f,d,m,v,y=this;return h.__generator(this,function(w){switch(w.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,w.label=1;case 1:return n<r.length?(v=r[n],T(!this.queryViewsByTarget[v],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(v)]):[3,6];case 2:return T(!!(o=w.sent()),"Query data for active target "+v+" not found"),[4,this.localStore.allocateQuery(o)];case 3:return c=w.sent(),[4,this.initializeViewAndComputeSnapshot(c,!1)];case 4:w.sent(),this.remoteStore.listen(c),w.label=5;case 5:return n++,[3,1];case 6:l=function(e){var t;return h.__generator(this,function(n){switch(n.label){case 0:return(t=f.queryViewsByTarget[e])?[4,f.localStore.releaseQuery(t.query,!1).then(function(){y.remoteStore.unlisten(e),y.removeAndCleanupQuery(t)}).catch(Cn)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})},f=this,d=0,m=t,w.label=7;case 7:return d<m.length?(v=m[d],[5,l(v)]):[3,10];case 8:w.sent(),w.label=9;case 9:return d++,[3,7];case 10:return[2]}})})},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];return t&&t.receivedDocument?Ke().add(t.key):this.queryViewsByTarget[e]?this.queryViewsByTarget[e].view.syncedDocuments:Ke()},e}(),zi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}(),Wi="SharedClientState",Gi="firestore_clients",Qi="firestore_mutations",Ki="firestore_targets",Hi="firestore_online_state",$i="firestore_sequence_number",Yi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,T(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var o=JSON.parse(r),c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error),l=void 0;return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(l=new A(o.error.code,o.error.message)),c?new e(t,n,o.state,l):(S(Wi,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Xi=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,T(void 0!==n==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),c=void 0;return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(c=new A(r.error.code,r.error.message)),o?new e(t,r.state,c):(S(Wi,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Ji=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),o="object"==typeof r&&r.activeTargetIds instanceof Array,c=$e(),i=0;o&&i<r.activeTargetIds.length;++i)o=Sr(r.activeTargetIds[i]),c=c.add(r.activeTargetIds[i]);return o?new e(t,c):(S(Wi,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Zi=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"==typeof n&&n.onlineState in Tr&&"string"==typeof n.clientId?new e(n.clientId,Tr[n.onlineState]):(S(Wi,"Failed to parse online state: "+t),null)},e}(),eo=function(){function e(){this.activeTargetIds=$e()}return e.prototype.addQueryTarget=function(e){T(!this.activeTargetIds.has(e),"Target with ID '"+e+"' already active."),this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var data={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(data)},e}(),to=function(){function e(t,n,r,o,c){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new A(D.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=c,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=$i+"_"+r,this.activeClients[this.localClientId]=new eo,this.clientStateKeyRe=new RegExp("^"+Gi+"_"+l+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Qi+"_"+l+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Ki+"_"+l+"_(\\d+)$"),this.onlineStateKey=Hi+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return h.__awaiter(this,void 0,void 0,function(){var e,t,n,r,o,c,l,f,d,m,v,y=this;return h.__generator(this,function(h){switch(h.label){case 0:return T(!this.started,"WebStorageSharedClientState already started"),T(null!==this.syncEngine,"syncEngine property must be set before calling start()"),T(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=h.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(o=this.getItem(this.toWebStorageClientStateKey(r)))&&(c=Ji.fromWebStorageEntry(r,o))&&(this.activeClients[c.clientId]=c);for(this.persistClientState(),(l=this.storage.getItem(this.onlineStateKey))&&(f=this.fromWebStorageOnlineState(l))&&this.handleOnlineStateEvent(f),d=0,m=this.earlyEvents;d<m.length;d++)v=m[d],this.handleWebStorageEvent(v);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return y.shutdown()}),this.started=!0,[2]}})})},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=$e();return P(this.activeClients,function(t,n){e=e.unionWith(n.activeTargetIds)}),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(e));if(n){var r=Xi.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(this.toWebStorageQueryTargetMetadataKey(e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return _(Wi,"READ",e,t),t},e.prototype.setItem=function(e,t){_(Wi,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){_(Wi,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(_(Wi,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void S("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return h.__awaiter(t,void 0,void 0,function(){var t,n,r,o,c,l;return h.__generator(this,function(h){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(o=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(o)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(c=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(c)]}else e.key===this.sequenceNumberKey&&(T(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(l=function(e){var t=pe.INVALID;if(null!=e)try{var n=JSON.parse(e);T("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){S(Wi,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue))!==pe.INVALID&&this.sequenceNumberHandler(l));return[2]})})})}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new Yi(this.currentUser,e,t,n),o=this.toWebStorageMutationBatchKey(e);this.setItem(o,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=this.toWebStorageMutationBatchKey(e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Tr[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=this.toWebStorageQueryTargetMetadataKey(e),o=new Xi(e,t,n);this.setItem(r,o.toWebStorageJSON())},e.prototype.toWebStorageClientStateKey=function(e){return T(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),Gi+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageQueryTargetMetadataKey=function(e){return Ki+"_"+this.persistenceKey+"_"+e},e.prototype.toWebStorageMutationBatchKey=function(e){var t=Qi+"_"+this.persistenceKey+"_"+e;return this.currentUser.isAuthenticated()&&(t+="_"+this.currentUser.uid),t},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return T(null!==n,"Cannot parse client state key '"+e+"'"),Ji.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);T(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),o=void 0!==n[2]?n[2]:null;return Yi.fromWebStorageEntry(new zi(o),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);T(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Xi.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return Zi.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(t){return e.user.uid!==this.currentUser.uid?(_(Wi,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var o=this.getAllActiveQueryTargets(),c=[],l=[];return o.forEach(function(e){return h.__awaiter(n,void 0,void 0,function(){return h.__generator(this,function(t){return r.has(e)||c.push(e),[2]})})}),r.forEach(function(e){return h.__awaiter(n,void 0,void 0,function(){return h.__generator(this,function(t){return o.has(e)||l.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(c,l)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}();var no=function(){function e(){this.localState=new eo,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new eo,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),ro=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return pn.withCacheSize(this.cacheSizeBytes)},e}(),io=function(){},oo=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=ne.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotShutdown();var n=new we,r=new we,o=!1;return this.credentials.setChangeListener(function(c){o?t.asyncQueue.enqueueAndForget(function(){return t.handleCredentialChange(c)}):(o=!0,t.initializePersistence(e,r,c).then(function(e){return t.initializeRest(c,e)}).then(n.resolve,n.reject))}),this.asyncQueue.enqueueAndForget(function(){return n.promise}),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof ro?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof A?e.code===D.FAILED_PRECONDITION||e.code===D.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)},e.prototype.verifyNotShutdown=function(){if(this.asyncQueue.isShuttingDown)throw new A(D.FAILED_PRECONDITION,"The client has already been shutdown.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Sn.buildStoragePrefix(this.databaseInfo),o=new Oi(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return h.__awaiter(n,void 0,void 0,function(){var n,c;return h.__generator(this,function(l){switch(l.label){case 0:if(t.synchronizeTabs&&!to.isAvailable(this.platform))throw new A(D.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return c=t.lruParams(),t.synchronizeTabs?(this.sharedClientState=new to(this.asyncQueue,this.platform,r,this.clientId,e),[4,Sn.createMultiClientIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,o,c,{sequenceNumberSyncer:this.sharedClientState})]):[3,2];case 1:return n=l.sent(),[3,4];case 2:return this.sharedClientState=new no,[4,Sn.createIndexedDbPersistence(r,this.clientId,this.platform,this.asyncQueue,o,c)];case 3:n=l.sent(),l.label=4;case 4:return this.persistence=n,[2,n.referenceDelegate.garbageCollector]}})})})},e.prototype.startMemoryPersistence=function(){return this.persistence=fr.createEagerPersistence(this.clientId),this.sharedClientState=new no,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return _("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then(function(r){return h.__awaiter(n,void 0,void 0,function(){var n,o,c,l,f,d=this;return h.__generator(this,function(m){switch(m.label){case 0:return this.localStore=new ar(this.persistence,e),t&&(this.lruScheduler=new mn(t,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),c=new Nr(this.asyncQueue,r,this.credentials,o),l=function(e){return d.syncEngine.applyOnlineStateChange(e,Er.RemoteStore)},f=function(e){return d.syncEngine.applyOnlineStateChange(e,Er.SharedClientState)},this.remoteStore=new ni(this.localStore,c,this.asyncQueue,l,n),this.syncEngine=new Vi(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=f,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new Pi(this.syncEngine),[4,this.sharedClientState.start()];case 1:return m.sent(),[4,this.remoteStore.start()];case 2:return m.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return h.__awaiter(d,void 0,void 0,function(){return h.__generator(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 3:return m.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return h.__awaiter(d,void 0,void 0,function(){return h.__generator(this,function(e){switch(e.label){case 0:return[4,this.shutdown()];case 1:return e.sent(),[2]}})})})];case 4:return m.sent(),[2]}})})})},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),_("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},e.prototype.shutdown=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return h.__awaiter(e,void 0,void 0,function(){return h.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotShutdown();var o=new Mi(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(o)}),o},e.prototype.unlisten=function(e){var t=this;this.verifyNotShutdown(),this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof Tt)return e;if(e instanceof Et)return null;throw new A(D.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return t.localStore.executeQuery(e)}).then(function(t){var n=Ke(),view=new Bi(e,n),r=view.computeDocChanges(t);return view.applyChanges(r,!1).snapshot})},e.prototype.write=function(e){var t=this;this.verifyNotShutdown();var n=new we;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},Object.defineProperty(e.prototype,"clientShutdown",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;return this.verifyNotShutdown(),this.asyncQueue.enqueue(function(){return h.__awaiter(t,void 0,void 0,function(){return h.__generator(this,function(e){return[2]})})}).then(function(){return t.syncEngine.runTransaction(e)})},e}(),ao=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},e}(),so=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new A(D.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+te(r,"element")+".")}("FieldPath",e,"fieldNames",1);for(var i=0;i<e.length;++i)if(U("FieldPath","string",i,e[i]),0===e[i].length)throw new A(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ye(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Z("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(ye.keyField().canonicalString()),e}(),co=new RegExp("[~\\*/\\[\\]]");var uo=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+e}},lo=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){T(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(zi.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){T(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),ho=function(){function e(e){var t=this;this.app=e,this.tokenListener=null,this.currentUser=zi.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return e.prototype.getToken=function(){var e=this;T(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then(function(n){if(e.tokenCounter!==t)throw new A(D.ABORTED,"getToken aborted due to token change.");return n?(T("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new uo(n.accessToken,e.currentUser)):null})},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){T(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.currentUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){T(null!=this.tokenListener,"removeChangeListener() called twice"),T(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.app.INTERNAL.getUid();return T(null===e||"string"==typeof e,"Received invalid UID: "+e),new zi(e)},e}(),fo=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=zi.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),po=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new fo(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(zi.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function mo(e){if(!e)return new lo;switch(e.type){case"gapi":var t=e.client;return T(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new po(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new A(D.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function vo(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var object=e,n=0,r=t;n<r.length;n++){var o=r[n];if(o in object&&"function"==typeof object[o])return!0}return!1}(e,["next","error","complete"])}var go,yo=function(){function e(e){this._methodName=e}return e.delete=function(){return L("FieldValue.delete",arguments),bo.instance},e.serverTimestamp=function(){return L("FieldValue.serverTimestamp",arguments),wo.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return F("FieldValue.arrayUnion",arguments,1),new _o(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return F("FieldValue.arrayRemove",arguments,1),new So(e)},e.increment=function(e){return U("FieldValue.increment","number",1,e),j("FieldValue.increment",arguments,1),new Co(e)},e.prototype.isEqual=function(e){return this===e},e}(),bo=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return h.__extends(t,e),t.instance=new t,t}(yo),wo=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return h.__extends(t,e),t.instance=new t,t}(yo),_o=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return h.__extends(t,e),t}(yo),So=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return h.__extends(t,e),t}(yo),Co=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return h.__extends(t,e),t}(yo),xo=R(yo,"Use FieldValue.<field>() instead."),To=/^__.*__$/,Eo=function(){function e(data,e,t){this.data=data,this.fieldMask=e,this.fieldTransforms=t}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new Zn(e,this.data,this.fieldMask,t)):n.push(new Jn(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new er(e,this.fieldTransforms)),n},e}(),Io=function(){function e(data,e,t){this.data=data,this.fieldMask=e,this.fieldTransforms=t}return e.prototype.toMutations=function(e,t){var n=[new Zn(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new er(e,this.fieldTransforms)),n},e}();function Do(e){switch(e){case go.Set:case go.MergeSet:case go.Update:return!0;case go.Argument:return!1;default:throw x("Unexpected case for UserDataSource: "+e)}}!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument"}(go||(go={}));var Ao=function(){function e(e,t,path,n,r,o){this.dataSource=e,this.methodName=t,this.path=path,this.arrayElement=n,void 0===r&&this.validatePath(),this.arrayElement=void 0!==n&&n,this.fieldTransforms=r||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new A(D.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},e.prototype.validatePath=function(){if(null!==this.path)for(var i=0;i<this.path.length;i++)this.validatePathSegment(this.path.get(i))},e.prototype.validatePathSegment=function(e){if(Do(this.dataSource)&&To.test(e))throw this.createError("Document fields cannot begin and end with __")},e}(),Ro=function(e,t){this.databaseId=e,this.key=t},ko=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,input){var t=new Ao(go.Set,e,ye.EMPTY_PATH);No("Data must be an object, but it was:",t,input);var n=this.parseData(input,t);return new Eo(n,null,t.fieldTransforms)},e.prototype.parseMergeData=function(e,input,t){var n=new Ao(go.MergeSet,e,ye.EMPTY_PATH);No("Data must be an object, but it was:",n,input);var r,o,c=this.parseData(input,n);if(t){for(var l=new je(ye.comparator),h=0,f=t;h<f.length;h++){var d=f[h],m=void 0;if(d instanceof so)m=d._internalPath;else{if("string"!=typeof d)throw x("Expected stringOrFieldPath to be a string or a FieldPath");m=Mo(e,d)}if(!n.contains(m))throw new A(D.INVALID_ARGUMENT,"Field '"+m+"' is specified in your field mask but missing from your input data.");l=l.add(m)}r=Kn.fromSet(l),o=n.fieldTransforms.filter(function(e){return r.covers(e.field)})}else r=Kn.fromArray(n.fieldMask),o=n.fieldTransforms;return new Eo(c,r,o)},e.prototype.parseUpdateData=function(e,input){var t=this,n=new Ao(go.Update,e,ye.EMPTY_PATH);No("Data must be an object, but it was:",n,input);var r=new je(ye.comparator),o=Gn.EMPTY;P(input,function(c,l){var path=Mo(e,c),h=n.childContextForFieldPath(path);if((l=t.runPreConverter(l,h))instanceof bo)r=r.add(path);else{var f=t.parseData(l,h);null!=f&&(r=r.add(path),o=o.set(path,f))}});var mask=Kn.fromSet(r);return new Io(o,mask,n.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var o=new Ao(go.Update,e,ye.EMPTY_PATH),c=[Po(e,t)],l=[n];if(r.length%2!=0)throw new A(D.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var i=0;i<r.length;i+=2)c.push(Po(e,r[i])),l.push(r[i+1]);var h=new je(ye.comparator),f=Gn.EMPTY;for(i=0;i<c.length;++i){var path=c[i],d=o.childContextForFieldPath(path),m=this.runPreConverter(l[i],d);if(m instanceof bo)h=h.add(path);else{var v=this.parseData(m,d);null!=v&&(h=h.add(path),f=f.set(path,v))}}var mask=Kn.fromSet(h);return new Io(f,mask,o.fieldTransforms)},e.prototype.parseQueryValue=function(e,input){var t=new Ao(go.Argument,e,ye.EMPTY_PATH),n=this.parseData(input,t);return T(null!=n,"Parsed data should not be null."),T(0===t.fieldTransforms.length,"Field transforms should have been disallowed."),n},e.prototype.runPreConverter=function(input,e){try{return this.preConverter(input)}catch(n){var t=Lo(n);throw e.createError(t)}},e.prototype.parseData=function(input,e){if(Oo(input=this.runPreConverter(input,e)))return No("Unsupported field value:",e,input),this.parseObject(input,e);if(input instanceof yo)return this.parseSentinelFieldValue(input,e),null;if(e.path&&e.fieldMask.push(e.path),input instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(input,e)}return this.parseScalarValue(input,e)},e.prototype.parseObject=function(e,t){var n=this,r=new Ne(re);return M(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):P(e,function(e,o){var c=n.parseData(o,t.childContextForField(e));null!=c&&(r=r.insert(e,c))}),new Gn(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,o=0,c=e;o<c.length;o++){var l=c[o],h=this.parseData(l,t.childContextForArray(r));null==h&&(h=On.INSTANCE),n.push(h),r++}return new Qn(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!Do(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof bo){if(t.dataSource!==go.MergeSet)throw t.dataSource===go.Update?(T(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof wo)t.fieldTransforms.push(new Hn(t.path,bi.instance));else if(e instanceof _o){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new wi(n);t.fieldTransforms.push(new Hn(t.path,r))}else if(e instanceof So){n=this.parseArrayTransformElements(e._methodName,e._elements);var o=new _i(n);t.fieldTransforms.push(new Hn(t.path,o))}else if(e instanceof Co){var c=this.parseQueryValue("FieldValue.increment",e._operand),l=new Si(c);t.fieldTransforms.push(new Hn(t.path,l))}else x("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return On.INSTANCE;if("number"==typeof e)return Sr(e)?new jn(e):new Fn(e);if("boolean"==typeof e)return Nn.of(e);if("string"==typeof e)return new Bn(e);if(e instanceof Date)return new Un(ke.fromDate(e));if(e instanceof ke)return new Un(new ke(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof ri)return new Wn(e);if(e instanceof ue)return new Vn(e);if(e instanceof Ro)return new zn(e.databaseId,e.key);throw t.createError("Unsupported field value: "+Y(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map(function(element,i){var t=new Ao(go.Argument,e,ye.EMPTY_PATH);return n.parseData(element,t.childContextForArray(i))})},e}();function Oo(input){return!("object"!=typeof input||null===input||input instanceof Array||input instanceof Date||input instanceof ke||input instanceof ri||input instanceof ue||input instanceof Ro||input instanceof yo)}function No(e,t,input){if(!Oo(input)||!$(input)){var n=Y(input);throw"an object"===n?t.createError(e+" a custom object"):t.createError(e+" "+n)}}function Po(e,path){if(path instanceof so)return path._internalPath;if("string"==typeof path)return Mo(e,path);throw new A(D.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Mo(e,path){try{return function(path){if(path.search(co)>=0)throw new A(D.INVALID_ARGUMENT,"Invalid field path ("+path+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(so.bind.apply(so,[void 0].concat(path.split("."))))}catch(e){throw new A(D.INVALID_ARGUMENT,"Invalid field path ("+path+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(path)._internalPath}catch(n){var t=Lo(n);throw new A(D.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+t)}}function Lo(e){return e instanceof Error?e.message:e.toString()}var jo="firestore.googleapis.com",Fo=!0,Bo=!0,Uo=!1,qo=pn.COLLECTION_DISABLED,Vo=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new A(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jo,this.ssl=Fo}else z("settings","non-empty string","host",e.host),this.host=e.host,W("settings","boolean","ssl",e.ssl),this.ssl=O(e.ssl,Fo);if(J("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),W("settings","object","credentials",e.credentials),this.credentials=e.credentials,W("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?S("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&S("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=O(e.timestampsInSnapshots,Bo),W("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=pn.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==qo&&e.cacheSizeBytes<pn.MINIMUM_CACHE_SIZE_BYTES)throw new A(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+pn.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}W("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0===e.experimentalForceLongPolling?Uo:e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),zo=function(){function e(t){var n=this;if(this._firebaseApp=null,this._queue=new Se,this.INTERNAL={delete:function(){return h.__awaiter(n,void 0,void 0,function(){return h.__generator(this,function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.shutdown()];case 1:return e.sent(),[2]}})})}},"object"==typeof t.options){var r=t;this._firebaseApp=r,this._databaseId=e.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new ho(r)}else{var o=t;if(!o.projectId)throw new A(D.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new de(o.projectId,o.database),this._persistenceKey="[DEFAULT]",this._credentials=new lo}this._settings=new Vo({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(j("Firestore.settings",arguments,1),U("Firestore.settings","object",1,e),k(e,"persistence"))throw new A(D.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new Vo(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new A(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=mo(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new A(D.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&S("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=O(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new ro(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=Sn.buildStoragePrefix(this.makeDatabaseInfo()),n=new we;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return h.__awaiter(e,void 0,void 0,function(){var e;return h.__generator(this,function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientShutdown)throw new A(D.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Sn.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise},e.prototype._shutdown=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isShutdown",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientShutdown},enumerable:!0,configurable:!0}),e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new io),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new he(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){T(!!this._settings.host,"FirestoreSettings.host is not set"),T(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new oo(E.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){return new ko(function(t){if(t instanceof Qo){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new A(D.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new Ro(e,t._key)}return t})},e.databaseIdFromApp=function(e){var t=e.options;if(!k(t,"projectId"))throw new A(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new A(D.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new de(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new A(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return j("Firestore.collection",arguments,1),U("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Jo(ve.fromString(e),this)},e.prototype.doc=function(e){return j("Firestore.doc",arguments,1),U("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),Qo.forPath(ve.fromString(e),this)},e.prototype.collectionGroup=function(e){if(j("Firestore.collectionGroup",arguments,1),U("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new A(D.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Yo(new ii(ve.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return j("Firestore.runTransaction",arguments,1),U("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(n){return e(new Wo(t,n))})},e.prototype.batch=function(){return this.ensureClientConfigured(),new Go(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(y()){case o.DEBUG:return"debug";case o.ERROR:return"error";case o.SILENT:return"silent";default:return x("Unknown log level: "+y())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(j("Firestore.setLogLevel",arguments,1),U("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":w(o.DEBUG);break;case"error":w(o.ERROR);break;case"silent":w(o.SILENT);break;default:throw new A(D.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),Wo=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;j("Transaction.get",arguments,1);var n=na("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return x("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof Et)return new Ho(t._firestore,n._key,null,!1,!1);if(r instanceof Tt)return new Ho(t._firestore,n._key,r,!1,!1);throw x("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)})},e.prototype.set=function(e,t,n){B("Transaction.set",arguments,2,3);var r=na("Transaction.set",e,this._firestore),o=(n=Zo("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",t);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r,o,c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return"string"==typeof t||t instanceof so?(F("Transaction.update",arguments,3),r=na("Transaction.update",e,this._firestore),o=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,c)):(j("Transaction.update",arguments,2),r=na("Transaction.update",e,this._firestore),o=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,o),this},e.prototype.delete=function(e){j("Transaction.delete",arguments,1);var t=na("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),Go=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){B("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=na("WriteBatch.set",e,this._firestore),o=(n=Zo("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",t,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",t);return this._mutations=this._mutations.concat(o.toMutations(r._key,Yn.NONE)),this},e.prototype.update=function(e,t,n){for(var r,o,c=[],l=3;l<arguments.length;l++)c[l-3]=arguments[l];return this.verifyNotCommitted(),"string"==typeof t||t instanceof so?(F("WriteBatch.update",arguments,3),r=na("WriteBatch.update",e,this._firestore),o=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,c)):(j("WriteBatch.update",arguments,2),r=na("WriteBatch.update",e,this._firestore),o=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(o.toMutations(r._key,Yn.exists(!0))),this},e.prototype.delete=function(e){j("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=na("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new nr(t._key,Yn.NONE)),this},e.prototype.commit=function(){return h.__awaiter(this,void 0,void 0,function(){return h.__generator(this,function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new A(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Qo=function(){function e(e,t){this._key=e,this.firestore=t,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(path,t){if(path.length%2!=0)throw new A(D.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+path.canonicalString()+" has "+path.length);return new e(new be(path),t)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Jo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(j("DocumentReference.collection",arguments,1),U("DocumentReference.collection","non-empty string",1,e),!e)throw new A(D.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var path=ve.fromString(e);return new Jo(this._key.path.child(path),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Z("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)},e.prototype.set=function(e,t){B("DocumentReference.set",arguments,1,2);var n=(t=Zo("DocumentReference.set",t)).merge||t.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",e,t.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",e);return this._firestoreClient.write(n.toMutations(this._key,Yn.NONE))},e.prototype.update=function(e,t){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return"string"==typeof e||e instanceof so?(F("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(j("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,Yn.exists(!0)))},e.prototype.delete=function(){return j("DocumentReference.delete",arguments,0),this._firestoreClient.write([new nr(this._key,Yn.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];B("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||vo(e[o])||(J("DocumentReference.onSnapshot",r=e[o],["includeMetadataChanges"]),W("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),o++);var c={includeMetadataChanges:r.includeMetadataChanges};return vo(e[o])?n=e[o]:(U("DocumentReference.onSnapshot","function",o,e[o]),V("DocumentReference.onSnapshot","function",o+1,e[o+1]),V("DocumentReference.onSnapshot","function",o+2,e[o+2]),n={next:e[o],error:e[o+1],complete:e[o+2]}),this.onSnapshotInternal(c,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var o=new ao({next:function(e){if(t.next){T(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new Ho(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites))}},error:r}),c=this._firestoreClient.listen(ii.atPath(this._key.path),o,e);return function(){o.mute(),n._firestoreClient.unlisten(c)}},e.prototype.get=function(e){var t=this;return B("DocumentReference.get",arguments,0,1),ta("DocumentReference.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then(function(e){n(new Ho(t.firestore,t._key,e,!0,e instanceof Tt&&e.hasLocalMutations))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(o){r(),!o.exists&&o.metadata.fromCache?t(new A(D.UNAVAILABLE,"Failed to get document because the client is offline.")):o.exists&&o.metadata.fromCache&&n&&"server"===n.source?t(new A(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(o)},error:t})},e}(),Ko=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Ho=function(){function e(e,t,n,r,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=o}return e.prototype.data=function(e){return B("DocumentSnapshot.data",arguments,0,1),e=ea("DocumentSnapshot.data",e),this._document?this.convertObject(this._document.data,Rn.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},e.prototype.get=function(e,t){if(B("DocumentSnapshot.get",arguments,1,2),t=ea("DocumentSnapshot.get",t),this._document){var n=this._document.data.field(Po("DocumentSnapshot.get",e));if(null!==n)return this.convertValue(n,Rn.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Qo(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new Ko(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw Z("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))},e.prototype.convertObject=function(data,e){var t=this,n={};return data.forEach(function(r,o){n[r]=t.convertValue(o,e)}),n},e.prototype.convertValue=function(e,t){if(e instanceof Gn)return this.convertObject(e,t);if(e instanceof Qn)return this.convertArray(e,t);if(e instanceof zn){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||S("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Qo(n,this._firestore)}return e.value(t)},e.prototype.convertArray=function(data,e){var t=this;return data.internalValue.map(function(n){return t.convertValue(n,e)})},e}(),$o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h.__extends(t,e),t.prototype.data=function(t){var data=e.prototype.data.call(this,t);return T("object"==typeof data,"Document in a QueryDocumentSnapshot should exist"),data},t}(Ho),Yo=function(){function e(e,t){this._query=e,this.firestore=t}return e.prototype.where=function(t,n,r){if(j("Query.where",arguments,3),X("Query.where",3,r),"in"!==n&&"array-contains-any"!==n){var o=["<","<=","==",">=",">","array-contains"];K("Query.where",o,2,n)}var c,l=Po("Query.where",t),h=ai.fromString(n);if(l.isKeyField()){if(h===ai.ARRAY_CONTAINS||h===ai.ARRAY_CONTAINS_ANY)throw new A(D.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+h.toString()+"' queries on FieldPath.documentId().");if(h===ai.IN){this.validateDisjunctiveFilterElements(r,h);for(var f=[],d=0,m=r;d<m.length;d++){var v=m[d];f.push(this.parseDocumentIdValue(v))}c=new Qn(f)}else c=this.parseDocumentIdValue(r)}else h!==ai.IN&&h!==ai.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,h),c=this.firestore._dataConverter.parseQueryValue("Query.where",r);var filter=si.create(l,h,c);return this.validateNewFilter(filter),new e(this._query.addFilter(filter),this.firestore)},e.prototype.orderBy=function(t,n){var r;if(B("Query.orderBy",arguments,1,2),V("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=pi.ASCENDING;else{if("desc"!==n)throw new A(D.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=pi.DESCENDING}if(null!==this._query.startAt)throw new A(D.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new A(D.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var o=Po("Query.orderBy",t),c=new vi(o,r);return this.validateNewOrderBy(c),new e(this._query.addOrderBy(c),this.firestore)},e.prototype.limit=function(t){if(j("Query.limit",arguments,1),U("Query.limit","number",1,t),t<=0)throw new A(D.INVALID_ARGUMENT,"Invalid Query. Query limit ("+t+") is invalid. Limit must be positive.");return new e(this._query.withLimit(t),this.firestore)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];F("Query.startAt",arguments,1);var o=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(o),this.firestore)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];F("Query.startAfter",arguments,1);var o=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(o),this.firestore)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];F("Query.endBefore",arguments,1);var o=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(o),this.firestore)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];F("Query.endAt",arguments,1);var o=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(o),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Z("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(X(e,1,t),t instanceof Ho){if(n.length>0)throw new A(D.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var o=t;if(!o.exists)throw new A(D.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,o._document,r)}var c=[t].concat(n);return this.boundFromFields(e,c,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],o=0,c=this._query.orderBy;o<c.length;o++){var l=c[o];if(l.field.isKeyField())r.push(new zn(this.firestore._databaseId,t.key));else{var h=t.field(l.field);if(h instanceof qn)throw new A(D.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var f=l.field.canonicalString();throw new A(D.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}r.push(h)}}return new mi(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new A(D.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var o=[],i=0;i<t.length;i++){var c=t[i];if(r[i].field.isKeyField()){if("string"!=typeof c)throw new A(D.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof c);if(!this._query.isCollectionGroupQuery()&&-1!==c.indexOf("/"))throw new A(D.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+c+"' contains a slash.");var path=this._query.path.child(ve.fromString(c));if(!be.isDocumentKey(path))throw new A(D.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+path+"' is not because it contains an odd number of segments.");var l=new be(path);o.push(new zn(this.firestore._databaseId,l))}else{var h=this.firestore._dataConverter.parseQueryValue(e,c);o.push(h)}}return new mi(o,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];B("Query.onSnapshot",arguments,1,4);var n,r={},o=0;return"object"!=typeof e[o]||vo(e[o])||(J("Query.onSnapshot",r=e[o],["includeMetadataChanges"]),W("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),o++),vo(e[o])?n=e[o]:(U("Query.onSnapshot","function",o,e[o]),V("Query.onSnapshot","function",o+1,e[o+1]),V("Query.onSnapshot","function",o+2,e[o+2]),n={next:e[o],error:e[o+1],complete:e[o+2]}),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var o=new ao({next:function(e){t.next&&t.next(new Xo(n.firestore,n._query,e))},error:r}),c=this.firestore.ensureClientConfigured(),l=c.listen(this._query,o,e);return function(){o.mute(),c.unlisten(l)}},e.prototype.get=function(e){var t=this;return B("Query.get",arguments,0,1),ta("Query.get",e),new Promise(function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then(function(e){n(new Xo(t.firestore,t._query,e))},r):t.getViaSnapshotListener(n,r,e)})},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(o){r(),o.metadata.fromCache&&n&&"server"===n.source?t(new A(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(o)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new A(D.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new A(D.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var path=this._query.path.child(ve.fromString(e));if(!be.isDocumentKey(path))throw new A(D.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+path+"' is not because it has an odd number of segments ("+path.length+").");return new zn(this.firestore._databaseId,new be(path))}if(e instanceof Qo){var t=e;return new zn(this.firestore._databaseId,t._key)}throw new A(D.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Y(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new A(D.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new A(D.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new A(D.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter(function(element){return Number.isNaN(element)}).length>0)throw new A(D.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(filter){if(filter instanceof si){var e=[ai.ARRAY_CONTAINS,ai.ARRAY_CONTAINS_ANY],t=[ai.IN,ai.ARRAY_CONTAINS_ANY],n=e.indexOf(filter.op)>=0,r=t.indexOf(filter.op)>=0;if(filter.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(filter.field))throw new A(D.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+filter.field.toString()+"'");var c=this._query.getFirstOrderByField();null!==c&&this.validateOrderByAndInequalityMatch(filter.field,c)}else if(r||n){var l=null;if(r&&(l=this._query.findFilterOperator(t)),null===l&&n&&(l=this._query.findFilterOperator(e)),null!=l)throw l===filter.op?new A(D.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+filter.op.toString()+"' filter."):new A(D.INVALID_ARGUMENT,"Invalid query. You cannot use '"+filter.op.toString()+"' filters with '"+l.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new A(D.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),Xo=function(){function e(e,t,n){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Ko(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;B("QuerySnapshot.forEach",arguments,1,2),U("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(r){e.call(t,n.convertToDocumentImpl(r))})},Object.defineProperty(e.prototype,"query",{get:function(){return new Yo(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(J("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),W("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new A(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n){if(n.oldDocs.isEmpty()){var r,o=0;return n.docChanges.map(function(t){var c=new $o(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key));return T(t.type===Ur.Added,"Invalid event type for first snapshot"),T(!r||n.query.docComparator(r,t.doc)<0,"Got added events in wrong order"),r=t.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}var c=n.oldDocs;return n.docChanges.filter(function(e){return t||e.type!==Ur.Metadata}).map(function(t){var r=new $o(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key)),o=-1,l=-1;return t.type!==Ur.Added&&(T((o=c.indexOf(t.doc.key))>=0,"Index for document not found"),c=c.delete(t.doc.key)),t.type!==Ur.Removed&&(l=(c=c.add(t.doc)).indexOf(t.doc.key)),{type:ra(t.type),doc:r,oldIndex:o,newIndex:l}})}(this._firestore,t,this._snapshot),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Z("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)},e.prototype.convertToDocumentImpl=function(e){return new $o(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key))},e}();["length","forEach","map"].concat("undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(e){try{Object.defineProperty(Xo.prototype.docChanges,e,{get:function(){return function(){throw new A(D.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var Jo=function(e){function t(path,t){var n=e.call(this,ii.atPath(path),t)||this;if(path.length%2!=1)throw new A(D.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+path.canonicalString()+" has "+path.length);return n}return h.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new Qo(new be(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(B("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=ne.newId()),U("CollectionReference.doc","non-empty string",1,e),""===e)throw new A(D.INVALID_ARGUMENT,"Document path must be a non-empty string");var path=ve.fromString(e);return Qo.forPath(this._query.path.child(path),this.firestore)},t.prototype.add=function(e){j("CollectionReference.add",arguments,1),U("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},t}(Yo);function Zo(e,t){if(void 0===t)return{merge:!1};if(J(e,t,["merge","mergeFields"]),W(e,"boolean","merge",t.merge),G(e,"mergeFields","a string or a FieldPath",t.mergeFields,function(element){return"string"==typeof element||element instanceof so}),void 0!==t.mergeFields&&void 0!==t.merge)throw new A(D.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function ea(e,t){return void 0===t?{}:(J(e,t,["serverTimestamps"]),Q(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function ta(e,t){V(e,"object",1,t),t&&(J(e,t,["source"]),Q(e,0,"source",t.source,["default","server","cache"]))}function na(e,t,n){if(t instanceof Qo){if(t.firestore!==n)throw new A(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw Z(e,"DocumentReference",1,t)}function ra(e){switch(e){case Ur.Added:return"added";case Ur.Modified:case Ur.Metadata:return"modified";case Ur.Removed:return"removed";default:return x("Unknown change type: "+e)}}var ia=R(zo,"Use firebase.firestore() instead."),oa=R(Wo,"Use firebase.firestore().runTransaction() instead."),aa=R(Go,"Use firebase.firestore().batch() instead."),sa=R(Qo,"Use firebase.firestore().doc() instead."),ca=R(Ho),ua=R($o),la=R(Yo),ha=R(Xo),fa=R(Jo,"Use firebase.firestore().collection() instead."),da={Firestore:ia,GeoPoint:ri,Timestamp:ke,Blob:le,Transaction:oa,WriteBatch:aa,DocumentReference:sa,DocumentSnapshot:ca,Query:la,QueryDocumentSnapshot:ua,QuerySnapshot:ha,CollectionReference:fa,FieldPath:so,FieldValue:xo,setLogLevel:zo.setLogLevel,CACHE_SIZE_UNLIMITED:qo};function pa(e){e.INTERNAL.registerService("firestore",function(e){return new zo(e)},function(e){T(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(da))}var ma=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),va=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){_("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(0)}},e.prototype.onNetworkUnavailable=function(){_("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(1)}},e.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),ga=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){T(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){T(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){T(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){T(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){T(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){T(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),ya="Connection",ba={BatchGetDocuments:"batchGet",Commit:"commit"},wa="gl-js/ fire/"+m,_a=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var header in t.authHeaders)t.authHeaders.hasOwnProperty(header)&&(e[header]=t.authHeaders[header]);e["X-Goog-Api-Client"]=wa},e.prototype.invokeRPC=function(e,t,n){var r=this,o=this.makeUrl(e);return new Promise(function(c,l){var h=new d.XhrIo;h.listenOnce(d.EventType.COMPLETE,function(){try{switch(h.getLastErrorCode()){case d.ErrorCode.NO_ERROR:var t=h.getResponseJson();_(ya,"XHR received:",JSON.stringify(t)),c(t);break;case d.ErrorCode.TIMEOUT:_(ya,'RPC "'+e+'" timed out'),l(new A(D.DEADLINE_EXCEEDED,"Request time out"));break;case d.ErrorCode.HTTP_ERROR:var n=h.getStatus();if(_(ya,'RPC "'+e+'" failed with status:',n,"response text:",h.getResponseText()),n>0){var r=h.getResponseJson().error;if(r&&r.status&&r.message){var o=(f=r.status,m=f.toLowerCase().replace("_","-"),Object.values(D).indexOf(m)>=0?m:D.UNKNOWN);l(new A(o,r.message))}else l(new A(D.UNKNOWN,"Server responded with status "+h.getStatus()))}else _(ya,'RPC "'+e+'" failed'),l(new A(D.UNAVAILABLE,"Connection failed."));break;default:x('RPC "'+e+'" failed with unanticipated webchannel error '+h.getLastErrorCode()+": "+h.getLastError()+", giving up.")}}finally{_(ya,'RPC "'+e+'" completed.')}var f,m});var f=JSON.stringify(t);_(ya,"XHR sending: ",o+" "+f);var m={"Content-Type":"text/plain"};r.modifyHeadersForRequest(m,n),h.send(o,"POST",f,m,15)})},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=d.createWebChannelTransport(),o={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(o.initMessageHeaders,t),f.isReactNative()||(o.httpHeadersOverwriteParam="$httpHeaders");var c=n.join("");_(ya,"Creating WebChannel: "+c+" "+o);var l=r.createWebChannel(c,o),h=!1,m=!1,v=new ga({sendFn:function(e){m?_(ya,"Not sending because WebChannel is closed:",e):(h||(_(ya,"Opening WebChannel transport."),l.open(),h=!0),_(ya,"WebChannel sending:",e),l.send(e))},closeFn:function(){return l.close()}}),y=function(e,t){l.listen(e,function(param){try{t(param)}catch(e){setTimeout(function(){throw e},0)}})};return y(d.WebChannel.EventType.OPEN,function(){m||_(ya,"WebChannel transport opened.")}),y(d.WebChannel.EventType.CLOSE,function(){m||(m=!0,_(ya,"WebChannel transport closed"),v.callOnClose())}),y(d.WebChannel.EventType.ERROR,function(e){m||(m=!0,_(ya,"WebChannel transport errored:",e),v.callOnClose(new A(D.UNAVAILABLE,"The operation could not be completed")))}),y(d.WebChannel.EventType.MESSAGE,function(e){if(!m){var t=e.data[0];T(!!t,"Got a webchannel message without data.");var n=t,r=n.error||n[0]&&n[0].error;if(r){_(ya,"WebChannel received error:",r);var o=r.status,code=function(e){var code=Mr[e];if(void 0!==code)return Fr(code)}(o),c=r.message;void 0===code&&(code=D.INTERNAL,c="Unknown error status: "+o+" with message "+r.message),m=!0,v.callOnClose(new A(code,c)),l.close()}else _(ya,"WebChannel received:",t),v.callOnMessage(t)}}),setTimeout(function(){v.callOnOpen()},0),v},e.prototype.makeUrl=function(e){var t=ba[e];T(void 0!==t,"Unknown REST mapping for: "+e);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(t),n.join("")},e}(),Sa=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new _a(e))},e.prototype.newConnectivityMonitor=function(){return va.isAvailable()?new va:new ma},e.prototype.newSerializer=function(e){return new Oi(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();function Ca(e){pa(e)}E.setPlatform(new Sa),Ca(c),t.registerFirestore=Ca}).call(this,n(103))},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ErrorCode",function(){return pr}),n.d(t,"EventType",function(){return mr}),n.d(t,"WebChannel",function(){return vr}),n.d(t,"XhrIo",function(){return gr}),n.d(t,"createWebChannelTransport",function(){return dr});var g,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},o=o||{},c=r;function l(a){return"string"==typeof a}function h(a){return"number"==typeof a}function f(a,b){a=a.split("."),b=b||c;for(var e=0;e<a.length;e++)if(null==(b=b[a[e]]))return null;return b}function d(){}function p(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var e=Object.prototype.toString.call(a);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&void 0===a.call)return"object";return b}function q(a){return"array"==p(a)}function m(a){var b=p(a);return"array"==b||"object"==b&&"number"==typeof a.length}function v(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var y="closure_uid_"+(1e9*Math.random()>>>0),w=0;function _(a,b,e){return a.call.apply(a.bind,arguments)}function S(a,b,e){if(!a)throw Error();if(2<arguments.length){var t=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,t),a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function u(a,b,e){return(u=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:S).apply(null,arguments)}function C(a,b){var e=Array.prototype.slice.call(arguments,1);return function(){var t=e.slice();return t.push.apply(t,arguments),a.apply(this,t)}}var x=Date.now||function(){return+new Date};function T(a,b){function e(){}e.prototype=b.prototype,a.N=b.prototype,a.prototype=new e,a.prototype.constructor=a,a.yb=function(e,t,n){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return b.prototype[t].apply(e,r)}}function E(){this.j=this.j,this.i=this.i}E.prototype.j=!1,E.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[y]||(this[y]=++w)},E.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var I=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(l(a))return l(b)&&1==b.length?a.indexOf(b,0):-1;for(var e=0;e<a.length;e++)if(e in a&&a[e]===b)return e;return-1},D=Array.prototype.forEach?function(a,b,e){Array.prototype.forEach.call(a,b,e)}:function(a,b,e){for(var t=a.length,n=l(a)?a.split(""):a,r=0;r<t;r++)r in n&&b.call(e,n[r],r,a)};function A(a){return Array.prototype.concat.apply([],arguments)}function R(a){var b=a.length;if(0<b){for(var e=Array(b),t=0;t<b;t++)e[t]=a[t];return e}return[]}function k(a){return/^[\s\xa0]*$/.test(a)}var O,N=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function P(a,b){return-1!=a.indexOf(b)}function M(a,b){return a<b?-1:a>b?1:0}e:{var L=c.navigator;if(L){var j=L.userAgent;if(j){O=j;break e}}O=""}function F(a,b,e){for(var t in a)b.call(e,a[t],t,a)}function B(a){var e,b={};for(e in a)b[e]=a[e];return b}var U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(a,b){for(var e,t,n=1;n<arguments.length;n++){for(e in t=arguments[n])a[e]=t[e];for(var r=0;r<U.length;r++)e=U[r],Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])}}function z(a){return z[" "](a),a}z[" "]=d;var W,a,G=P(O,"Opera"),Q=P(O,"Trident")||P(O,"MSIE"),K=P(O,"Edge"),H=K||Q,$=P(O,"Gecko")&&!(P(O.toLowerCase(),"webkit")&&!P(O,"Edge"))&&!(P(O,"Trident")||P(O,"MSIE"))&&!P(O,"Edge"),Y=P(O.toLowerCase(),"webkit")&&!P(O,"Edge");function X(){var a=c.document;return a?a.documentMode:void 0}e:{var J="",Z=(a=O,$?/rv:([^\);]+)(\)|;)/.exec(a):K?/Edge\/([\d\.]+)/.exec(a):Q?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):Y?/WebKit\/(\S+)/.exec(a):G?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Z&&(J=Z?Z[1]:""),Q){var ee=X();if(null!=ee&&ee>parseFloat(J)){W=String(ee);break e}}W=J}var te,ne={};function re(a){return function(a,b){var e=ne;return Object.prototype.hasOwnProperty.call(e,a)?e[a]:e[a]=b(a)}(a,function(){for(var b=0,e=N(String(W)).split("."),t=N(String(a)).split("."),n=Math.max(e.length,t.length),r=0;0==b&&r<n;r++){var o=e[r]||"",c=t[r]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==o[0].length&&0==c[0].length)break;b=M(0==o[1].length?0:parseInt(o[1],10),0==c[1].length?0:parseInt(c[1],10))||M(0==o[2].length,0==c[2].length)||M(o[2],c[2]),o=o[3],c=c[3]}while(0==b)}return 0<=b})}var ie=c.document;te=ie&&Q?X()||("CSS1Compat"==ie.compatMode?parseInt(W,10):5):void 0;var oe=!Q||9<=Number(te),ae=Q&&!re("9"),se=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{c.addEventListener("test",d,b),c.removeEventListener("test",d,b)}catch(e){}return a}();function ce(a,b){this.type=a,this.a=this.target=b,this.Ja=!0}function ue(a,b){if(ce.call(this,a?a.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,a){var e=this.type=a.type,t=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.a=b,b=a.relatedTarget){if($){e:{try{z(b.nodeName);var n=!0;break e}catch(e){}n=!1}n||(b=null)}}else"mouseover"==e?b=a.fromElement:"mouseout"==e&&(b=a.toElement);this.relatedTarget=b,t?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=l(a.pointerType)?a.pointerType:le[a.pointerType]||"",this.c=a,a.defaultPrevented&&this.b()}}ce.prototype.b=function(){this.Ja=!1},T(ue,ce);var le={2:"touch",3:"pen",4:"mouse"};ue.prototype.b=function(){ue.N.b.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,ae)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(e){}};var he="closure_listenable_"+(1e6*Math.random()|0),fe=0;function de(a,b,e,t,n){this.listener=a,this.proxy=null,this.src=b,this.type=e,this.capture=!!t,this.da=n,this.key=++fe,this.X=this.Z=!1}function pe(a){a.X=!0,a.listener=null,a.proxy=null,a.src=null,a.da=null}function me(a){this.src=a,this.a={},this.b=0}function ve(a,b){var e=b.type;if(e in a.a){var t,n=a.a[e],r=I(n,b);(t=0<=r)&&Array.prototype.splice.call(n,r,1),t&&(pe(b),0==a.a[e].length&&(delete a.a[e],a.b--))}}function ge(a,b,e,t){for(var n=0;n<a.length;++n){var r=a[n];if(!r.X&&r.listener==b&&r.capture==!!e&&r.da==t)return n}return-1}me.prototype.add=function(a,b,e,t,n){var r=a.toString();(a=this.a[r])||(a=this.a[r]=[],this.b++);var o=ge(a,b,t,n);return-1<o?(b=a[o],e||(b.Z=!1)):((b=new de(b,this.src,r,!!t,n)).Z=e,a.push(b)),b};var ye="closure_lm_"+(1e6*Math.random()|0),be={};function we(a,b,e,t,n){if(t&&t.once)return function e(a,b,t,n,r){if(q(b)){for(var o=0;o<b.length;o++)e(a,b[o],t,n,r);return null}t=De(t);return a&&a[he]?a.Ba(b,t,v(n)?!!n.capture:!!n,r):_e(a,b,t,!0,n,r)}(a,b,e,t,n);if(q(b)){for(var r=0;r<b.length;r++)we(a,b[r],e,t,n);return null}return e=De(e),a&&a[he]?a.Aa(b,e,v(t)?!!t.capture:!!t,n):_e(a,b,e,!1,t,n)}function _e(a,b,e,t,n,r){if(!b)throw Error("Invalid event type");var o=v(n)?!!n.capture:!!n;if(o&&!oe)return null;var c=Ee(a);if(c||(a[ye]=c=new me(a)),(e=c.add(b,e,t,o,r)).proxy)return e;if(t=function(){var a=Te,b=oe?function(e){return a.call(b.src,b.listener,e)}:function(e){if(!(e=a.call(b.src,b.listener,e)))return e};return b}(),e.proxy=t,t.src=a,t.listener=e,a.addEventListener)se||(n=o),void 0===n&&(n=!1),a.addEventListener(b.toString(),t,n);else if(a.attachEvent)a.attachEvent(Ce(b.toString()),t);else{if(!a.addListener||!a.removeListener)throw Error("addEventListener and attachEvent are unavailable.");a.addListener(t)}return e}function Se(a){if(!h(a)&&a&&!a.X){var b=a.src;if(b&&b[he])ve(b.c,a);else{var e=a.type,t=a.proxy;b.removeEventListener?b.removeEventListener(e,t,a.capture):b.detachEvent?b.detachEvent(Ce(e),t):b.addListener&&b.removeListener&&b.removeListener(t),(e=Ee(b))?(ve(e,a),0==e.b&&(e.src=null,b[ye]=null)):pe(a)}}}function Ce(a){return a in be?be[a]:be[a]="on"+a}function xe(a,b){var e=a.listener,t=a.da||a.src;return a.Z&&Se(a),e.call(t,b)}function Te(a,b){return!!a.X||(oe?xe(a,new ue(b,this)):xe(a,b=new ue(b||f("window.event"),this)))}function Ee(a){return(a=a[ye])instanceof me?a:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function De(a){return"function"==p(a)?a:(a[Ie]||(a[Ie]=function(b){return a.handleEvent(b)}),a[Ie])}function Ae(){E.call(this),this.c=new me(this),this.J=this,this.B=null}function Re(a,b,e,t){if(!(b=a.c.a[String(b)]))return!0;b=b.concat();for(var n=!0,r=0;r<b.length;++r){var o=b[r];if(o&&!o.X&&o.capture==e){var c=o.listener,l=o.da||o.src;o.Z&&ve(a.c,o),n=!1!==c.call(l,t)&&n}}return n&&0!=t.Ja}T(Ae,E),Ae.prototype[he]=!0,(g=Ae.prototype).addEventListener=function(a,b,e,t){we(this,a,b,e,t)},g.removeEventListener=function(a,b,e,t){!function e(a,b,t,n,r){if(q(b))for(var o=0;o<b.length;o++)e(a,b[o],t,n,r);else n=v(n)?!!n.capture:!!n,t=De(t),a&&a[he]?(a=a.c,(b=String(b).toString())in a.a&&-1<(t=ge(o=a.a[b],t,n,r))&&(pe(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete a.a[b],a.b--))):a&&(a=Ee(a))&&(b=a.a[b.toString()],a=-1,b&&(a=ge(b,t,n,r)),(t=-1<a?b[a]:null)&&Se(t))}(this,a,b,e,t)},g.dispatchEvent=function(a){var b,e=this.B;if(e)for(b=[];e;e=e.B)b.push(e);e=this.J;var t=a.type||a;if(l(a))a=new ce(a,e);else if(a instanceof ce)a.target=a.target||e;else{var n=a;V(a=new ce(t,e),n)}if(n=!0,b)for(var r=b.length-1;0<=r;r--){var o=a.a=b[r];n=Re(o,t,!0,a)&&n}if(n=Re(o=a.a=e,t,!0,a)&&n,n=Re(o,t,!1,a)&&n,b)for(r=0;r<b.length;r++)n=Re(o=a.a=b[r],t,!1,a)&&n;return n},g.G=function(){if(Ae.N.G.call(this),this.c){var e,a=this.c;for(e in a.a){for(var t=a.a[e],n=0;n<t.length;n++)pe(t[n]);delete a.a[e],a.b--}}this.B=null},g.Aa=function(a,b,e,t){return this.c.add(String(a),b,!1,e,t)},g.Ba=function(a,b,e,t){return this.c.add(String(a),b,!0,e,t)};var ke=c.JSON.stringify;function Oe(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function Ne(){this.b=this.a=null}Oe.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var Pe,Me=new Oe(function(){return new je},function(a){a.reset()});function Le(){var a=qe,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function je(){this.next=this.b=this.a=null}function Fe(a){c.setTimeout(function(){throw a},0)}function Be(a,b){Pe||function(){var a=c.Promise.resolve(void 0);Pe=function(){a.then(Ve)}}(),Ue||(Pe(),Ue=!0),qe.add(a,b)}Ne.prototype.add=function(a,b){var e=Me.get();e.set(a,b),this.b?this.b.next=e:this.a=e,this.b=e},je.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},je.prototype.reset=function(){this.next=this.b=this.a=null};var Ue=!1,qe=new Ne;function Ve(){for(var a;a=Le();){try{a.a.call(a.b)}catch(e){Fe(e)}var b=Me;b.f(a),100>b.b&&(b.b++,a.next=b.a,b.a=a)}Ue=!1}function ze(a,b){Ae.call(this),this.b=a||1,this.a=b||c,this.f=u(this.gb,this),this.g=x()}function We(a){a.ba=!1,a.L&&(a.a.clearTimeout(a.L),a.L=null)}function Ge(a,b,e){if("function"==p(a))e&&(a=u(a,e));else{if(!a||"function"!=typeof a.handleEvent)throw Error("Invalid listener argument");a=u(a.handleEvent,a)}return 2147483647<Number(b)?-1:c.setTimeout(a,b||0)}function Qe(a,b,e){E.call(this),this.f=null!=e?u(a,e):a,this.c=b,this.b=u(this.ab,this),this.a=[]}function Ke(a){a.U=Ge(a.b,a.c),a.f.apply(null,a.a)}function He(a){E.call(this),this.b=a,this.a={}}T(ze,Ae),(g=ze.prototype).ba=!1,g.L=null,g.gb=function(){if(this.ba){var a=x()-this.g;0<a&&a<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-a):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(We(this),this.start()))}},g.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=x())},g.G=function(){ze.N.G.call(this),We(this),delete this.a},T(Qe,E),(g=Qe.prototype).ea=!1,g.U=null,g.Ua=function(a){this.a=arguments,this.U?this.ea=!0:Ke(this)},g.G=function(){Qe.N.G.call(this),this.U&&(c.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},g.ab=function(){this.U=null,this.ea&&(this.ea=!1,Ke(this))},T(He,E);var $e=[];function Ye(a,b,e,t){q(e)||(e&&($e[0]=e.toString()),e=$e);for(var n=0;n<e.length;n++){var r=we(b,e[n],t||a.handleEvent,!1,a.b||a);if(!r)break;a.a[r.key]=r}}function Xe(a){F(a.a,function(b,e){this.a.hasOwnProperty(e)&&Se(b)},a),a.a={}}function Je(){}He.prototype.G=function(){He.N.G.call(this),Xe(this)},He.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ze=new Ae;function et(a){ce.call(this,"serverreachability",a)}function tt(a){Ze.dispatchEvent(new et(Ze,a))}function nt(a){ce.call(this,"statevent",a)}function it(a){Ze.dispatchEvent(new nt(Ze,a))}function ot(a){ce.call(this,"timingevent",a)}function at(a,b){if("function"!=p(a))throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},b)}T(et,ce),T(nt,ce),T(ot,ce);var st={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},ct={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function ut(){}function lt(a){var b;return(b=a.a)||(b=a.a={}),b}function ht(){}ut.prototype.a=null;var ft,pt={OPEN:"a",ib:"b",Na:"c",rb:"d"};function mt(){ce.call(this,"d")}function vt(){ce.call(this,"c")}function gt(){}function yt(a,b,e){this.g=a,this.W=b,this.V=e||1,this.I=new He(this),this.O=bt,a=H?125:void 0,this.P=new ze(a),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}T(mt,ce),T(vt,ce),T(gt,ut),ft=new gt;var bt=45e3,wt={},_t={};function St(a,b,e){a.F=1,a.f=Kt(Ut(b)),a.l=e,a.H=!0,xt(a,null)}function Ct(a,b,e,t){a.F=1,a.f=Kt(Ut(b)),a.l=null,a.H=e,xt(a,t)}function xt(a,b){a.v=x(),It(a),a.D=Ut(a.f),Qt(a.D,"t",a.V),a.A=0,a.a=a.g.$(a.g.Y()?b:null),0<a.J&&(a.B=new Qe(u(a.Ka,a,a.a),a.J)),Ye(a.I,a.a,"readystatechange",a.eb),b=a.h?B(a.h):{},a.l?(a.w||(a.w="POST"),b["Content-Type"]="application/x-www-form-urlencoded",a.a.ca(a.D,a.w,a.l,b)):(a.w="GET",a.a.ca(a.D,a.w,null,b)),tt(1)}function Tt(a,b,e){for(var t=!0;!a.m&&a.A<e.length;){var n=Et(a,e);if(n==_t){4==b&&(a.c=4,it(14),t=!1);break}if(n==wt){a.c=4,it(15),t=!1;break}Ot(a,n)}4==b&&0==e.length&&(a.c=1,it(16),t=!1),a.b=a.b&&t,t||(kt(a),Rt(a))}function Et(a,b){var e=a.A,t=b.indexOf("\n",e);return-1==t?_t:(e=Number(b.substring(e,t)),isNaN(e)?wt:(t+=1)+e>b.length?_t:(b=b.substr(t,e),a.A=t+e,b))}function It(a){a.R=x()+a.O,Dt(a,a.O)}function Dt(a,b){if(null!=a.i)throw Error("WatchDog timer not null");a.i=at(u(a.bb,a),b)}function At(a){a.i&&(c.clearTimeout(a.i),a.i=null)}function Rt(a){a.g.Da()||a.m||a.g.na(a)}function kt(a){At(a);var b=a.B;b&&"function"==typeof b.la&&b.la(),a.B=null,We(a.P),Xe(a.I),a.a&&(b=a.a,a.a=null,b.abort(),b.la())}function Ot(a,b){try{a.g.Ga(a,b),tt(4)}catch(e){}}function Nt(a,b){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,void 0);else if(m(a)||l(a))D(a,b,void 0);else{if(a.K&&"function"==typeof a.K)var e=a.K();else if(a.C&&"function"==typeof a.C)e=void 0;else if(m(a)||l(a)){e=[];for(var t=a.length,n=0;n<t;n++)e.push(n)}else for(n in e=[],t=0,a)e[t++]=n;n=(t=function(a){if(a.C&&"function"==typeof a.C)return a.C();if(l(a))return a.split("");if(m(a)){for(var b=[],e=a.length,t=0;t<e;t++)b.push(a[t]);return b}for(t in b=[],e=0,a)b[e++]=a[t];return b}(a)).length;for(var r=0;r<n;r++)b.call(void 0,t[r],e&&e[r],a)}}function Pt(a,b){this.b={},this.a=[],this.c=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var t=0;t<e;t+=2)this.set(arguments[t],arguments[t+1])}else if(a)if(a instanceof Pt)for(e=a.K(),t=0;t<e.length;t++)this.set(e[t],a.get(e[t]));else for(t in a)this.set(t,a[t])}function Mt(a,b){jt(a.b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Lt(a))}function Lt(a){if(a.c!=a.a.length){for(var b=0,e=0;b<a.a.length;){var t=a.a[b];jt(a.b,t)&&(a.a[e++]=t),b++}a.a.length=e}if(a.c!=a.a.length){var n={};for(e=b=0;b<a.a.length;)jt(n,t=a.a[b])||(a.a[e++]=t,n[t]=1),b++;a.a.length=e}}function jt(a,b){return Object.prototype.hasOwnProperty.call(a,b)}(g=yt.prototype).setTimeout=function(a){this.O=a},g.eb=function(a){a=a.target;var b=this.B;b&&3==Fn(a)?b.Ua():this.Ka(a)},g.Ka=function(a){try{if(a==this.a)e:{var b=Fn(this.a),e=this.a.ya(),t=this.a.T();if(!(3>b||3==b&&!H&&!this.a.aa())){this.m||4!=b||7==e||tt(8==e||0>=t?3:2),At(this);var n=this.a.T();this.o=n;var r=this.a.aa();if(this.b=200==n){if(this.S&&!this.s){t:{if(this.a){var o=Bn(this.a,"X-HTTP-Initial-Response");if(o&&!k(o)){var c=o;break t}}c=null}if(!c){this.b=!1,this.c=3,it(12),kt(this),Rt(this);break e}this.s=!0,Ot(this,c)}this.H?(Tt(this,b,r),H&&this.b&&3==b&&(Ye(this.I,this.P,"tick",this.cb),this.P.start())):Ot(this,r),4==b&&kt(this),this.b&&!this.m&&(4==b?this.g.na(this):(this.b=!1,It(this)))}else 400==n&&0<r.indexOf("Unknown SID")?(this.c=3,it(12)):(this.c=0,it(13)),kt(this),Rt(this)}}}catch(e){}},g.cb=function(){if(this.a){var a=Fn(this.a),b=this.a.aa();this.A<b.length&&(At(this),Tt(this,a,b),this.b&&4!=a&&It(this))}},g.cancel=function(){this.m=!0,kt(this)},g.bb=function(){this.i=null;var a=x();0<=a-this.R?(2!=this.F&&(tt(3),it(17)),kt(this),this.c=2,Rt(this)):Dt(this,this.R-a)},(g=Pt.prototype).C=function(){Lt(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},g.K=function(){return Lt(this),this.a.concat()},g.get=function(a,b){return jt(this.b,a)?this.b[a]:b},g.set=function(a,b){jt(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},g.forEach=function(a,b){for(var e=this.K(),t=0;t<e.length;t++){var n=e[t],r=this.get(n);a.call(b,r,n,this)}};var Ft=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Bt(a,b){var e;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,a instanceof Bt?(this.h=void 0!==b?b:a.h,qt(this,a.f),this.j=a.j,Vt(this,a.b),zt(this,a.i),this.a=a.a,Wt(this,cn(a.c)),this.g=a.g):a&&(e=String(a).match(Ft))?(this.h=!!b,qt(this,e[1]||"",!0),this.j=Ht(e[2]||""),Vt(this,e[3]||"",!0),zt(this,e[4]),this.a=Ht(e[5]||"",!0),Wt(this,e[6]||"",!0),this.g=Ht(e[7]||"")):(this.h=!!b,this.c=new nn(null,this.h))}function Ut(a){return new Bt(a)}function qt(a,b,e){a.f=e?Ht(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,""))}function Vt(a,b,e){a.b=e?Ht(b,!0):b}function zt(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.i=b}else a.i=null}function Wt(a,b,e){b instanceof nn?(a.c=b,function(a,b){b&&!a.f&&(rn(a),a.c=null,a.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(on(this,t),sn(this,n,e))},a)),a.f=b}(a.c,a.h)):(e||(b=$t(b,en)),a.c=new nn(b,a.h))}function Gt(a,b,e){a.c.set(b,e)}function Qt(a,b,e){q(e)||(e=[String(e)]),sn(a.c,b,e)}function Kt(a){return Gt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^x()).toString(36)),a}function Ht(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function $t(a,b,e){return l(a)?(a=encodeURI(a).replace(b,Yt),e&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Yt(a){return"%"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Bt.prototype.toString=function(){var a=[],b=this.f;b&&a.push($t(b,Xt,!0),":");var e=this.b;return(e||"file"==b)&&(a.push("//"),(b=this.j)&&a.push($t(b,Xt,!0),"@"),a.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.i)&&a.push(":",String(e))),(e=this.a)&&(this.b&&"/"!=e.charAt(0)&&a.push("/"),a.push($t(e,"/"==e.charAt(0)?Zt:Jt,!0))),(e=this.c.toString())&&a.push("?",e),(e=this.g)&&a.push("#",$t(e,tn)),a.join("")},Bt.prototype.resolve=function(a){var b=Ut(this),e=!!a.f;e?qt(b,a.f):e=!!a.j,e?b.j=a.j:e=!!a.b,e?Vt(b,a.b):e=null!=a.i;var t=a.a;if(e)zt(b,a.i);else if(e=!!a.a){if("/"!=t.charAt(0))if(this.b&&!this.a)t="/"+t;else{var n=b.a.lastIndexOf("/");-1!=n&&(t=b.a.substr(0,n+1)+t)}if(".."==(n=t)||"."==n)t="";else if(P(n,"./")||P(n,"/.")){t=0==n.lastIndexOf("/",0),n=n.split("/");for(var r=[],o=0;o<n.length;){var c=n[o++];"."==c?t&&o==n.length&&r.push(""):".."==c?((1<r.length||1==r.length&&""!=r[0])&&r.pop(),t&&o==n.length&&r.push("")):(r.push(c),t=!0)}t=r.join("/")}else t=n}return e?b.a=t:e=""!==a.c.toString(),e?Wt(b,cn(a.c)):e=!!a.g,e&&(b.g=a.g),b};var Xt=/[#\/\?@]/g,Jt=/[#\?:]/g,Zt=/[#\?]/g,en=/[#\?@]/g,tn=/#/g;function nn(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function rn(a){a.a||(a.a=new Pt,a.b=0,a.c&&function(a,b){if(a){a=a.split("&");for(var e=0;e<a.length;e++){var t=a[e].indexOf("="),n=null;if(0<=t){var r=a[e].substring(0,t);n=a[e].substring(t+1)}else r=a[e];b(r,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(a.c,function(b,e){a.add(decodeURIComponent(b.replace(/\+/g," ")),e)}))}function on(a,b){rn(a),b=un(a,b),jt(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,Mt(a.a,b))}function an(a,b){return rn(a),b=un(a,b),jt(a.a.b,b)}function sn(a,b,e){on(a,b),0<e.length&&(a.c=null,a.a.set(un(a,b),R(e)),a.b+=e.length)}function cn(a){var b=new nn;return b.c=a.c,a.a&&(b.a=new Pt(a.a),b.b=a.b),b}function un(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function ln(a){this.a=a,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function hn(a){var b=a.a.F.a;if(null!=b)it(4),b?(it(10),Xn(a.a,a,!1)):(it(11),Xn(a.a,a,!0));else{a.b=new yt(a,void 0,void 0),a.b.h=a.h,b=rr(b=a.a,b.Y()?a.f:null,a.i),it(4),Qt(b,"TYPE","xmlhttp");var e=a.a.j,t=a.a.I;e&&t&&Gt(b,e,t),Ct(a.b,b,!1,a.f)}}function fn(){this.a=this.b=null}function dn(){this.a=new Pt}function pn(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+(a[y]||(a[y]=++w)):b.charAt(0)+a}function mn(a,b){this.b=a,this.a=b}function vn(a){this.g=a||gn,c.PerformanceNavigationTiming?a=0<(a=c.performance.getEntriesByType("navigation")).length&&("hq"==a[0].nextHopProtocol||"h2"==a[0].nextHopProtocol):a=!!(c.ka&&c.ka.Ea&&c.ka.Ea()&&c.ka.Ea().zb),this.f=a?this.g:1,this.a=null,1<this.f&&(this.a=new dn),this.b=null,this.c=[]}(g=nn.prototype).add=function(a,b){rn(this),this.c=null,a=un(this,a);var e=this.a.get(a);return e||this.a.set(a,e=[]),e.push(b),this.b+=1,this},g.forEach=function(a,b){rn(this),this.a.forEach(function(e,t){D(e,function(e){a.call(b,e,t,this)},this)},this)},g.K=function(){rn(this);for(var a=this.a.C(),b=this.a.K(),e=[],t=0;t<b.length;t++)for(var n=a[t],r=0;r<n.length;r++)e.push(b[t]);return e},g.C=function(a){rn(this);var b=[];if(l(a))an(this,a)&&(b=A(b,this.a.get(un(this,a))));else{a=this.a.C();for(var e=0;e<a.length;e++)b=A(b,a[e])}return b},g.set=function(a,b){return rn(this),this.c=null,an(this,a=un(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},g.get=function(a,b){return a&&0<(a=this.C(a)).length?String(a[0]):b},g.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.K(),e=0;e<b.length;e++){var t=b[e],n=encodeURIComponent(String(t));t=this.C(t);for(var r=0;r<t.length;r++){var o=n;""!==t[r]&&(o+="="+encodeURIComponent(String(t[r]))),a.push(o)}}return this.c=a.join("&")},T(function(){},function(){}),(g=ln.prototype).M=null,g.$=function(a){return this.a.$(a)},g.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},g.Da=function(){return!1},g.Ga=function(a,b){if(this.c=a.o,0==this.M){if(!this.a.o&&(a=a.a)){var e=Bn(a,"X-Client-Wire-Protocol");this.l=e||null,this.a.j&&(a=Bn(a,"X-HTTP-Session-Id"))&&(this.a.I=a)}if(b){try{var t=this.a.ja.a.parse(b)}catch(e){return(b=this.a).m=this.c,void er(b,2)}this.f=t[0]}else(b=this.a).m=this.c,er(b,2)}else 1==this.M&&(this.g?it(6):"11111"==b?(it(5),this.g=!0,(!Q||10<=Number(te))&&(this.c=200,this.b.cancel(),it(11),Xn(this.a,this,!0))):(it(7),this.g=!1))},g.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,hn(this)):1==this.M&&(this.g?(it(11),Xn(this.a,this,!0)):(it(10),Xn(this.a,this,!1)));else{0==this.M?it(8):1==this.M&&it(9);var a=this.a;a.m=this.c,er(a,2)}},g.Y=function(){return this.a.Y()},g.ma=function(){return this.a.ma()},dn.prototype.add=function(a){this.a.set(pn(a),a)},dn.prototype.C=function(){return this.a.C()};var gn=10;function yn(a,b){!a.a&&(P(b,"spdy")||P(b,"quic")||P(b,"h2"))&&(a.f=a.g,a.a=new dn,a.b&&(dd(a,a.b),a.b=null))}function bn(a){return!!a.b||!!a.a&&a.a.a.c>=a.f}function wn(a){return a.b?1:a.a?a.a.a.c:0}function _n(a,b){return a.b?a=a.b==b:a.a?(b=pn(b),a=jt(a.a.a.b,b)):a=!1,a}function dd(a,b){a.a?a.a.add(b):a.b=b}function Sn(a,b){var e;a.b&&a.b==b?a.b=null:((e=a.a)&&(e=pn(b),e=jt(a.a.a.b,e)),e&&Mt(a.a.a,pn(b)))}function Cn(a){if(null!=a.b)return a.c.concat(a.b.j);if(null!=a.a&&0!=a.a.a.c){var b=a.c;return D(a.a.C(),function(e){b=b.concat(e.j)}),b}return R(a.c)}function xn(){}function Tn(){this.a=new xn}function En(a,b,e){var t=e||"";try{Nt(a,function(e,n){var r=e;v(e)&&(r=ke(e)),b.push(t+n+"="+encodeURIComponent(r))})}catch(e){throw b.push(t+"type="+encodeURIComponent("_badmap")),e}}function In(a,b,e,t,n){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,n(t)}catch(e){}}vn.prototype.cancel=function(){this.c=Cn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(D(this.a.C(),function(a){a.cancel()}),function(a){a.b={},a.a.length=0,a.c=0}(this.a.a))},xn.prototype.stringify=function(a){return c.JSON.stringify(a,void 0)},xn.prototype.parse=function(a){return c.JSON.parse(a,void 0)};var Dn=c.JSON.parse;function An(a){Ae.call(this),this.headers=new Pt,this.H=a||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Rn,this.D=this.F=!1}T(An,Ae);var Rn="",kn=/^https?$/i,On=["POST","PUT"];function Nn(a){return"content-type"==a.toLowerCase()}function Pn(a,b){a.b=!1,a.a&&(a.g=!0,a.a.abort(),a.g=!1),a.f=b,a.h=5,Mn(a),jn(a)}function Mn(a){a.v||(a.v=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function Ln(a){if(a.b&&void 0!==o&&(!a.s[1]||4!=Fn(a)||2!=a.T()))if(a.l&&4==Fn(a))Ge(a.Fa,0,a);else if(a.dispatchEvent("readystatechange"),4==Fn(a)){a.b=!1;try{var e,b=a.T();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}if(!(e=t)){var n;if(n=0===b){var r=String(a.A).match(Ft)[1]||null;if(!r&&c.self&&c.self.location){var l=c.self.location.protocol;r=l.substr(0,l.length-1)}n=!kn.test(r?r.toLowerCase():"")}e=n}e?(a.dispatchEvent("complete"),a.dispatchEvent("success")):(a.h=6,a.f=a.za()+" ["+a.T()+"]",Mn(a))}finally{jn(a)}}}function jn(a,b){if(a.a){td(a);var e=a.a,t=a.s[0]?d:null;a.a=null,a.s=null,b||a.dispatchEvent("ready");try{e.onreadystatechange=t}catch(e){}}}function td(a){a.a&&a.D&&(a.a.ontimeout=null),a.m&&(c.clearTimeout(a.m),a.m=null)}function Fn(a){return a.a?a.a.readyState:0}function Bn(a,b){return a.a?a.a.getResponseHeader(b):null}function Un(a,b,e){e:{for(t in e){var t=!1;break e}t=!0}if(t)return a;if(e=function(a){var b="";return F(a,function(e,t){b+=t,b+=":",b+=e,b+="\r\n"}),b}(e),l(a)){if(b=encodeURIComponent(String(b)),b+=e=null!=e?"="+encodeURIComponent(String(e)):""){if(0>(e=a.indexOf("#"))&&(e=a.length),0>(t=a.indexOf("?"))||t>e){t=e;var n=""}else n=a.substring(t+1,e);e=(a=[a.substr(0,t),n,a.substr(e)])[1],a[1]=b?e?e+"&"+b:b:e,a=a[0]+(a[1]?"?"+a[1]:"")+a[2]}return a}return Gt(a,b,e),a}function qn(a){this.f=[],this.F=new fn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!f("internalChannelParams.failFast",a),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=f("internalChannelParams.baseRetryDelayMs",a)||5e3,this.Sa=f("internalChannelParams.retryDelaySeedMs",a)||1e4,this.Qa=f("internalChannelParams.forwardChannelMaxRetries",a)||2,this.qa=f("internalChannelParams.forwardChannelRequestTimeoutMs",a)||2e4,this.La=a&&a.Ab||void 0,this.D=void 0,this.R=a&&a.supportsCrossDomainXhr||!1,this.H="",this.b=new vn(a&&a.concurrentRequestLimit),this.ja=new Tn,this.o=!a||void 0===a.backgroundChannelTest||a.backgroundChannelTest,(this.W=a&&a.fastHandshake||!1)&&!this.o&&(this.o=!0),a&&a.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Vn(a){if(zn(a),3==a.u){var b=a.P++,e=Ut(a.B);Gt(e,"SID",a.H),Gt(e,"RID",b),Gt(e,"TYPE","terminate"),Kn(a,e),(b=new yt(a,b,void 0)).F=2,b.f=Kt(Ut(e)),e=!1,c.navigator&&c.navigator.sendBeacon&&(e=c.navigator.sendBeacon(b.f.toString(),"")),!e&&c.Image&&((new Image).src=b.f,e=!0),e||(b.a=b.g.$(null),b.a.ca(b.f)),b.v=x(),It(b)}nr(a)}function zn(a){a.w&&(a.w.abort(),a.w=null),a.a&&(a.a.cancel(),a.a=null),a.l&&(c.clearTimeout(a.l),a.l=null),Jn(a),a.b.cancel(),a.h&&(h(a.h)&&c.clearTimeout(a.h),a.h=null)}function Wn(a,b){a.f.push(new mn(a.Ra++,b)),3==a.u&&Gn(a)}function Gn(a){bn(a.b)||a.h||(a.h=!0,Be(a.Ia,a),a.A=0)}function Qn(a,b){var e;e=b?b.W:a.P++;var t=Ut(a.B);Gt(t,"SID",a.H),Gt(t,"RID",e),Gt(t,"AID",a.O),Kn(a,t),a.g&&a.i&&Un(t,a.g,a.i),e=new yt(a,e,a.A+1),null===a.g&&(e.h=a.i),b&&(a.f=b.j.concat(a.f)),b=Hn(a,e,1e3),e.setTimeout(Math.round(.5*a.qa)+Math.round(.5*a.qa*Math.random())),dd(a.b,e),St(e,t,b)}function Kn(a,b){a.c&&Nt({},function(e,t){Gt(b,t,e)})}function Hn(a,b,e){e=Math.min(a.f.length,e);var t=a.c?u(a.c.Ta,a.c,a):null;e:for(var n=a.f,r=-1;;){var o=["count="+e];-1==r?0<e?(r=n[0].b,o.push("ofs="+r)):r=0:o.push("ofs="+r);for(var c=!0,l=0;l<e;l++){var h=n[l].b,f=n[l].a;if(0>(h-=r))r=Math.max(0,n[l].b-100),c=!1;else try{En(f,o,"req"+h+"_")}catch(e){t&&t(f)}}if(c){t=o.join("&");break e}}return a=a.f.splice(0,e),b.j=a,t}function $n(a){a.a||a.l||(a.S=1,Be(a.Ha,a),a.v=0)}function Yn(a){return!(a.a||a.l||3<=a.v)&&(a.S++,a.l=at(u(a.Ha,a),Zn(a,a.v)),a.v++,!0)}function Xn(a,b,e){var t=b.l;t&&yn(a.b,t),a.ia=a.oa&&e,a.m=b.c,a.B=rr(a,null,a.ha),Gn(a)}function Jn(a){null!=a.s&&(c.clearTimeout(a.s),a.s=null)}function Zn(a,b){var e=a.Oa+Math.floor(Math.random()*a.Sa);return a.ma()||(e*=2),e*b}function er(a,b){if(2==b){var e=null;a.c&&(e=null);var t=u(a.fb,a);e||(e=new Bt("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||qt(e,"https"),Kt(e)),function(a,b){var e=new Je;if(c.Image){var t=new Image;t.onload=C(In,e,t,"TestLoadImage: loaded",!0,b),t.onerror=C(In,e,t,"TestLoadImage: error",!1,b),t.onabort=C(In,e,t,"TestLoadImage: abort",!1,b),t.ontimeout=C(In,e,t,"TestLoadImage: timeout",!1,b),c.setTimeout(function(){t.ontimeout&&t.ontimeout()},1e4),t.src=a}else b(!1)}(e.toString(),t)}else it(2);a.u=0,a.c&&a.c.ta(b),nr(a),zn(a)}function nr(a){a.u=0,a.m=-1,a.c&&(0==Cn(a.b).length&&0==a.f.length||(a.b.c.length=0,R(a.f),a.f.length=0),a.c.sa())}function rr(a,b,e){var t=function(a){return a instanceof Bt?Ut(a):new Bt(a,void 0)}(e);if(""!=t.b)b&&Vt(t,b+"."+t.b),zt(t,t.i);else{var n,r=c.location;n=b?b+"."+r.hostname:r.hostname,t=function(a,b,e,t){var n=new Bt(null,void 0);return a&&qt(n,a),b&&Vt(n,b),e&&zt(n,e),t&&(n.a=t),n}(r.protocol,n,+r.port,e)}return a.V&&F(a.V,function(e,n){Gt(t,n,e)}),b=a.j,e=a.I,b&&e&&Gt(t,b,e),Gt(t,"VER",a.wa),Kn(a,t),t}function ir(){}function or(){if(Q&&!(10<=Number(te)))throw Error("Environmental error: no available transport.")}function ar(a,b){Ae.call(this),this.a=new qn(b),this.g=a,this.m=b&&b.testUrl?b.testUrl:function(a){for(var b=arguments[0],e=1;e<arguments.length;e++){var t,n=arguments[e];if(0==n.lastIndexOf("/",0))b=n;else(t=""==b)||(t=0<=(t=b.length-1)&&b.indexOf("/",t)==t),b+=t?n:"/"+n}return b}(this.g,"test"),this.b=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.a.i=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a["X-WebChannel-Content-Type"]=b.messageContentType:a={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.xa&&(a?a["X-WebChannel-Client-Profile"]=b.xa:a={"X-WebChannel-Client-Profile":b.xa}),this.a.J=a,(a=b&&b.httpHeadersOverwriteParam)&&!k(a)&&(this.a.g=a),this.l=b&&b.supportsCrossDomainXhr||!1,this.h=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!k(b)&&(this.a.j=b,null!==(a=this.b)&&b in a&&(b in(a=this.b)&&delete a[b])),this.f=new ur(this)}function sr(a){mt.call(this);var b=a.__sm__;if(b){e:{for(var e in b){a=e;break e}a=void 0}(this.c=a)?(a=this.c,this.data=null!==b&&a in b?b[a]:void 0):this.data=b}else this.data=a}function cr(){vt.call(this),this.status=1}function ur(a){this.a=a}(g=An.prototype).ca=function(a,b,e,t){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+a);b=b?b.toUpperCase():"GET",this.A=a,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?lt(this.H):lt(ft),this.a.onreadystatechange=u(this.Fa,this);try{this.w=!0,this.a.open(b,String(a),!0),this.w=!1}catch(e){return void Pn(this,e)}a=e||"";var n=new Pt(this.headers);t&&Nt(t,function(e,t){n.set(t,e)}),t=function(a){e:{for(var b=Nn,e=a.length,t=l(a)?a.split(""):a,n=0;n<e;n++)if(n in t&&b.call(void 0,t[n],n,a)){b=n;break e}b=-1}return 0>b?null:l(a)?a.charAt(b):a[b]}(n.K()),e=c.FormData&&a instanceof c.FormData,!(0<=I(On,b))||t||e||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{td(this),0<this.o&&((this.D=function(a){return Q&&re(9)&&h(a.timeout)&&void 0!==a.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=u(this.Ca,this)):this.m=Ge(this.Ca,this.o,this)),this.l=!0,this.a.send(a),this.l=!1}catch(e){Pn(this,e)}},g.Ca=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},g.abort=function(a){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),jn(this))},g.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),jn(this,!0)),An.N.G.call(this)},g.Fa=function(){this.j||(this.w||this.l||this.g?Ln(this):this.$a())},g.$a=function(){Ln(this)},g.T=function(){try{return 2<Fn(this)?this.a.status:-1}catch(e){return-1}},g.za=function(){try{return 2<Fn(this)?this.a.statusText:""}catch(e){return""}},g.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},g.Va=function(a){if(this.a){var b=this.a.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),Dn(b)}},g.ya=function(){return this.h},g.Ya=function(){return l(this.f)?this.f:String(this.f)},(g=qn.prototype).wa=8,g.u=1,g.Da=function(){return 0==this.u},g.Ia=function(a){if(this.h)if(this.h=null,1==this.u){if(!a){this.P=Math.floor(1e5*Math.random());var e,b=new yt(this,a=this.P++,void 0),t=this.i;if(this.J&&(t?V(t=B(t),this.J):t=this.J),null===this.g&&(b.h=t),this.W)e:{for(var n=e=0;n<this.f.length;n++){var r=this.f[n];if(void 0===(r="__data__"in r.a&&l(r=r.a.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.f.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Hn(this,b,e),Gt(n=Ut(this.B),"RID",a),Gt(n,"CVER",22),this.o&&this.j&&Gt(n,"X-HTTP-Session-Id",this.j),Kn(this,n),this.g&&t&&Un(n,this.g,t),dd(this.b,b),this.W?(Gt(n,"$req",e),Gt(n,"SID","null"),b.S=!0,St(b,n,null)):St(b,n,e),this.u=2}}else 3==this.u&&(a?Qn(this,a):0==this.f.length||bn(this.b)||Qn(this))},g.Ha=function(){this.l=null,this.a=new yt(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var a=Ut(this.pa);Gt(a,"RID","rpc"),Gt(a,"SID",this.H),Gt(a,"CI",this.ia?"0":"1"),Gt(a,"AID",this.O),Kn(this,a),Gt(a,"TYPE","xmlhttp"),this.g&&this.i&&Un(a,this.g,this.i),this.D&&this.a.setTimeout(this.D),Ct(this.a,a,!0,this.ga)},g.Ga=function(a,b){if(0!=this.u&&(this.a==a||_n(this.b,a)))if(this.m=a.o,!a.s&&_n(this.b,a)&&3==this.u){try{var e=this.ja.a.parse(b)}catch(t){e=null}if(q(e)&&3==e.length){if(0==(b=e)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<a.v))break e;Jn(this),this.a.cancel(),this.a=null}Yn(this),it(18)}}else this.ra=b[1],0<this.ra-this.O&&37500>b[2]&&this.ia&&0==this.v&&!this.s&&(this.s=at(u(this.Za,this),6e3));if(1>=wn(this.b)&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else er(this,11)}else if((a.s||this.a==a)&&Jn(this),!k(b))for(b=e=this.ja.a.parse(b),e=0;e<b.length;e++){var t=b[e];if(this.O=t[0],t=t[1],2==this.u)if("c"==t[0]){this.H=t[1],this.ga=t[2];var n=t[3];null!=n&&(this.wa=n),null!=(t=t[5])&&h(t)&&0<t&&(this.D=1.5*t),this.o&&(t=a.a)&&((n=Bn(t,"X-Client-Wire-Protocol"))&&yn(this.b,n),this.j&&(t=Bn(t,"X-HTTP-Session-Id")))&&(this.I=t,Gt(this.B,this.j,t)),this.u=3,this.c&&this.c.va(),t=a,this.pa=rr(this,this.Y()?this.ga:null,this.ha),t.s?(Sn(this.b,t),(n=this.D)&&t.setTimeout(n),t.i&&(At(t),It(t)),this.a=t):$n(this),0<this.f.length&&Gn(this)}else"stop"!=t[0]&&"close"!=t[0]||er(this,7);else 3==this.u&&("stop"==t[0]||"close"==t[0]?"stop"==t[0]?er(this,7):Vn(this):"noop"!=t[0]&&this.c&&this.c.ua(t),this.v=0)}},g.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Yn(this),it(19))},g.na=function(a){var b=null;if(this.a==a){Jn(this),this.a=null;var e=2}else{if(!_n(this.b,a))return;b=a.j,Sn(this.b,a),e=1}if(this.m=a.o,0!=this.u)if(a.b)1==e?(b=x()-a.v,Ze.dispatchEvent(new ot(Ze,a.l?a.l.length:0,b,this.A)),Gn(this)):$n(this);else{var t=a.c;if(3==t||0==t&&0<this.m||!(1==e&&function(a,b){return!(wn(a.b)>=a.b.f-(a.h?1:0))&&(a.h?(a.f=b.j.concat(a.f),!0):!(1==a.u||2==a.u||a.A>=(a.Pa?0:a.Qa))&&(a.h=at(u(a.Ia,a,b),Zn(a,a.A)),a.A++,!0))}(this,a)||2==e&&Yn(this)))switch(b&&0<b.length&&(a=this.b,a.c=a.c.concat(b)),t){case 1:er(this,5);break;case 4:er(this,10);break;case 3:er(this,6);break;default:er(this,2)}}},g.fb=function(a){it(a?2:1)},g.$=function(a){if(a&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(a=new An(this.La)).F=this.R,a},g.ma=function(){return!!this.c&&!0},g.Y=function(){return this.R},(g=ir.prototype).va=function(){},g.ua=function(){},g.ta=function(){},g.sa=function(){},g.Ta=function(){},or.prototype.a=function(a,b){return new ar(a,b)},T(ar,Ae),(g=ar.prototype).addEventListener=function(a,b,e,t){ar.N.addEventListener.call(this,a,b,e,t)},g.removeEventListener=function(a,b,e,t){ar.N.removeEventListener.call(this,a,b,e,t)},g.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var a=this.a,b=this.m,e=this.g,t=this.b||void 0;it(0),a.ha=e,a.V=t||{},a.o&&(a.F.b=[],a.F.a=!1),a.w=new ln(a),null===a.g&&(a.w.h=a.i),e=b,a.g&&a.i&&(e=Un(b,a.g,a.i)),(a=a.w).i=e,b=rr(a.a,null,a.i),it(3),null!=(e=a.a.F.b)?(a.f=e[0],a.M=1,hn(a)):(Qt(b,"MODE","init"),!a.a.o&&a.a.j&&Qt(b,"X-HTTP-Session-Id",a.a.j),a.b=new yt(a,void 0,void 0),a.b.h=a.h,Ct(a.b,b,!1,null),a.M=0)},g.close=function(){Vn(this.a)},g.Xa=function(a){if(l(a)){var b={};b.__data__=a,Wn(this.a,b)}else this.h?((b={}).__data__=ke(a),Wn(this.a,b)):Wn(this.a,a)},g.G=function(){this.a.c=null,delete this.f,Vn(this.a),delete this.a,ar.N.G.call(this)},T(sr,mt),T(cr,vt),T(ur,ir),ur.prototype.va=function(){this.a.dispatchEvent("a")},ur.prototype.ua=function(a){this.a.dispatchEvent(new sr(a))},ur.prototype.ta=function(a){this.a.dispatchEvent(new cr(a))},ur.prototype.sa=function(){this.a.dispatchEvent("b")};var lr=C(function(a,b){function e(){}e.prototype=a.prototype;var t=new e;return a.apply(t,Array.prototype.slice.call(arguments,1)),t},or);or.prototype.createWebChannel=or.prototype.a,ar.prototype.send=ar.prototype.Xa,ar.prototype.open=ar.prototype.Wa,ar.prototype.close=ar.prototype.close,st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,ct.COMPLETE="complete",ht.EventType=pt,pt.OPEN="a",pt.CLOSE="b",pt.ERROR="c",pt.MESSAGE="d",Ae.prototype.listen=Ae.prototype.Aa,An.prototype.listenOnce=An.prototype.Ba,An.prototype.getLastError=An.prototype.Ya,An.prototype.getLastErrorCode=An.prototype.ya,An.prototype.getStatus=An.prototype.T,An.prototype.getStatusText=An.prototype.za,An.prototype.getResponseJson=An.prototype.Va,An.prototype.getResponseText=An.prototype.aa,An.prototype.send=An.prototype.ca;var fr={createWebChannelTransport:lr,ErrorCode:st,EventType:ct,WebChannel:ht,XhrIo:An},dr=fr.createWebChannelTransport,pr=fr.ErrorCode,mr=fr.EventType,vr=fr.WebChannel,gr=fr.XhrIo;t.default=fr}.call(this,n(36))},function(e,t,n){"use strict";var r=n(84);n.n(r).a},function(e,t,n){(e.exports=n(9)(!1)).push([e.i,".viewport[data-v-3870cce0]{position:relative}.viewport canvas[data-v-3870cce0],.viewport video[data-v-3870cce0]{position:absolute;left:0;top:0}",""])},,,,function(e,t,n){"use strict";n(161);var r=n(115);t.a=Object(r.a)("container")},function(e,t,n){"use strict";n(209);var r=n(50);t.a={name:"v-content",mixins:[r.a],props:{tag:{type:String,default:"main"}},computed:{styles:function(){var e=this.$vuetify.application,t=e.bar;return{paddingTop:e.top+t+"px",paddingRight:e.right+"px",paddingBottom:e.footer+e.insetFooter+e.bottom+"px",paddingLeft:e.left+"px"}}},render:function(e){var data={staticClass:"v-content",style:this.styles,ref:"content"};return e(this.tag,data,[e("div",{staticClass:"v-content__wrap"},this.$slots.default)])}}},function(e,t,n){"use strict";n(80),n(26),n(213);var r=n(51),o=n(15),c=n(12),l=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a={name:"v-footer",mixins:[Object(r.a)(null,["height","inset"]),o.a,c.a],props:{height:{default:32,type:[Number,String]},inset:Boolean},computed:{applicationProperty:function(){return this.inset?"insetFooter":"footer"},computedMarginBottom:function(){if(this.app)return this.$vuetify.application.bottom},computedPaddingLeft:function(){return this.app&&this.inset?this.$vuetify.application.left:0},computedPaddingRight:function(){return this.app&&this.inset?this.$vuetify.application.right:0},styles:function(){var e={height:isNaN(this.height)?this.height:this.height+"px"};return this.computedPaddingLeft&&(e.paddingLeft=this.computedPaddingLeft+"px"),this.computedPaddingRight&&(e.paddingRight=this.computedPaddingRight+"px"),this.computedMarginBottom&&(e.marginBottom=this.computedMarginBottom+"px"),e}},methods:{updateApplication:function(){var e=parseInt(this.height);return isNaN(e)?this.$el?this.$el.clientHeight:0:e}},render:function(e){return e("footer",this.setBackgroundColor(this.color,{staticClass:"v-footer",class:l({"v-footer--absolute":this.absolute,"v-footer--fixed":!this.absolute&&(this.app||this.fixed),"v-footer--inset":this.inset},this.themeClasses),style:this.styles,ref:"content"}),this.$slots.default)}}},function(e,t,n){"use strict";n(46),n(47),n(232),n(141),n(80);var r=n(7),o=(n(27),n(22),n(233),n(3)),c=(n(26),n(235),n(15)),l=Object(o.a)(c.a).extend({name:"v-progress-circular",props:{button:Boolean,indeterminate:Boolean,rotate:{type:[Number,String],default:0},size:{type:[Number,String],default:32},width:{type:[Number,String],default:4},value:{type:[Number,String],default:0}},computed:{calculatedSize:function(){return Number(this.size)+(this.button?8:0)},circumference:function(){return 2*Math.PI*this.radius},classes:function(){return{"v-progress-circular--indeterminate":this.indeterminate,"v-progress-circular--button":this.button}},normalizedValue:function(){return this.value<0?0:this.value>100?100:parseFloat(this.value)},radius:function(){return 20},strokeDashArray:function(){return Math.round(1e3*this.circumference)/1e3},strokeDashOffset:function(){return(100-this.normalizedValue)/100*this.circumference+"px"},strokeWidth:function(){return Number(this.width)/+this.size*this.viewBoxSize*2},styles:function(){return{height:this.calculatedSize+"px",width:this.calculatedSize+"px"}},svgStyles:function(){return{transform:"rotate("+Number(this.rotate)+"deg)"}},viewBoxSize:function(){return this.radius/(1-Number(this.width)/+this.size)}},methods:{genCircle:function(e,t,n){return e("circle",{class:"v-progress-circular__"+t,attrs:{fill:"transparent",cx:2*this.viewBoxSize,cy:2*this.viewBoxSize,r:this.radius,"stroke-width":this.strokeWidth,"stroke-dasharray":this.strokeDashArray,"stroke-dashoffset":n}})},genSvg:function(e){var t=[this.indeterminate||this.genCircle(e,"underlay",0),this.genCircle(e,"overlay",this.strokeDashOffset)];return e("svg",{style:this.svgStyles,attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:this.viewBoxSize+" "+this.viewBoxSize+" "+2*this.viewBoxSize+" "+2*this.viewBoxSize}},t)}},render:function(e){var t=e("div",{staticClass:"v-progress-circular__info"},this.$slots.default),svg=this.genSvg(e);return e("div",this.setTextColor(this.color,{staticClass:"v-progress-circular",attrs:{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":this.indeterminate?void 0:this.normalizedValue},class:this.classes,style:this.styles,on:this.$listeners}),[svg,t])}}),h=n(49);function f(e,t,n){return Object(h.a)(e,t,n).extend({name:"groupable",props:{activeClass:{type:String,default:function(){if(this[e])return this[e].activeClass}},disabled:Boolean},data:function(){return{isActive:!1}},computed:{groupClasses:function(){return this.activeClass?(e={},t=this.activeClass,n=this.isActive,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e):{};var e,t,n}},created:function(){this[e]&&this[e].register(this)},beforeDestroy:function(){this[e]&&this[e].unregister(this)},methods:{toggle:function(){this.$emit("change")}}})}f("itemGroup");var d=n(87),m=n(88),v=n(12),y=n(52),w=n(1),_="function"==typeof Symbol&&"symbol"===Object(r.a)(Symbol.iterator)?function(e){return Object(r.a)(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Object(r.a)(e)},S=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=Object(o.a)(c.a,m.a,d.a,v.a,f("btnToggle"),Object(y.b)("inputValue")).extend().extend({name:"v-btn",props:{activeClass:{type:String,default:"v-btn--active"},block:Boolean,depressed:Boolean,fab:Boolean,flat:Boolean,icon:Boolean,large:Boolean,loading:Boolean,outline:Boolean,ripple:{type:[Boolean,Object],default:null},round:Boolean,small:Boolean,tag:{type:String,default:"button"},type:{type:String,default:"button"},value:null},computed:{classes:function(){var e;return S((C(e={"v-btn":!0},this.activeClass,this.isActive),C(e,"v-btn--absolute",this.absolute),C(e,"v-btn--block",this.block),C(e,"v-btn--bottom",this.bottom),C(e,"v-btn--disabled",this.disabled),C(e,"v-btn--flat",this.flat),C(e,"v-btn--floating",this.fab),C(e,"v-btn--fixed",this.fixed),C(e,"v-btn--icon",this.icon),C(e,"v-btn--large",this.large),C(e,"v-btn--left",this.left),C(e,"v-btn--loader",this.loading),C(e,"v-btn--outline",this.outline),C(e,"v-btn--depressed",this.depressed&&!this.flat||this.outline),C(e,"v-btn--right",this.right),C(e,"v-btn--round",this.round),C(e,"v-btn--router",this.to),C(e,"v-btn--small",this.small),C(e,"v-btn--top",this.top),e),this.themeClasses)},computedRipple:function(){var e=!this.icon&&!this.fab||{circle:!0};return!this.disabled&&(null!==this.ripple?this.ripple:e)}},watch:{$route:"onRouteChange"},methods:{click:function(e){!this.fab&&e.detail&&this.$el.blur(),this.$emit("click",e),this.btnToggle&&this.toggle()},genContent:function(){return this.$createElement("div",{class:"v-btn__content"},this.$slots.default)},genLoader:function(){return this.$createElement("span",{class:"v-btn__loading"},this.$slots.loader||[this.$createElement(l,{props:{indeterminate:!0,size:23,width:2}})])},onRouteChange:function(){var e=this;if(this.to&&this.$refs.link){var path="_vnode.data.class."+this.activeClass;this.$nextTick(function(){Object(w.h)(e.$refs.link,path)&&e.toggle()})}}},render:function(e){var t=this.outline||this.flat||this.disabled?this.setTextColor:this.setBackgroundColor,n=this.generateRouteLink(this.classes),r=n.tag,data=n.data,o=[this.genContent(),this.loading&&this.genLoader()];return"button"===r&&(data.attrs.type=this.type),data.attrs.value=["string","number"].includes(_(this.value))?this.value:JSON.stringify(this.value),this.btnToggle&&(data.ref="link"),e(r,t(this.color,data),o)}}),T=n(64),E=n(0);t.a=E.a.extend({name:"v-toolbar-side-icon",functional:!0,render:function(e,t){var n=t.slots,r=t.listeners,o=t.props,data=t.data,c=data.staticClass?data.staticClass+" v-toolbar__side-icon":"v-toolbar__side-icon",l=Object.assign(data,{staticClass:c,props:Object.assign(o,{icon:!0}),on:r}),h=n().default;return e(x,l,h||[e(T.a,"$vuetify.icons.menu")])}})},function(e,t,n){"use strict";n(204),n(41),n(63),n(23),n(14),n(48);var r=n(7),o=(n(27),n(22),n(21),n(102),n(66),n(67),n(13));function c(e){var t=void 0;if("number"==typeof e)t=e;else{if("string"!=typeof e)throw new TypeError("Colors can only be numbers or strings, recieved "+(null==e?e:e.constructor.name)+" instead");var n="#"===e[0]?e.substring(1):e;3===n.length&&(n=n.split("").map(function(e){return e+e}).join("")),6!==n.length&&Object(o.b)("'"+e+"' is not a valid rgb color"),t=parseInt(n,16)}return t<0?(Object(o.b)("Colors cannot be negative: '"+e+"'"),t=0):(t>16777215||isNaN(t))&&(Object(o.b)("'"+e+"' is not a valid rgb color"),t=16777215),t}function l(e){var t=e.toString(16);return t.length<6&&(t="0".repeat(6-t.length)+t),"#"+t}var h=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],f=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},d=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],m=function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)};function v(e){for(var t,n=Array(3),r=f,o=h,i=0;i<3;++i)n[i]=Math.round(255*(t=r(o[i][0]*e[0]+o[i][1]*e[1]+o[i][2]*e[2]),Math.max(0,Math.min(1,t))));return(n[0]<<16)+(n[1]<<8)+(n[2]<<0)}function y(e){for(var t=[0,0,0],n=m,r=d,o=n((e>>16&255)/255),g=n((e>>8&255)/255),b=n((e>>0&255)/255),i=0;i<3;++i)t[i]=r[i][0]*o+r[i][1]*g+r[i][2]*b;return t}n(206);var w=.20689655172413793,_=function(e){return e>Math.pow(w,3)?Math.cbrt(e):e/(3*Math.pow(w,2))+4/29},S=function(e){return e>w?Math.pow(e,3):3*Math.pow(w,2)*(e-4/29)};function C(e){var t=_,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function x(e){var t=S,n=(e[0]+16)/116;return[.95047*t(n+e[1]/500),t(n),1.08883*t(n-e[2]/200)]}var T=function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,i){var t=[],n=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(n=(c=l.next()).done)&&(t.push(c.value),!i||t.length!==i);n=!0);}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return t}(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")},E="function"==typeof Symbol&&"symbol"===Object(r.a)(Symbol.iterator)?function(e){return Object(r.a)(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Object(r.a)(e)};var I=function(e,t){return"\n."+e+" {\n  background-color: "+t+" !important;\n  border-color: "+t+" !important;\n}\n."+e+"--text {\n  color: "+t+" !important;\n  caret-color: "+t+" !important;\n}"},D=function(e,t,n){var r=t.split(/(\d)/,2),o=T(r,2),c=o[0],l=o[1];return"\n."+e+"."+c+"-"+l+" {\n  background-color: "+n+" !important;\n  border-color: "+n+" !important;\n}\n."+e+"--text.text--"+c+"-"+l+" {\n  color: "+n+" !important;\n  caret-color: "+n+" !important;\n}"},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base";return"--v-"+e+"-"+t},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base";return"var("+A(e,t)+")"};function k(e,t){for(var n={base:l(t)},i=5;i>0;--i)n["lighten"+i]=l(O(t,i));for(var r=1;r<=4;++r)n["darken"+r]=l(N(t,r));return n}function O(e,t){var n=C(y(e));return n[0]=n[0]+10*t,v(x(n))}function N(e,t){var n=C(y(e));return n[0]=n[0]-10*t,v(x(n))}var P={data:function(){return{style:null}},computed:{parsedTheme:function(){return function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Object.keys(t),o={},i=0;i<r.length;++i){var h=r[i],f=t[h];n?("base"===h||h.startsWith("lighten")||h.startsWith("darken"))&&(o[h]=l(c(f))):"object"===(void 0===f?"undefined":E(f))?o[h]=e(f,!0):o[h]=k(0,c(f))}return o}(this.$vuetify.theme)},generatedStyles:function(){var e=this.parsedTheme,t=void 0;return null!=this.$vuetify.options.themeCache&&null!=(t=this.$vuetify.options.themeCache.get(e))?t:(t=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object.keys(e);if(!n.length)return"";var r="",o="";o+="a { color: "+(t?R("primary"):e.primary.base)+"; }";for(var i=0;i<n.length;++i){var c=n[i],l=e[c];if("object"===(void 0===l?"undefined":E(l))){o+=I(c,t?R(c):l.base),t&&(r+="  "+A(c)+": "+l.base+";\n");for(var h=Object.keys(l),f=0;f<h.length;++f){var d=h[f],m=l[d];"base"!==d&&(o+=D(c,d,t?R(c,d):m),t&&(r+="  "+A(c,d)+": "+m+";\n"))}}}return t&&(r=":root {\n"+r+"}\n\n"),r+o}(e,this.$vuetify.options.customProperties),null!=this.$vuetify.options.minifyTheme&&(t=this.$vuetify.options.minifyTheme(t)),null!=this.$vuetify.options.themeCache&&this.$vuetify.options.themeCache.set(e,t),t)},vueMeta:function(){if(!1===this.$vuetify.theme)return{};var e={cssText:this.generatedStyles,id:"vuetify-theme-stylesheet",type:"text/css"};return this.$vuetify.options.cspNonce&&(e.nonce=this.$vuetify.options.cspNonce),{style:[e]}}},metaInfo:function(){return this.vueMeta},head:function(){return this.vueMeta},watch:{generatedStyles:function(){!this.meta&&this.applyTheme()}},created:function(){if(!1!==this.$vuetify.theme)if(this.$meta);else if("undefined"==typeof document&&this.$ssrContext){var e=this.$vuetify.options.cspNonce?' nonce="'+this.$vuetify.options.cspNonce+'"':"";this.$ssrContext.head=this.$ssrContext.head||"",this.$ssrContext.head+='<style type="text/css" id="vuetify-theme-stylesheet"'+e+">"+this.generatedStyles+"</style>"}else"undefined"!=typeof document&&(this.genStyle(),this.applyTheme())},methods:{applyTheme:function(){this.style&&(this.style.innerHTML=this.generatedStyles)},genStyle:function(){var style=document.getElementById("vuetify-theme-stylesheet");style||((style=document.createElement("style")).type="text/css",style.id="vuetify-theme-stylesheet",this.$vuetify.options.cspNonce&&style.setAttribute("nonce",this.$vuetify.options.cspNonce),document.head.appendChild(style)),this.style=style}}},M=n(12),L=n(86),j=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a={name:"v-app",directives:{Resize:L.a},mixins:[P,M.a],props:{id:{type:String,default:"app"},dark:Boolean},computed:{classes:function(){return j({"application--is-rtl":this.$vuetify.rtl},this.themeClasses)}},watch:{dark:function(){this.$vuetify.dark=this.dark}},mounted:function(){this.$vuetify.dark=this.dark},render:function(e){var data={staticClass:"application",class:this.classes,attrs:{"data-app":!0},domProps:{id:this.id}},t=e("div",{staticClass:"application--wrap"},this.$slots.default);return e("div",data,[t])}}},function(e,t,n){"use strict";n(80),n(26),n(226);var r=n(51),o=(n(45),n(91),n(3));function c(e){if(Array.isArray(e)){for(var i=0,t=Array(e.length);i<e.length;i++)t[i]=e[i];return t}return Array.from(e)}var l=Object(o.a)().extend({name:"dependent",data:function(){return{closeDependents:!0,isActive:!1,isDependent:!0}},watch:{isActive:function(e){if(!e)for(var t=this.getOpenDependents(),n=0;n<t.length;n++)t[n].isActive=!1}},methods:{getOpenDependents:function(){return this.closeDependents?function e(t){for(var n=[],r=0;r<t.length;r++){var o=t[r];o.isActive&&o.isDependent?n.push(o):n.push.apply(n,c(e(o.$children)))}return n}(this.$children):[]},getOpenDependentElements:function(){for(var e=[],t=this.getOpenDependents(),n=0;n<t.length;n++)e.push.apply(e,c(t[n].getClickableDependentElements()));return e},getClickableDependentElements:function(){var e=[this.$el];return this.$refs.content&&e.push(this.$refs.content),this.overlay&&e.push(this.overlay),e.push.apply(e,c(this.getOpenDependentElements())),e}}}),h=(n(46),n(47),n(228),n(1)),f=n(0).a.extend().extend({name:"overlayable",props:{hideOverlay:Boolean},data:function(){return{overlay:null,overlayOffset:0,overlayTimeout:void 0,overlayTransitionDuration:650}},watch:{hideOverlay:function(e){e?this.removeOverlay():this.genOverlay()}},beforeDestroy:function(){this.removeOverlay()},methods:{genOverlay:function(){var e=this;if(!this.isActive||this.hideOverlay||this.isActive&&this.overlayTimeout||this.overlay)return clearTimeout(this.overlayTimeout),this.overlay&&this.overlay.classList.add("v-overlay--active");this.overlay=document.createElement("div"),this.overlay.className="v-overlay",this.absolute&&(this.overlay.className+=" v-overlay--absolute"),this.hideScroll();var t=this.absolute?this.$el.parentNode:document.querySelector("[data-app]");return t&&t.insertBefore(this.overlay,t.firstChild),this.overlay.clientHeight,requestAnimationFrame(function(){e.overlay&&(e.overlay.className+=" v-overlay--active",void 0!==e.activeZIndex&&(e.overlay.style.zIndex=String(e.activeZIndex-1)))}),!0},removeOverlay:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.overlay)return t&&this.showScroll();this.overlay.classList.remove("v-overlay--active"),this.overlayTimeout=window.setTimeout(function(){try{e.overlay&&e.overlay.parentNode&&e.overlay.parentNode.removeChild(e.overlay),e.overlay=null,t&&e.showScroll()}catch(e){console.log(e)}clearTimeout(e.overlayTimeout),e.overlayTimeout=void 0},this.overlayTransitionDuration)},scrollListener:function(e){if("keydown"===e.type){if(["INPUT","TEXTAREA","SELECT"].includes(e.target.tagName)||e.target.isContentEditable)return;var t=[h.j.up,h.j.pageup],n=[h.j.down,h.j.pagedown];if(t.includes(e.keyCode))e.deltaY=-1;else{if(!n.includes(e.keyCode))return;e.deltaY=1}}(e.target===this.overlay||"keydown"!==e.type&&e.target===document.body||this.checkPath(e))&&e.preventDefault()},hasScrollbar:function(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;var style=window.getComputedStyle(e);return["auto","scroll"].includes(style.overflowY)&&e.scrollHeight>e.clientHeight},shouldScroll:function(e,t){return 0===e.scrollTop&&t<0||e.scrollTop+e.clientHeight===e.scrollHeight&&t>0},isInside:function(e,t){return e===t||null!==e&&e!==document.body&&this.isInside(e.parentNode,t)},checkPath:function(e){var path=e.path||this.composedPath(e),t=e.deltaY;if("keydown"===e.type&&path[0]===document.body){var dialog=this.$refs.dialog,n=window.getSelection().anchorNode;return!(dialog&&this.hasScrollbar(dialog)&&this.isInside(n,dialog))||this.shouldScroll(dialog,t)}for(var r=0;r<path.length;r++){var o=path[r];if(o===document)return!0;if(o===document.documentElement)return!0;if(o===this.$refs.content)return!0;if(this.hasScrollbar(o))return this.shouldScroll(o,t)}return!0},composedPath:function(e){if(e.composedPath)return e.composedPath();for(var path=[],t=e.target;t;){if(path.push(t),"HTML"===t.tagName)return path.push(document),path.push(window),path;t=t.parentElement}return path},hideScroll:function(){this.$vuetify.breakpoint.smAndDown?document.documentElement.classList.add("overflow-y-hidden"):(Object(h.a)(window,"wheel",this.scrollListener,{passive:!1}),window.addEventListener("keydown",this.scrollListener))},showScroll:function(){document.documentElement.classList.remove("overflow-y-hidden"),window.removeEventListener("wheel",this.scrollListener),window.removeEventListener("keydown",this.scrollListener)}}}),d=n(50),m=n(12);function v(){return!1}var y={inserted:function(e,t){var n=function(n){return function(e,t,n){n.args=n.args||{};var r=n.args.closeConditional||v;if(e&&!1!==r(e)&&!("isTrusted"in e&&!e.isTrusted||"pointerType"in e&&!e.pointerType)){var o=(n.args.include||function(){return[]})();o.push(t),!o.some(function(t){return t.contains(e.target)})&&setTimeout(function(){r(e)&&n.value&&n.value(e)},0)}}(n,e,t)};(document.querySelector("[data-app]")||document.body).addEventListener("click",n,!0),e._clickOutside=n},unbind:function(e){if(e._clickOutside){var t=document.querySelector("[data-app]")||document.body;t&&t.removeEventListener("click",e._clickOutside,!0),delete e._clickOutside}}},w=n(86),_=function(e){var t=e.touchstartX,n=e.touchendX,r=e.touchstartY,o=e.touchendY;e.offsetX=n-t,e.offsetY=o-r,Math.abs(e.offsetY)<.5*Math.abs(e.offsetX)&&(e.left&&n<t-16&&e.left(e),e.right&&n>t+16&&e.right(e)),Math.abs(e.offsetX)<.5*Math.abs(e.offsetY)&&(e.up&&o<r-16&&e.up(e),e.down&&o>r+16&&e.down(e))};function S(e){var t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:function(e){return function(e,t){var n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start&&t.start(Object.assign(e,t))}(e,t)},touchend:function(e){return function(e,t){var n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end&&t.end(Object.assign(e,t)),_(t)}(e,t)},touchmove:function(e){return function(e,t){var n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move&&t.move(Object.assign(e,t))}(e,t)}}}var C={inserted:function(e,t,n){var r=t.value,o=r.parent?e.parentElement:e,c=r.options||{passive:!0};if(o){var l=S(t.value);o._touchHandlers=Object(o._touchHandlers),o._touchHandlers[n.context._uid]=l,Object(h.k)(l).forEach(function(e){o.addEventListener(e,l[e],c)})}},unbind:function(e,t,n){var r=t.value.parent?e.parentElement:e;if(r&&r._touchHandlers){var o=r._touchHandlers[n.context._uid];Object(h.k)(o).forEach(function(e){r.removeEventListener(e,o[e])}),delete r._touchHandlers[n.context._uid]}}},x=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a=Object(o.a)(Object(r.a)("left",["miniVariant","right","width"]),l,f,d.a,m.a).extend({name:"v-navigation-drawer",directives:{ClickOutside:y,Resize:w.a,Touch:C},props:{clipped:Boolean,disableRouteWatcher:Boolean,disableResizeWatcher:Boolean,height:{type:[Number,String],default:"100%"},floating:Boolean,miniVariant:Boolean,miniVariantWidth:{type:[Number,String],default:80},mobileBreakPoint:{type:[Number,String],default:1264},permanent:Boolean,right:Boolean,stateless:Boolean,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:300},value:{required:!1}},data:function(){return{isActive:!1,touchArea:{left:0,right:0}}},computed:{applicationProperty:function(){return this.right?"right":"left"},calculatedTransform:function(){return this.isActive?0:this.right?this.calculatedWidth:-this.calculatedWidth},calculatedWidth:function(){return parseInt(this.miniVariant?this.miniVariantWidth:this.width)},classes:function(){return x({"v-navigation-drawer":!0,"v-navigation-drawer--absolute":this.absolute,"v-navigation-drawer--clipped":this.clipped,"v-navigation-drawer--close":!this.isActive,"v-navigation-drawer--fixed":!this.absolute&&(this.app||this.fixed),"v-navigation-drawer--floating":this.floating,"v-navigation-drawer--is-mobile":this.isMobile,"v-navigation-drawer--mini-variant":this.miniVariant,"v-navigation-drawer--open":this.isActive,"v-navigation-drawer--right":this.right,"v-navigation-drawer--temporary":this.temporary},this.themeClasses)},hasApp:function(){return this.app&&!this.isMobile&&!this.temporary},isMobile:function(){return!this.stateless&&!this.permanent&&!this.temporary&&this.$vuetify.breakpoint.width<parseInt(this.mobileBreakPoint,10)},marginTop:function(){if(!this.hasApp)return 0;var e=this.$vuetify.application.bar;return e+=this.clipped?this.$vuetify.application.top:0,e},maxHeight:function(){if(!this.hasApp)return null;var e=this.$vuetify.application.bottom+this.$vuetify.application.footer+this.$vuetify.application.bar;return this.clipped?e+this.$vuetify.application.top:e},reactsToClick:function(){return!this.stateless&&!this.permanent&&(this.isMobile||this.temporary)},reactsToMobile:function(){return!(this.disableResizeWatcher||this.stateless||this.permanent||this.temporary)},reactsToRoute:function(){return!this.disableRouteWatcher&&!this.stateless&&(this.temporary||this.isMobile)},resizeIsDisabled:function(){return this.disableResizeWatcher||this.stateless},showOverlay:function(){return this.isActive&&(this.isMobile||this.temporary)},styles:function(){var e={height:Object(h.b)(this.height),marginTop:this.marginTop+"px",maxHeight:null!=this.maxHeight?"calc(100% - "+ +this.maxHeight+"px)":void 0,transform:"translateX("+this.calculatedTransform+"px)",width:this.calculatedWidth+"px"};return e}},watch:{$route:function(){this.reactsToRoute&&this.closeConditional()&&(this.isActive=!1)},isActive:function(e){this.$emit("input",e),this.callUpdate()},isMobile:function(e,t){!e&&this.isActive&&!this.temporary&&this.removeOverlay(),null!=t&&!this.resizeIsDisabled&&this.reactsToMobile&&(this.isActive=!e,this.callUpdate())},permanent:function(e){e&&(this.isActive=!0),this.callUpdate()},showOverlay:function(e){e?this.genOverlay():this.removeOverlay()},temporary:function(){this.callUpdate()},value:function(e){if(!this.permanent){if(null==e)return this.init();e!==this.isActive&&(this.isActive=e)}}},beforeMount:function(){this.init()},methods:{calculateTouchArea:function(){if(this.$el.parentNode){var e=this.$el.parentNode.getBoundingClientRect();this.touchArea={left:e.left+50,right:e.right-50}}},closeConditional:function(){return this.isActive&&!this._isDestroyed&&this.reactsToClick},genDirectives:function(){var e=this,t=[{name:"click-outside",value:function(){return e.isActive=!1},args:{closeConditional:this.closeConditional,include:this.getOpenDependentElements}}];return!this.touchless&&t.push({name:"touch",value:{parent:!0,left:this.swipeLeft,right:this.swipeRight}}),t},init:function(){this.permanent?this.isActive=!0:this.stateless||null!=this.value?this.isActive=this.value:this.temporary||(this.isActive=!this.isMobile)},swipeRight:function(e){this.isActive&&!this.right||(this.calculateTouchArea(),Math.abs(e.touchendX-e.touchstartX)<100||(!this.right&&e.touchstartX<=this.touchArea.left?this.isActive=!0:this.right&&this.isActive&&(this.isActive=!1)))},swipeLeft:function(e){this.isActive&&this.right||(this.calculateTouchArea(),Math.abs(e.touchendX-e.touchstartX)<100||(this.right&&e.touchstartX>=this.touchArea.right?this.isActive=!0:!this.right&&this.isActive&&(this.isActive=!1)))},updateApplication:function(){return!this.isActive||this.temporary||this.isMobile?0:this.calculatedWidth}},render:function(e){var t=this;return e("aside",{class:this.classes,style:this.styles,directives:this.genDirectives(),on:{click:function(){t.miniVariant&&t.$emit("update:miniVariant",!1)},transitionend:function(e){if(e.target===e.currentTarget){t.$emit("transitionend",e);var n=document.createEvent("UIEvents");n.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(n)}}}},[this.$slots.default,e("div",{class:"v-navigation-drawer__border"})])}})},function(e,t,n){"use strict";n(80),n(26),n(230);var r=n(51),o=n(15),c=n(12),l=n(50);var h={inserted:function(e,t){var n=t.value,r=t.options||{passive:!0},o=t.arg?document.querySelector(t.arg):window;o&&(o.addEventListener("scroll",n,r),e._onScroll={callback:n,options:r,target:o})},unbind:function(e){if(e._onScroll){var t=e._onScroll,n=t.callback,r=t.options;t.target.removeEventListener("scroll",n,r),delete e._onScroll}}},f=n(13),d=n(3),m=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a=Object(d.a)(Object(r.a)("top",["clippedLeft","clippedRight","computedHeight","invertedScroll","manualScroll"]),o.a,l.a,c.a).extend({name:"v-toolbar",directives:{Scroll:h},props:{card:Boolean,clippedLeft:Boolean,clippedRight:Boolean,dense:Boolean,extended:Boolean,extensionHeight:{type:[Number,String],validator:function(e){return!isNaN(parseInt(e))}},flat:Boolean,floating:Boolean,height:{type:[Number,String],validator:function(e){return!isNaN(parseInt(e))}},invertedScroll:Boolean,manualScroll:Boolean,prominent:Boolean,scrollOffScreen:Boolean,scrollToolbarOffScreen:Boolean,scrollTarget:String,scrollThreshold:{type:Number,default:300},tabs:Boolean},data:function(){return{activeTimeout:null,currentScroll:0,heights:{mobileLandscape:48,mobile:56,desktop:64,dense:48},isActive:!0,isExtended:!1,isScrollingUp:!1,previousScroll:0,savedScroll:0,target:null}},computed:{canScroll:function(){return this.scrollToolbarOffScreen?(Object(f.c)("scrollToolbarOffScreen","scrollOffScreen",this),!0):this.scrollOffScreen||this.invertedScroll},computedContentHeight:function(){return this.height?parseInt(this.height):this.dense?this.heights.dense:this.prominent||this.$vuetify.breakpoint.mdAndUp?this.heights.desktop:this.$vuetify.breakpoint.smAndDown&&this.$vuetify.breakpoint.width>this.$vuetify.breakpoint.height?this.heights.mobileLandscape:this.heights.mobile},computedExtensionHeight:function(){return this.tabs?48:this.extensionHeight?parseInt(this.extensionHeight):this.computedContentHeight},computedHeight:function(){return this.isExtended?this.computedContentHeight+this.computedExtensionHeight:this.computedContentHeight},computedMarginTop:function(){return this.app?this.$vuetify.application.bar:0},classes:function(){return m({"v-toolbar":!0,"elevation-0":this.flat||!this.isActive&&!this.tabs&&this.canScroll,"v-toolbar--absolute":this.absolute,"v-toolbar--card":this.card,"v-toolbar--clipped":this.clippedLeft||this.clippedRight,"v-toolbar--dense":this.dense,"v-toolbar--extended":this.isExtended,"v-toolbar--fixed":!this.absolute&&(this.app||this.fixed),"v-toolbar--floating":this.floating,"v-toolbar--prominent":this.prominent},this.themeClasses)},computedPaddingLeft:function(){return!this.app||this.clippedLeft?0:this.$vuetify.application.left},computedPaddingRight:function(){return!this.app||this.clippedRight?0:this.$vuetify.application.right},computedTransform:function(){return this.isActive?0:this.canScroll?-this.computedContentHeight:-this.computedHeight},currentThreshold:function(){return Math.abs(this.currentScroll-this.savedScroll)},styles:function(){return{marginTop:this.computedMarginTop+"px",paddingRight:this.computedPaddingRight+"px",paddingLeft:this.computedPaddingLeft+"px",transform:"translateY("+this.computedTransform+"px)"}}},watch:{currentThreshold:function(e){this.invertedScroll?this.isActive=this.currentScroll>this.scrollThreshold:e<this.scrollThreshold||!this.isBooted||(this.isActive=this.isScrollingUp,this.savedScroll=this.currentScroll)},isActive:function(){this.savedScroll=0},invertedScroll:function(e){this.isActive=!e},manualScroll:function(e){this.isActive=!e},isScrollingUp:function(){this.savedScroll=this.savedScroll||this.currentScroll}},created:function(){(this.invertedScroll||this.manualScroll)&&(this.isActive=!1)},mounted:function(){this.scrollTarget&&(this.target=document.querySelector(this.scrollTarget))},methods:{onScroll:function(){this.canScroll&&!this.manualScroll&&"undefined"!=typeof window&&(this.currentScroll=this.target?this.target.scrollTop:window.pageYOffset,this.isScrollingUp=this.currentScroll<this.previousScroll,this.previousScroll=this.currentScroll)},updateApplication:function(){return this.invertedScroll||this.manualScroll?0:this.computedHeight}},render:function(e){this.isExtended=this.extended||!!this.$slots.extension;var t=[],data=this.setBackgroundColor(this.color,{class:this.classes,style:this.styles,on:this.$listeners});return data.directives=[{arg:this.scrollTarget,name:"scroll",value:this.onScroll}],t.push(e("div",{staticClass:"v-toolbar__content",style:{height:this.computedContentHeight+"px"},ref:"content"},this.$slots.default)),this.isExtended&&t.push(e("div",{staticClass:"v-toolbar__extension",style:{height:this.computedExtensionHeight+"px"}},this.$slots.extension)),e("nav",data,t)}})}]]);